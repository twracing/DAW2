var officeOnlinePerf;!function(){"use strict";var e={d:function(r,s){for(var t in s)e.o(s,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:s[t]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{getJSCPUProfilingPackageRetriever:function(){return zs}});class s{start(){this.logger.logNullJSCPUProfilerStartCalled()}stop(){this.logger.logNullJSCPUProfilerStopCalled()}subscribeProfilerObserver(e,r){}unsubscribeProfilerObserver(e,r){}subscribeCallTreeCustomPropertiesRetriever(e){}unsubscribeCallTreeCustomPropertiesRetriever(e){}subscribeCallTreeCustomFilterer(e){}unsubscribeCallTreeCustomFilterer(e){}requestProfilerTraceProcessing(e){}constructor(e){this.logger=e}}class t{getCurrentTimestamp(){return performance.now()}}const o=-1;class i{start(){this.unsupportedEnvironment?this.logger.logStopWatchStartingInUnsupportedEnvironment():this.startTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}stop(){this.unsupportedEnvironment?this.logger.logStopWatchStoppingInUnsupportedEnvironment():this.stopTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}getElapsedTime(){if(this.startTimestamp===o)return this.logger.logGetElapsedTimeCalledWithoutCallingStart(),o;if(this.stopTimestamp===o)return this.logger.logGetElapsedTimeCalledWithoutCallingStop(),o;const e=this.stopTimestamp-this.startTimestamp;return this.resetTimestamps(),e}resetTimestamps(){this.startTimestamp=o,this.stopTimestamp=o}constructor(e,r,s){return this.performanceAPIChecker=e,this.performanceTimestampRetriever=r,this.logger=s,this.startTimestamp=o,this.stopTimestamp=o,this.performanceAPIChecker.isPerformanceAPIAvailable()?this.performanceAPIChecker.isPerformanceNowDefined()?void(this.unsupportedEnvironment=!1):(this.logger.logPerformanceNowMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0)):(this.logger.logPerformanceMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0))}}class a{sendTraceTag(){}shipAssertTag(){}debugAssertTag(){}setCorrelationId(){}}const n=new class{setCorrelationId(e){this.externalLogger.setCorrelationId(e)}setLogger(e){this.externalLogger=e}sendTraceTag(e,r,s,t){this.externalLogger.sendTraceTag(e,r,s,t)}debugAssertTag(e,r,s,t){this.externalLogger.debugAssertTag(e,r,s,t)}shipAssertTag(e,r,s,t){this.externalLogger.shipAssertTag(e,r,s,t)}forwardFeedbackCacheLogs(){this.externalLogger.forwardFeedbackCacheLogs?.()}constructor(){this.externalLogger=new a}};function l(e){if(!e)throw new Error("The 'logger' argument is missing");n.setLogger(e)}var d,c;!function(e){e[e.msoulscat_ES_EWAJS=0]="msoulscat_ES_EWAJS",e[e.msoulscat_ES_EWAJSGrid=1]="msoulscat_ES_EWAJSGrid",e[e.msoulscat_ES_EWAJSChart=6]="msoulscat_ES_EWAJSChart",e[e.msoulscat_MSOSP_FileMenuCommands=202]="msoulscat_MSOSP_FileMenuCommands",e[e.msoulscat_MSOSP_AddInCommands=220]="msoulscat_MSOSP_AddInCommands",e[e.msoulscat_MSOSP_OTelJS=225]="msoulscat_MSOSP_OTelJS",e[e.msoulscat_MSOSP_OTelJSInWebWoker=227]="msoulscat_MSOSP_OTelJSInWebWoker",e[e.msoulscat_MSOSP_OTelJSWebWorkerPrototype=228]="msoulscat_MSOSP_OTelJSWebWorkerPrototype",e[e.msoulscat_Wac_WordViewer=301]="msoulscat_Wac_WordViewer",e[e.msoulscat_Wac_BrowserGeneral=306]="msoulscat_Wac_BrowserGeneral",e[e.msoulscat_Wac_TaskPane=320]="msoulscat_Wac_TaskPane",e[e.msoulscat_Wac_OneNoteGeneral=339]="msoulscat_Wac_OneNoteGeneral",e[e.msoulscat_Wac_Ribbon=340]="msoulscat_Wac_Ribbon",e[e.msoulscat_Wac_WacFeedback=356]="msoulscat_Wac_WacFeedback",e[e.msoulscat_Wac_WopiPendingApplication=379]="msoulscat_Wac_WopiPendingApplication",e[e.msoulscat_Wac_Telemetry=383]="msoulscat_Wac_Telemetry",e[e.msoulscat_Wac_WacCatchUpActivities=391]="msoulscat_Wac_WacCatchUpActivities",e[e.msoulscat_Wac_Dictation=394]="msoulscat_Wac_Dictation",e[e.msoulscat_Wac_OneNoteSync=395]="msoulscat_Wac_OneNoteSync",e[e.msoulscat_Wac_VisioApp=700]="msoulscat_Wac_VisioApp",e[e.msoulscat_OneNoteOnline_EditableCache=1601]="msoulscat_OneNoteOnline_EditableCache",e[e.msoulscat_Wac_PptAnimation=800]="msoulscat_Wac_PptAnimation",e[e.msoulscat_Wac_PptLive=833]="msoulscat_Wac_PptLive",e[e.msoulscat_Wac_PptMWeb=834]="msoulscat_Wac_PptMWeb",e[e.msoulscat_Wac_PptGc2General=835]="msoulscat_Wac_PptGc2General",e[e.msoulscat_Wac_PptGc2GraphicHost=836]="msoulscat_Wac_PptGc2GraphicHost",e[e.msoulscat_Wac_PptGc2Operation=837]="msoulscat_Wac_PptGc2Operation",e[e.msoulscat_Wac_PptGc2EditCanvas=852]="msoulscat_Wac_PptGc2EditCanvas",e[e.msoulscat_Wac_PptDataSync=844]="msoulscat_Wac_PptDataSync",e[e.msoulscat_Wac_PptFluidRuntime=848]="msoulscat_Wac_PptFluidRuntime",e[e.msoulscat_Wac_PptShape=815]="msoulscat_Wac_PptShape",e[e.msoulscat_Wac_PptSession=817]="msoulscat_Wac_PptSession",e[e.msoulscat_Wac_PptSlideshow=830]="msoulscat_Wac_PptSlideshow",e[e.msoulscat_Wac_PptView=822]="msoulscat_Wac_PptView",e[e.msoulscat_Wac_PptVideos=846]="msoulscat_Wac_PptVideos",e[e.msoulscat_Uci_Insights=1303]="msoulscat_Uci_Insights",e[e.msoulscat_Wac_VersionHistory=2300]="msoulscat_Wac_VersionHistory",e[e.msoulscat_Wac_WordPresence=302]="msoulscat_Wac_WordPresence",e[e.msoulscat_Wac_OAuth=3e3]="msoulscat_Wac_OAuth",e[e.msoulscat_Wac_WordVersionHistory=3005]="msoulscat_Wac_WordVersionHistory",e[e.msoulscat_Wac_LivePersonaCard=3006]="msoulscat_Wac_LivePersonaCard",e[e.msoulscat_Wac_CatchUpFlyout=3012]="msoulscat_Wac_CatchUpFlyout",e[e.msoulscat_Wac_WordDesigner=3016]="msoulscat_Wac_WordDesigner",e[e.msoulscat_Wac_ModernFontPicker=3021]="msoulscat_Wac_ModernFontPicker",e[e.msoulscat_Wac_UnifiedUiHost=3027]="msoulscat_Wac_UnifiedUiHost",e[e.msoulscat_Wac_EquationTools=3033]="msoulscat_Wac_EquationTools",e[e.msoulscat_Osf_Latency=1401]="msoulscat_Osf_Latency",e[e.msoulscat_Osf_Notification=1402]="msoulscat_Osf_Notification",e[e.msoulscat_Osf_Runtime=1403]="msoulscat_Osf_Runtime",e[e.msoulscat_Wac_AiMaker=3041]="msoulscat_Wac_AiMaker",e[e.msoulscat_Wac_AiRewrite=3043]="msoulscat_Wac_AiRewrite",e[e.msoulscat_Wac_AiInsert=3044]="msoulscat_Wac_AiInsert",e[e.msoulscat_Wac_AiSummarize=3047]="msoulscat_Wac_AiSummarize",e[e.msoulscat_Wac_CopilotCompose=3048]="msoulscat_Wac_CopilotCompose",e[e.msoulscat_Wac_Skittles=3049]="msoulscat_Wac_Skittles",e[e.msoulscat_Wac_CopilotChat=3050]="msoulscat_Wac_CopilotChat",e[e.msoulscat_Wac_Syntex=3051]="msoulscat_Wac_Syntex",e[e.msoulscat_Wac_WireGraph=3052]="msoulscat_Wac_WireGraph",e[e.msoulscat_Wac_CshCopilot=3053]="msoulscat_Wac_CshCopilot",e[e.msoulscat_Wac_CopilotProactiveSummary=3055]="msoulscat_Wac_CopilotProactiveSummary",e[e.msoulscat_Wac_CopilotProactiveShared=3056]="msoulscat_Wac_CopilotProactiveShared",e[e.msoulscat_Wac_CopilotCursor=3057]="msoulscat_Wac_CopilotCursor",e[e.msoulscat_Wac_WasmGeneral=3059]="msoulscat_Wac_WasmGeneral",e[e.msoulscat_Wac_WasmTextLayout=3060]="msoulscat_Wac_WasmTextLayout",e[e.msoulscat_Wac_WasmSmartArt=3061]="msoulscat_Wac_WasmSmartArt",e[e.msoulscat_Wac_WasmClient=3062]="msoulscat_Wac_WasmClient",e[e.msoulscat_Wac_WasmNative=3063]="msoulscat_Wac_WasmNative",e[e.msoulscat_Wac_UniversalPrint=3068]="msoulscat_Wac_UniversalPrint",e[e.msoulscat_AIHub_CreateModuleTelemetry=4e3]="msoulscat_AIHub_CreateModuleTelemetry",e[e.msoulscat_AIHub_CreateModuleAugloop=4001]="msoulscat_AIHub_CreateModuleAugloop",e[e.msoulscat_AIHub_CreateModuleDAS=4002]="msoulscat_AIHub_CreateModuleDAS",e[e.msoulscat_AIHub_CreateModuleConfig=4003]="msoulscat_AIHub_CreateModuleConfig",e[e.msoulscat_AIHub_CreateModuleContext=4004]="msoulscat_AIHub_CreateModuleContext",e[e.msoulscat_AIHub_CreateModuleGraph=4005]="msoulscat_AIHub_CreateModuleGraph",e[e.msoulscat_AIHub_CreateModuleExperiences=4006]="msoulscat_AIHub_CreateModuleExperiences",e[e.msoulscat_AIHub_CreateModuleHttp=4007]="msoulscat_AIHub_CreateModuleHttp",e[e.msoulscat_AIHub_CreateModuleRouting=4008]="msoulscat_AIHub_CreateModuleRouting",e[e.msoulscat_AIHub_CreateModuleStorage=4009]="msoulscat_AIHub_CreateModuleStorage",e[e.msoulscat_AIHub_CreateModuleStore=4010]="msoulscat_AIHub_CreateModuleStore",e[e.msoulscat_AIHub_CreateModuleUI=4011]="msoulscat_AIHub_CreateModuleUI",e[e.msoulscat_AIHub_CreateModuleSharePoint=4012]="msoulscat_AIHub_CreateModuleSharePoint",e[e.msoulscat_AIHub_CreateModuleLicensing=4013]="msoulscat_AIHub_CreateModuleLicensing",e[e.msoulscat_AIHub_CreateModuleUI_Artifacts=4100]="msoulscat_AIHub_CreateModuleUI_Artifacts",e[e.msoulscat_AIHub_CreateModuleUI_BrandKit=4101]="msoulscat_AIHub_CreateModuleUI_BrandKit",e[e.msoulscat_AIHub_CreateModuleUI_Forms=4102]="msoulscat_AIHub_CreateModuleUI_Forms",e[e.msoulscat_AIHub_CreateModuleUI_Homepage=4103]="msoulscat_AIHub_CreateModuleUI_Homepage",e[e.msoulscat_AIHub_CreateModuleUI_Text=4104]="msoulscat_AIHub_CreateModuleUI_Text",e[e.msoulscat_AIHub_CreateModuleUI_Video=4105]="msoulscat_AIHub_CreateModuleUI_Video"}(d||(d={})),function(e){e[e.Error=10]="Error",e[e.Warning=15]="Warning",e[e.Important=20]="Important",e[e.Info=50]="Info",e[e.Verbose=100]="Verbose",e[e.Spam=200]="Spam"}(c||(c={}));class g{logPerformanceMissingInJSEnvironment(){n.sendTraceTag(579110677,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find performance in the JS environment")}logPerformanceNowMissingInJSEnvironment(){n.sendTraceTag(579110678,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find performance.now in the JS environment")}logStopWatchStartingInUnsupportedEnvironment(){n.sendTraceTag(579110679,d.msoulscat_Wac_Telemetry,c.Error,"Starting the stopwatch in an unsupported environment. Incorrect data will be stored")}logStopWatchStoppingInUnsupportedEnvironment(){n.sendTraceTag(579110680,d.msoulscat_Wac_Telemetry,c.Error,"Stopping the stopwatch in an unsupported environment. Incorrect data will be stored")}logGetElapsedTimeCalledWithoutCallingStart(){n.sendTraceTag(579110683,d.msoulscat_Wac_Telemetry,c.Error,"Stopwatch needs to be started before you can get elapsed time")}logGetElapsedTimeCalledWithoutCallingStop(){n.sendTraceTag(579110684,d.msoulscat_Wac_Telemetry,c.Error,"Stopwatch needs to be stopped before you can get elapsed time")}}class u{isPerformanceAPIAvailable(){return null!=performance}isPerformanceNowDefined(){return"now"in performance}}class m{static createNewStopWatch(){const e=new g,r=new u,s=new t;return new i(r,s,e)}}class p{serializeException(e){this.wasSerializeExceptionCalled=!0,null!=JSON&&"stringify"in JSON?this.serializedException=null!=Object&&"getOwnPropertyNames"in Object?JSON.stringify(e,Object.getOwnPropertyNames(e)):"":this.serializedException=""}retrieveSerializedException(){return this.wasSerializeExceptionCalled?(this.wasSerializeExceptionCalled=!1,this.serializedException):""}constructor(){this.serializedException="",this.wasSerializeExceptionCalled=!1}}class h{logOperation(e,r,s,t,o,i,a,n){}logFallbackResultReturned(){}}const T=new class{push(e){this.elements.unshift(e)}pop(){return this.elements.shift()}peek(){return this.elements.length>0?this.elements[0]:void 0}constructor(){this.elements=[]}};class f{addLog(e){this.logs.push(e)}addProperty(e,r){this.propertyBag.set(e,r)}getResult(){return this.operationResult.result}static startNew(e,r,s,t,o,i){return new f(e,r,s,null!=o&&o,null==i?new p:i,null==t?new h:t)}constructor(e,r,s,t,o,i){const a=T.peek(),n=void 0!==a?a:"";T.push(e),this.logs=[],this.propertyBag=new Map;const l=m.createNewStopWatch();let d;l.start();let c=!1;try{d=r(this),c=d.didOperationFailUnexpectedly}catch(e){o.serializeException(e),this.exception=o.retrieveSerializedException(),c=!0}this.operationResult=void 0!==d?d:s,l.stop(),!c&&t||i.logOperation(e,n,this.operationResult.didOperationSucceed,l.getElapsedTime(),c,this.logs,this.propertyBag,this.exception),T.pop()}}class P{static generateOperationResult(e){return new P(e.didOperationSucceed,null!=e.didOperationFailUnexpectedly&&e.didOperationFailUnexpectedly,e.result)}constructor(e,r,s){this.didOperationSucceed=e,this.didOperationFailUnexpectedly=r,this.result=s}}class C{hasProperty(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckWindowProperty",(r=>{if(null==window)return this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("PropertyNameChecked",e);const s=e in window;return r.addProperty("DoesPropertyExistOnWindow",s),P.generateOperationResult({didOperationSucceed:!0,result:s})}),r).getResult()}constructor(e){this.logger=e}}class S{logWindowMissingInJSEnvironment(){n.sendTraceTag(578834847,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window in the JS environment")}logEmptyUserAgentString(){n.sendTraceTag(578834850,d.msoulscat_Wac_Telemetry,c.Error,"Empty user agent string")}logChromiumOnIOS(){n.sendTraceTag(578834851,d.msoulscat_Wac_Telemetry,c.Info,"iOS version of Chromium based browser detected")}logBrowserUserAgentNotChromiumBased(){n.sendTraceTag(578834880,d.msoulscat_Wac_Telemetry,c.Info,"Browser not chromium based")}logUserAgentSpoofedToBeChromium(){n.sendTraceTag(578834881,d.msoulscat_Wac_Telemetry,c.Info,"Browser user agent spoofed to be chromium based")}logUserAgentToParseChromiumMajorVersionNumber(e){n.sendTraceTag(578834882,d.msoulscat_Wac_Telemetry,c.Info,e)}logChromeNotPresentInUserAgent(){n.sendTraceTag(578834883,d.msoulscat_Wac_Telemetry,c.Error,"Chrome was not found in the user agent")}logUnableToIsolateChromeInformationFromUserAgent(){n.sendTraceTag(578834884,d.msoulscat_Wac_Telemetry,c.Error,"Unable to isolate chrome information from the user agent")}logUnableToExtractChromeVersionInformation(){n.sendTraceTag(578834885,d.msoulscat_Wac_Telemetry,c.Error,"Unable to extract chrome version information from the user agent")}logUnableToParseChromeMajorVersionString(){n.sendTraceTag(578834886,d.msoulscat_Wac_Telemetry,c.Error,"Unable to parse the chromium major version number")}logRequestIdleCallbackMissing(){n.sendTraceTag(576582740,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window.requestIdleCallback in the JS environment")}logCallbackBeingInvokedImmediately(){n.sendTraceTag(576582743,d.msoulscat_Wac_Telemetry,c.Error,"Callback is being invoked immediately as there is no platform support for deferring work")}logCancelIdleCallbackMissing(){n.sendTraceTag(576582744,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window.cancelIdleCallback in the JS environment")}logUnknownMechanism(){n.sendTraceTag(576582747,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find a way to cancel the idle time job")}logWindowSetTimeOutMissingInJSEnvironment(){n.sendTraceTag(576239755,d.msoulscat_Wac_Telemetry,c.Error,"window.setTimeout is missing in JS environment")}logWindowPerformanceMissingInJSEnvironment(){n.sendTraceTag(576218121,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find window.performance in the JS environment")}logWindowPerformanceNowMissingInJSEnvironment(){n.sendTraceTag(576218122,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find window.performance.now in the JS environment")}logNavigatorMissingInJSEnvironment(){n.sendTraceTag(574657350,d.msoulscat_Wac_Telemetry,c.Error,"Navigator is missing in the JS environment")}logSendBeaconNotSupported(){n.sendTraceTag(573970625,d.msoulscat_Wac_Telemetry,c.Info,"SendBeacon not supported in current environment")}logBeaconURLIsEmpty(){n.sendTraceTag(573919702,d.msoulscat_Wac_Telemetry,c.Error,"We were passed an empty URL for sendBeacon")}logBeaconDataIsEmpty(){n.sendTraceTag(573907718,d.msoulscat_Wac_Telemetry,c.Error,"We were passed an empty data for sendBeacon")}logDocumentMissingInJsEnvironment(){n.sendTraceTag(573572181,d.msoulscat_Wac_Telemetry,c.Error,"Document is not present in JS Environment")}logDocumentVisibilityStateMissingInJsEnvironment(){n.sendTraceTag(573572182,d.msoulscat_Wac_Telemetry,c.Error,"Document VisibilityState is not present in JS Environment")}logDocumentAddEventListenerMissingInJsEnvironment(){n.sendTraceTag(573572183,d.msoulscat_Wac_Telemetry,c.Error,"Document AddEventListener is not present in JS Environment")}logWindowAddEventListenerNotFound(){n.sendTraceTag(538710337,d.msoulscat_Wac_Telemetry,c.Error,"Window AddEventListener is not present in JS Environment")}logPerformanceEventCountsNotSupported(){n.sendTraceTag(537522270,d.msoulscat_Wac_Telemetry,c.Warning,"Performance.EventCounts is not present in JS Environment")}logRemoveQueryParamsNotCalled(){n.sendTraceTag(527439250,d.msoulscat_Wac_Telemetry,c.Error,"Remove query params was not called before retrieve")}logWindowPerformanceEventCountsMissingInJSEnvironment(){n.sendTraceTag(525099864,d.msoulscat_Wac_Telemetry,c.Info,"window.performance.eventcounts was not present in the JS environment")}}class I{removeQueryParams(e){this.wasRemoveQueryParamsCalled=!0,this.queryParamsRemovedURL=e.split("?")[0]}retrieveQueryParamsRemovedURL(){return this.wasRemoveQueryParamsCalled?(this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL):(this.logger.logRemoveQueryParamsNotCalled(),"")}constructor(e){this.logger=e,this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL=""}}class v{getURLQueryParamsRemover(){return new I(new S)}}class k{open(e,r,s){this.xmlHTTPRequest.open(e,r,s)}send(e){this.xmlHTTPRequest.send(e)}constructor(){this.xmlHTTPRequest=new XMLHttpRequest}}class b{generateXMLHTTPRequestWrapper(){return new k}}const O="InvalidUnderlyingMechanism",W="requestIdleCallback",M="hidden";class y{isBrowserChromiumBased(e){return function(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckChromiumBrowser",(s=>{if(s.addProperty("UserAgent",e),0===e.localeCompare(""))return r.logEmptyUserAgentString(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const t=e.match(/(Chrome\/|CriOS\/)/g);return null!=e.match(/(CriOS\/)/g)&&r.logChromiumOnIOS(),null===t?(r.logBrowserUserAgentNotChromiumBased(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):P.generateOperationResult({didOperationSucceed:!0,result:!0})}),s).getResult()}(e,this.logger)}parseChromeMajorVersionNumber(e){return function(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:-1});return f.startNew("ParseChromiumMajorVersionNumber",(s=>{s.addProperty("UserAgent",e);const t=e.match(/((Chrome\/|CriOS\/)(\d|\.)+)/g);if(null==t)return r.logChromeNotPresentInUserAgent(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const o=t[0].split("/");if(o.length<2)return r.logUnableToIsolateChromeInformationFromUserAgent(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const i=o[1].split(".");if(i.length<4)return r.logUnableToExtractChromeVersionInformation(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const a=i[0],n=parseInt(a,10);return isNaN(n)?(r.logUnableToParseChromeMajorVersionString(),P.generateOperationResult({didOperationSucceed:!1,result:-1})):(s.addProperty("MajorVersionNumber",n),P.generateOperationResult({didOperationSucceed:!0,result:n}))}),s).getResult()}(e,this.logger)}constructor(e){this.logger=e}}class R{static getBrowserUtils(){const e=new S;return new y(e)}}class N{scheduleJobForIdleTime(e){!function(e,r,s,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:{id:-1,underlyingMechanism:O}});f.startNew("RequestIdleCallbackShim",(()=>{if(r.hasProperty(W)){const r=window.requestIdleCallback(e,undefined);return P.generateOperationResult({didOperationSucceed:!0,result:{id:r,underlyingMechanism:W}})}s.logRequestIdleCallbackMissing();Date.now();return s.logCallbackBeingInvokedImmediately(),e(),P.generateOperationResult({didOperationSucceed:!0,result:{id:-1,underlyingMechanism:O}})}),o).getResult()}((()=>{e()}),this.windowPropertyChecker,this.logger)}constructor(e,r){this.windowPropertyChecker=e,this.logger=r}}class x{static getIdleTimeJobScheduler(){const e=new S,r=new C(e);return new N(r,e)}}class F{setTimerJob(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SetTimerJob",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):null==window.setTimeout?(this.logger.logWindowSetTimeOutMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(window.setTimeout(e,r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s)}constructor(e){this.logger=e}}class E{static getTimerJobScheduler(){const e=new S;return new F(e)}}class _{isDocumentVisibleNow(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckDocumentVisibility",(()=>{if(!this.isDocumentPresentInJsEnvironment())return this.logger.logDocumentMissingInJsEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});if(!this.isDocumentVisibilityStatePresentInJsEnvironment())return this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const e=document.visibilityState!==M;return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}wasDocumentHiddenDuringTimeRange(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("WasDocumentHiddenDuringTimeRange",(()=>{if(this.isDocumentHidden)return P.generateOperationResult({didOperationSucceed:!0,result:!0});if(void 0===this.lastUnHiddenDate)return P.generateOperationResult({didOperationSucceed:!0,result:!1});const r=Date.now()-this.lastUnHiddenDate<e;return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r).getResult()}isDocumentPresentInJsEnvironment(){return null!=document}isDocumentVisibilityStatePresentInJsEnvironment(){return"visibilityState"in document}isDocumentAddEventListenerPresentInJsEnvironment(){return"addEventListener"in document}updateIsHidden(){this.isDocumentHidden=document.visibilityState===M,this.isDocumentHidden||(this.lastUnHiddenDate=Date.now())}constructor(e){this.logger=e,this.onVisibilityChange=()=>{this.updateIsHidden()},this.isDocumentPresentInJsEnvironment()||this.logger.logDocumentMissingInJsEnvironment(),this.isDocumentVisibilityStatePresentInJsEnvironment()||this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),this.isDocumentAddEventListenerPresentInJsEnvironment()||this.logger.logDocumentAddEventListenerMissingInJsEnvironment(),this.lastUnHiddenDate=void 0,this.isDocumentHidden=!1,this.updateIsHidden(),document.addEventListener("visibilitychange",this.onVisibilityChange)}}class w{static getDocumentVisibilityChecker(){const e=new S;return new _(e)}}var U;!function(e){e.SendBeacon="sendBeacon"}(U||(U={}));class L{sendBeacon(e){return function(e,r,s,t,o,i){const a=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("SendBeaconCall",(a=>{if(0===o.length)return t.logBeaconURLIsEmpty(),P.generateOperationResult({didOperationSucceed:!1,result:!1});if(0===i.length)return t.logBeaconDataIsEmpty(),P.generateOperationResult({didOperationSucceed:!1,result:!1});if(!e.hasProperty(U.SendBeacon)){t.logSendBeaconNotSupported();const e="POST",r=s.generateXMLHTTPRequestWrapper();return r.open(e,o,!0),r.send(i),a.addProperty("POSTRequestSent",!0),P.generateOperationResult({didOperationSucceed:!0,result:!0})}const n=r.sendBeacon(o,i);return a.addProperty("BeaconRequestSuccessfullyQueued",n),P.generateOperationResult({didOperationSucceed:!0,result:n})}),a).getResult()}(this.navigatorPropertyChecker,this.navigatorAPI,this.xmlHTTPRequestWrapperFactory,this.logger,e.url,e.data)}constructor(e,r,s,t){this.navigatorPropertyChecker=e,this.navigatorAPI=r,this.xmlHTTPRequestWrapperFactory=s,this.logger=t}}class B{hasProperty(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckNavigatorProperty",(r=>{if(null==navigator)return this.logger.logNavigatorMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("NavigatorPropertyChecked",e);const s=e in navigator;return r.addProperty("IsPropertyPresentInNavigatorResult",s),P.generateOperationResult({didOperationSucceed:!0,result:s})}),r).getResult()}constructor(e){this.logger=e}}class A{sendBeacon(e,r){return null==navigator?(this.logger.logNavigatorMissingInJSEnvironment(),!1):navigator.sendBeacon(e,r)}constructor(e){this.logger=e}}class z{static getSendBeaconScheduler(){const e=new S,r=new B(e),s=new A(e),t=new b;return new L(r,s,t,e)}}class ${getCurrentTimestamp(){if(null!=window)if(null!=window.performance){if(null!=window.performance.now)return window.performance.now();this.logger.logWindowPerformanceNowMissingInJSEnvironment()}else this.logger.logWindowPerformanceMissingInJSEnvironment();else this.logger.logWindowMissingInJSEnvironment()}constructor(e){this.logger=e}}class q{static getTimestampRetriever(){const e=new S;return new $(e)}}class J{peek(){return this.elements.size>0?this.elements.get(this.dequeueIndex):void 0}queue(e){this.elements.set(this.queueIndex,e),this.queueIndex+=1}dequeue(){0!==this.elements.size&&(this.elements.delete(this.dequeueIndex),this.dequeueIndex+=1)}length(){return this.elements.size}constructor(){this.elements=new Map,this.queueIndex=0,this.dequeueIndex=0}}class D{static createQueue(){return new J}}class V{retrieveUserAgent(){const e=P.generateOperationResult({didOperationSucceed:!1,result:""});return f.startNew("RetrieveUserAgent",(()=>{const e=this.getUserAgentFromNavigatorAPI();return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}getUserAgentFromNavigatorAPI(){return"undefined"==typeof navigator?(this.logger.logNavigatorMissingInJSEnvironment(),""):navigator.userAgent}constructor(e){this.logger=e,this.logger=e}}class H{static getUserAgentRetriever(){return new V(new S)}}class G{peek(){const e=this.count();if(0!==e)return this.elements[e-1]}push(e){this.elements.push(e)}pop(){this.elements.pop()}count(){return this.elements.length}constructor(){this.elements=[]}}class j{static createStack(){return new G}}class Q{static getWindowPropertyChecker(){const e=new S;return new C(e)}}class K{generateGuid(){return""}}class Z{static getGuidGenerator(){return new K}}function X(){const e=new S;if(!window)return void e.logWindowMissingInJSEnvironment();if(!window.performance)return void e.logWindowPerformanceMissingInJSEnvironment();const r=window.performance.eventCounts;if(!r)return void e.logPerformanceEventCountsNotSupported();let s=0;return r.forEach((e=>s+=e)),s}const Y="JSSelfProfilingAPI-Profile",ee="StartManualProfiler",re="StopManualProfiler",se="StartTimedProfiler",te="StopTimedProfiler",oe="StartManualProfilerInternal",ie="StopManualProfilerInternal",ae="StartContinuousProfiler",ne="StopContinuousProfiler",le="TransformProfilerTrace",de="StartFullSessionProfiler",ce="StopFullSessionProfiler",ge="SendCallTrees",ue="SerializeCallTreesArray",me="OnMessageReceivedFromWorker",pe="useWebWorkForProfilerTraceProcessing",he=[Y,le,ge,ue,me,pe,"ProfilerWorkerOnMessage",ie,de,ee,se,ae,ne,ce,re,te,oe];var Te,fe,Pe;!function(e){e[e.Manual=0]="Manual",e[e.Timed=1]="Timed",e[e.Continuous=2]="Continuous",e[e.FullSession=3]="FullSession"}(Te||(Te={})),function(e){e[e.ProfilerStopped=0]="ProfilerStopped",e[e.PreProfilerStart=1]="PreProfilerStart"}(fe||(fe={}));class Ce{getCustomProperties(){return this.customProperties}getResources(){return this.profilerTrace.resources}getFrames(){return this.profilerTrace.frames}getStacks(){return this.profilerTrace.stacks}getSamples(){return this.profilerTrace.samples}getSamplesTrimmed(){return this.getSamples().reduce(((e,r)=>{const s=e.length>0&&void 0!==e[e.length-1].stackId;return(void 0!==r.stackId||s)&&e.push(r),e}),[])}getProfilerTraceStartTimestamp(){return this.profilerTraceStartTimestamp}getProfilerProperties(){return this.profilerProperties}getElapsedProfilingTimeInMs(){return this.elapsedProfilingTime}constructor(e,r,s,t,o){this.customProperties=e,this.profilerTrace=r,this.profilerTraceStartTimestamp=s,this.profilerProperties=t,this.elapsedProfilingTime=o}}!function(e){e.Chrome="chrome"}(Pe||(Pe={}));const Se={samplingIntervalInMs:-1},Ie={name:"InvalidFrameName",resourceId:-1,line:-1,column:-1},ve={name:"EndOfSiblingChainFrame",resourceId:-1,line:-1,column:-1},ke="InvalidResourceName",be=!1,Oe=!1,We=!1,Me={obfuscatedName:"InvalidObfuscatedName",startTimeInMs:-1,frameOnlyRunTimeInMs:-1,subTreeRunTimeInMs:-1,totalExecutionTimeInMs:-1,hasChildrenNodes:!1,resourceInfo:{resourceName:ke,lineNo:-1,columnNo:-1}},ye=!1,Re=!1,Ne=!1,xe=!1,Fe="00000000-0000-0000-0000-000000000000",Ee=!1,_e=!0,we=!1,Ue=!1,Le=!1,Be=!0,Ae=!0,ze="INVALID_BLOB_SCRIPT_URL";function $e(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendProfilerEventToProfilerObservers",(o=>(o.addProperty("ProfilerEventIdToSendToObservers",r.eventId),e.forEach(((e,o)=>{-1!==e.indexOf(r.eventId)&&f.startNew("InvokeOnProfilerEventOnProfilerObserver",(()=>(o.onProfilerEvent(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,s)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,s)}class qe{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="callTreeCustomFilterer"}}class Je{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="customPropertiesRetriever"}}class De{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ee,(()=>{const e=this.startProfilerImplementation();return P.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}startProfilerImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew(oe,(r=>void 0!==this.profiler?(this.logger.logProfilerAlreadyStarted(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):this.preProfilerStartChecker.shouldProfilingStart()?null==this.profilerInitOptions.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotFixed(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):(r.addProperty("SamplingInterval",this.profilerInitOptions.samplingIntervalInMs),r.addProperty("MaxBufferSize",this.profilerInitOptions.maximumNumberOfSamplesToTake),$e(this.profilerObserversToProfilerEventIds,{eventId:fe.PreProfilerStart,eventData:void 0},this.logger),this.profiler=this.jsSelfProfilingAPI.createProfiler({sampleInterval:this.profilerInitOptions.samplingIntervalInMs,maxBufferSize:this.profilerInitOptions.maximumNumberOfSamplesToTake}),null==this.profiler?(this.logger.logBailingOutOnNullProfiler(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):(this.preProfilerStartChecker.getShouldProcessProfileCapturedWhileUserIsIdle()||(this.documentEventsCountBeforeProfiling=X()),this.profilerStartTimestamp=this.timestampRetriever.getCurrentTimestamp(),null!=e&&e(!0),P.generateOperationResult({didOperationSucceed:!0,result:!0}))):(this.logger.logPreProfilerStartCheckFailed(),this.didPreProfilerStartChecksFail=!0,e&&e(!1),P.generateOperationResult({didOperationSucceed:!0,result:!0}))),r,this.logger).getResult()}stop(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(re,(()=>{const e=this.stopProfilerImplementation();return P.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}stopProfilerImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew(ie,(r=>{if(null==this.profiler){const e=!!this.didPreProfilerStartChecksFail;return this.didPreProfilerStartChecksFail=!1,this.logger.logProfilerInstanceIsUndefined(),P.generateOperationResult({didOperationSucceed:e,result:!1})}return this.profiler.stop().then((s=>{this.profilerStopTimestamp=this.timestampRetriever.getCurrentTimestamp(),this.profilerTrace=s;const t=this.customPropertiesExtractor.extractCustomProperties(this.customPropertiesRetriever);let o=-1;void 0!==this.profilerStartTimestamp&&void 0!==this.profilerStopTimestamp&&(o=this.profilerStopTimestamp-this.profilerStartTimestamp),r.addProperty("ElapsedProfilingTime",o);const i={profilerTrace:new Ce(t,this.profilerTrace,void 0!==this.profilerStartTimestamp?this.profilerStartTimestamp:-1,this.profilerInitOptions,o),callTreeCustomPropertiesRetrievers:this.callTreeCustomPropertiesRetrievers,documentEventsCountBeforeProfiling:this.documentEventsCountBeforeProfiling,callTreeCustomFilterers:this.callTreeCustomFilterers,traceRequestingEvents:this.traceRequestingEvents};this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0;const a={eventId:fe.ProfilerStopped,eventData:i};$e(this.profilerObserversToProfilerEventIds,a,this.logger),this.profiler=void 0,this.documentEventsCountBeforeProfiling=void 0,this.traceRequestingEvents=[],null!=e&&e()}),(e=>{this.logger.logProfilerStopPromiseRejected(e),this.profiler=void 0,this.profilerTrace=void 0})),P.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}requestProfilerTraceProcessing(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("RequestProfilerTraceProcessing",(()=>null==e?r:(this.traceRequestingEvents.push(e),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}subscribeProfilerObserver(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SubscribeProfilerObserver",(s=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForSubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventIds(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(s.addProperty("ProfilerEventIds",Array.from(r)),this.profilerObserversToProfilerEventIds.has(e)){const s=this.profilerObserversToProfilerEventIds.get(e);null==s?this.logger.logUnexpectedUndefinedProfilerEventIds():(r.forEach((e=>{s.push(e)})),this.profilerObserversToProfilerEventIds.set(e,Array.from(new Set(s))))}else this.profilerObserversToProfilerEventIds.set(e,Array.from(r));return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),s,this.logger)}unsubscribeProfilerObserver(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("UnsubscribeProfilerObserver",(s=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventToUnsubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(s.addProperty("ProfilerEventToUnsubscribe",r),!this.profilerObserversToProfilerEventIds.has(e))return this.logger.logProfilerObserverWasNeverSubscribed(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=this.profilerObserversToProfilerEventIds.get(e);return null==t?(this.logger.logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):-1===t.indexOf(r)?(this.logger.logProfilerObserverNeverSubscribedForProfilerEventId(r),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(this.profilerObserversToProfilerEventIds.set(e,t.filter((e=>e!==r))),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),s,this.logger)}subscribeCallTreeCustomPropertiesRetriever(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SubscibeCallTreeCustomPropertiesRetriever",(()=>this.subscribeToProfiler(new Je(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}unsubscribeCallTreeCustomPropertiesRetriever(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("UnsubscribeCallTreeCustomPropertiesRetriever",(()=>this.unsubscribeFromProfiler(new Je(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}subscribeCallTreeCustomFilterer(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("subscribeCallTreeCustomFilterer",(()=>this.subscribeToProfiler(new qe(e,this.callTreeCustomFilterers))),r,this.logger)}unsubscribeCallTreeCustomFilterer(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("unsubscribeCallTreeCustomFilterer",(()=>this.unsubscribeFromProfiler(new qe(e,this.callTreeCustomFilterers))),r,this.logger)}subscribeToProfiler(e){return null==e.subscriber?(this.logger.logNullOrUndefinedItemToSubscribe(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.push(e.subscriber),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}unsubscribeFromProfiler(e){if(null==e.subscriber)return this.logger.logNullOrUndefinedItemForUnsubscribe(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const r=e.subscriptionList.indexOf(e.subscriber);return-1===r?(this.logger.logItemWasNeverSubscribed(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.splice(r,1),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}constructor(e,r,s,t,o,i,a){this.preProfilerStartChecker=e,this.jsSelfProfilingAPI=r,this.profilerInitOptions=s,this.customPropertiesRetriever=t,this.timestampRetriever=o,this.customPropertiesExtractor=i,this.logger=a,this.profiler=void 0,this.profilerTrace=void 0,this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0,this.didPreProfilerStartChecksFail=!1,this.profilerObserversToProfilerEventIds=new Map,this.callTreeCustomPropertiesRetrievers=[],this.documentEventsCountBeforeProfiling=void 0,this.callTreeCustomFilterers=[],this.traceRequestingEvents=[]}}class Ve extends De{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(se,(()=>(super.startProfilerImplementation(this.postProfilerStartCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(te,(()=>(null==e||e||this.logger.logTimedProfilerIsBeingStoppedManually(),super.stopProfilerImplementation(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}constructor(e,r,s,t,o,i,a,n){super(e,r,s,o,i,a,n),this.timerJobScheduler=t,this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),null!=this.profilerInitOptions.profilingIntervalInMs?e&&(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):this.logger.logProfilingIntervalIsUndefined()},this.postTimerStopCallBack=()=>{this.logger.logTimedProfilerStopCallbackInvoked(),this.stop(!0)}}}class He extends Ve{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ae,(()=>(super.start(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ne,(()=>(super.stopProfilerImplementation(this.postProfilerStopCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}constructor(){super(...arguments),this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),this.profilerInitOptions.profilingIntervalInMs?e?(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):(this.logger.logPostProfilerStopCallbackInvoked(),this.postProfilerStopCallback()):this.logger.logProfilingIntervalIsUndefined()},this.postProfilerStopCallback=()=>{null!=this.profilerInitOptions.idleIntervalInMs?this.timerJobScheduler.setTimerJob(this.profilerStopCallback,this.profilerInitOptions.idleIntervalInMs):this.logger.logNullOrUndefinedIdleInterval()},this.profilerStopCallback=()=>{this.start()}}}class Ge extends De{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew(de,(()=>(this.startProfilerImplementation(this.postProfilerStartCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger).getResult()}stop(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew(ce,(()=>{let r;return void 0!==e&&e&&(r=this.postProfilerStopCallback),this.stopProfilerImplementation(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}constructor(e,r,s,t,o,i,a,n){super(e,r,s,o,i,a,n),this.timerJobScheduler=t,this.postProfilerStartCallback=e=>{this.timerJobScheduler.setTimerJob((()=>{e?this.stop(!0):this.start()}),e?1e4:0)},this.postProfilerStopCallback=()=>{this.start()}}}class je{createProfiler(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:null});return f.startNew(Y,(()=>{const r=new Profiler(e);return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class Qe{shouldProfilingStart(){return!!this.isDocumentVisibleNow()||this.shouldProfilerStartInAHiddenDocument}getShouldProcessProfileCapturedWhileUserIsIdle(){return this.shouldProcessProfileCapturedWhileUserIsIdle}isDocumentVisibleNow(){return this.documentVisibilityChecker.isDocumentVisibleNow()}constructor(e,r,s){this.documentVisibilityChecker=e,this.shouldProfilerStartInAHiddenDocument=r,this.shouldProcessProfileCapturedWhileUserIsIdle=s}}class Ke{extractCustomProperties(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:{}});return f.startNew("ExtractCustomProperties",(()=>{const r={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const s=e.getCustomProperties(void 0);null!=s?s.forEach(((e,s)=>{null==s?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():r[s]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}extractCustomPropertiesV2(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:{}});return f.startNew("ExtractCustomPropertiesV2",(()=>{const s={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const t=e.getCustomProperties(r);null!=t?t.forEach(((e,r)=>{null==r?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():s[r]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return P.generateOperationResult({didOperationSucceed:!0,result:s})}),s,this.logger).getResult()}constructor(e){this.logger=e}}class Ze{static buildProfiler(e,r,t,o,i,a){const n=P.generateOperationResult({didOperationSucceed:!1,result:new s(a)});return f.startNew("BuildProfilerInstance",(n=>{n.addProperty("ProfilerName",function(e,r){let s="";switch(e){case Te.Manual:s="ManualProfiler";break;case Te.Timed:s="TimedProfiler";break;case Te.Continuous:s="ContinuousProfiler";break;case Te.FullSession:s="FullSessionProfiler";break;default:r.logMissingProfilerNameForProfilerType(e),s="MissingProfilerName"}return s}(e,a)),n.addProperty("ProfilerInitOptions",{samplingIntervalInMs:r.samplingIntervalInMs,maximumNumberOfSamplesToTake:r.maximumNumberOfSamplesToTake,profilingIntervalInMs:r.profilingIntervalInMs,idleIntervalInMs:r.idleIntervalInMs});const l=w.getDocumentVisibilityChecker(),d=new Qe(l,null==i.shouldProfilingStartInAHiddenDocument?be:i.shouldProfilingStartInAHiddenDocument,null==i.shouldProcessProfileCapturedWhileUserIsIdle?_e:i.shouldProcessProfileCapturedWhileUserIsIdle),c=new je(a),g=E.getTimerJobScheduler(),u=q.getTimestampRetriever(),m=new Ke(a);let p,h=!1,T=!1,f=!1;const C=new Set;switch(C.add(fe.ProfilerStopped),e){case Te.Manual:{const e=new De(d,c,r,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;case Te.Timed:{const e=new Ve(d,c,r,g,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;case Te.Continuous:{const e=new He(d,c,r,g,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;case Te.FullSession:{const e=new Ge(d,c,r,g,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;default:a.logMissingProfilerImplementation(e),p=new s(a),h=!1,T=!0}void 0===p&&a.logNoProfilerInstanceBuilt(),void 0===p||f||a.logCreateProfilerDidNotSubscribeProfilerObserver();const S=void 0===p?new s(a):p;return P.generateOperationResult({didOperationSucceed:h,result:S,didOperationFailUnexpectedly:T})}),n,a).getResult()}}class Xe{createProfiler(e,r,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});return f.startNew("CreateProfiler",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const o=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);o.fixProfilerInitOptions(r);const i=o.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const a=Ze.buildProfiler(e,i,t,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,P.generateOperationResult({didOperationSucceed:!0,result:a})}),o,this.logger).getResult()}createProfilerV2(e,r,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});return f.startNew("CreateProfilerV2",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const o=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);o.fixProfilerInitOptions(r);const i=o.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const a=Ze.buildProfiler(e,i,t,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,P.generateOperationResult({didOperationSucceed:!0,result:a})}),o,this.logger).getResult()}constructor(e,r,s,t,o,i){this.validator=e,this.optionsValidatorFactory=r,this.profilerInitOptionsFixerFactory=s,this.profilerObserverFactory=t,this.packageInitOptions=o,this.logger=i,this.numberOfProfilersCreated=0}}class Ye{areValidationsSuccessful(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckProfilerFactoryValidations",(()=>this.isFeatureEnabled()?this.isSupportedEnvironmentForProfiling()?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilingIsNotSupportedEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logProfilingIsNotEnabled(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isFeatureEnabled(){return null==this.featureChecker?(this.logger.logFeatureCheckerIsNullOrUndefined(),!1):"isProfilingEnabled"in this.featureChecker?"function"!=typeof this.featureChecker.isProfilingEnabled?(this.logger.logFeatureCheckerIsProfilingEnabledNotAFunction(),!1):this.featureChecker.isProfilingEnabled():(this.logger.logMissingIsProfilingEnabledOnFeatureChecker(),!1)}isSupportedEnvironmentForProfiling(){return this.supportedEnvironmentChecker.isSupportedEnvironment()}constructor(e,r,s){this.featureChecker=e,this.supportedEnvironmentChecker=r,this.logger=s}}class er{isProfilingSupportedInJSEnvironment(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSupportedBrowser",(e=>{const r=this.userAgentRetriever.retrieveUserAgent();e.addProperty("UserAgent",r);const s=this.browserUtils.isBrowserChromiumBased(r);if(e.addProperty("isChromiumBasedBrowser",s),!s)return this.logger.logBrowserUserAgentNotChromiumBased(),P.generateOperationResult({didOperationSucceed:!0,result:!1});const t=this.browserUtils.parseChromeMajorVersionNumber(r);e.addProperty("ChromiumMajorVersionNumber",t);const o=t>=94;return e.addProperty("IsSupportedVersionOfChromiumBrowser",o),o?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logUnsupportedChromiumMajorVersionNumber(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))}),e,this.logger).getResult()}constructor(e,r,s){this.userAgentRetriever=e,this.browserUtils=r,this.logger=s}}class rr{isSupportedEnvironment(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSupportedEnvironment",(()=>this.isSupportedBrowser()?this.shouldSkipSupportedOSCheck||this.isSupportedOperatingSystem()?this.isJSSelfProfilingAPIAvailable()?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logJSSelfProfilingAPIUnavailable(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedOperatingSystem(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedBrowser(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isSupportedBrowser(){return this.supportedBrowserChecker.isProfilingSupportedInJSEnvironment()}isSupportedOperatingSystem(){return this.supportedOperatingSystemChecker.isSupportedOperatingSystem()}isJSSelfProfilingAPIAvailable(){return this.jsSelfProfilingAPIAvailabilityChecker.isJSSelfProfilingAPIAvailable()}constructor(e,r,s,t,o){this.supportedBrowserChecker=e,this.supportedOperatingSystemChecker=r,this.jsSelfProfilingAPIAvailabilityChecker=s,this.shouldSkipSupportedOSCheck=t,this.logger=o}}class sr{isSupportedOperatingSystem(){const e=P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:!1});return f.startNew("SupportedOperatingSystemCheck",(()=>{const e=this.isOperatingSystemWindows();return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e,this.logger).getResult()}isOperatingSystemWindows(){return this.userAgentRetriever.retrieveUserAgent().toLowerCase().includes("win")}constructor(e,r){this.userAgentRetriever=e,this.logger=r}}class tr{isJSSelfProfilingAPIAvailable(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckForJSSelfProfilingAPI",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):"Profiler"in window?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilerNotPresentInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}constructor(e){this.logger=e}}class or{isSupportedEnvironment(){return this.logger.logNullSupportedEnvironmentCheckerInvoked(),!1}constructor(e){this.logger=e}}class ir{static build(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:new or(r)});return f.startNew("BuildSupportedEnvironmentChecker",(()=>{const s=H.getUserAgentRetriever(),t=R.getBrowserUtils(),o=new er(s,t,r),i=new sr(s,r),a=new tr(r);return P.generateOperationResult({didOperationSucceed:!0,result:new rr(o,i,a,e,r)})}),s,r).getResult()}}class ar{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSamplingInterval",(r=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(r.addProperty("SamplingIntervalToValidate",e.samplingIntervalInMs),e.samplingIntervalInMs<=0?(this.logger.logSamplingIntervalIsLessThanOrEqualToZero(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):this.convertToMicroSeconds(e.samplingIntervalInMs)>2147483647?(this.logger.logSamplingIntervalAboveMaxSamplingInterval(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(e.samplingIntervalInMs<16&&this.logger.logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e.samplingIntervalInMs,16),P.generateOperationResult({didOperationSucceed:!0,result:!0})))),r,this.logger).getResult()}convertToMicroSeconds(e){return 1e3*e}constructor(e){this.logger=e}}class nr extends ar{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckMaxBufferSizeIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isMaxBufferSizeValidIfSpecified(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logMaxBufferValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logSamplingIntervalValidationCheckFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isMaxBufferSizeValidIfSpecified(e){return null==e.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotSpecified(),!0):!(e.maximumNumberOfSamplesToTake<=0&&(this.logger.logMaxBufferSizeLessThanOrEqualToZero(),1))}}class lr extends nr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckProfilingIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isProfilingIntervalValid(e)?this.isProfilingIntervalGreaterThanSamplingInterval(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):P.generateOperationResult({didOperationSucceed:!0,result:!1}):(this.logger.logProfilingIntervalValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logManualProfilerValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isProfilingIntervalValid(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<=0&&(this.logger.logProfilingIntervalLessThanOrEqualToZero(),1))}isProfilingIntervalGreaterThanSamplingInterval(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<e.samplingIntervalInMs&&(this.logger.logProfilingIntervalLessThanSamplingInterval(),1))}}class dr extends lr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckIdleIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isIdleIntervalInValid(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logIdleIntervalValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logTimedProfilerValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isIdleIntervalInValid(e){return null==e.idleIntervalInMs?(this.logger.logIdleIntervalIsNullOrUndefined(),!1):!(e.idleIntervalInMs<=0&&(this.logger.logIdleIntervalIsLessThanOrEqualToZero(),1))}}class cr{isValid(e){return this.logger.logNullJSCPUProfilerInitOptionsValidatorInvoked(),!1}constructor(e){this.logger=e}}class gr{retrieveValidator(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new cr(this.logger)});return f.startNew("RetrieveValidator",(r=>{switch(r.addProperty("ProfilerType",e),e){case Te.Manual:return P.generateOperationResult({didOperationSucceed:!0,result:new nr(this.logger)});case Te.Timed:return P.generateOperationResult({didOperationSucceed:!0,result:new lr(this.logger)});case Te.Continuous:return P.generateOperationResult({didOperationSucceed:!0,result:new dr(this.logger)});case Te.FullSession:return P.generateOperationResult({didOperationSucceed:!0,result:new ar(this.logger)});default:return r.addLog("Missing validator implementation for profiler type"),P.generateOperationResult({didOperationSucceed:!1,result:new ar(this.logger),didOperationFailUnexpectedly:!0})}}),r,this.logger).getResult()}constructor(e){this.logger=e}}class ur{fixProfilerInitOptions(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FixMaxBufferSize",(()=>null==e?(this.logger.logNullOrUndefinedProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(this.fixedProfilerInitOptions=e,null==this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake&&(this.logger.logMaxBufferSizeFixedToDefaultSize(),this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake=2e5),this.didProfilerInitOptionsGetFixed=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}retrieveFixedProfilerInitOptions(){return this.didProfilerInitOptionsGetFixed?this.didProfilerInitOptionsGetFixed=!1:this.logger.logMaxBufferSizeWasNotFixedBeforeRetrieval(),this.fixedProfilerInitOptions}constructor(e){this.logger=e,this.didProfilerInitOptionsGetFixed=!1,this.fixedProfilerInitOptions=void 0}}class mr{fixProfilerInitOptions(e){this.logger.logLoopBackFixerFixProfilerInitOptionsInvoked(),null!=e&&(this.profilerInitOptionsToLoopBack=e)}retrieveFixedProfilerInitOptions(){return this.logger.logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(),this.profilerInitOptionsToLoopBack}constructor(e){this.logger=e,this.profilerInitOptionsToLoopBack=void 0}}class pr{getFixerForProfilerType(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new mr(this.logger)});return f.startNew("GetFixerForProfileType",(()=>{this.logger.logFixerForProfilerType(e);let r=new mr(this.logger),s=!1;switch(e){case Te.Manual:case Te.Timed:case Te.Continuous:case Te.FullSession:s=!0,r=new ur(this.logger);break;default:this.logger.logMissingProfilerInitOptionsFixerImplementation()}return P.generateOperationResult({didOperationSucceed:s,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class hr{createProfiler(e,r,t){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new s(this.logger)}createProfilerV2(e,r,t){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new s(this.logger)}constructor(e){this.logger=e}}class Tr{filterFrames(){}retrieveFrameFilteredCallTree(){return new Pr}}class fr{getNext(){}hasMore(){return!1}}class Pr{getReconstructibleTreeIterator(){return new fr}getDepthFirstIterator(){return new fr}getNodesToMergeIterator(){return new fr}getRightMostNodesIterator(){return new fr}getStartTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getCustomProperties(){return{}}getTreeId(){return Fe}getFramesFilterer(e){return new Tr}}class Cr{transform(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(le,(r=>{this.profilerTrace=e,this.traceToCallTreesConverter.buildCallTrees(this.profilerTrace);const s=this.traceToCallTreesConverter.retrieveBuiltCallTrees();r.addProperty("BuiltCallTreesCount",s.length);const t=s.filter((e=>!(e instanceof Pr))).length;r.addProperty("NonEmptyCallTreesCount",t),this.callTreesMerger.mergeCallTrees(s);const o=this.callTreesMerger.retrieveMergedCallTrees();r.addProperty("MergedCallTreesCount",o.length),this.callTreesFilterer.filterCallTrees(o,this.callTreeFilteringThresholdInMs);const i=this.callTreesFilterer.retrieveFilteredCallTrees();return r.addProperty("FilteredCallTreesCount",i.length),this.callTreesToReturn=i,this.callTreesFramesFilterer.filterCallTrees(i,this.frameTotalExecutionTimeFilteringThresholdInMs),r.addProperty("FrameFilteredCallTreesCount",this.callTreesToReturn.length),this.transformCalledBeforeRetrieveCallTrees=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveCallTrees",(()=>this.transformCalledBeforeRetrieveCallTrees?(this.transformCalledBeforeRetrieveCallTrees=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTreesToReturn})):(this.logger.logRetrieveCallTreesCalledBeforeTransform(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,s,t,o,i,a){this.traceToCallTreesConverter=e,this.callTreesMerger=r,this.callTreesFilterer=s,this.callTreeFilteringThresholdInMs=t,this.callTreesFramesFilterer=o,this.frameTotalExecutionTimeFilteringThresholdInMs=i,this.logger=a,this.transformCalledBeforeRetrieveCallTrees=!1,this.profilerTrace=void 0,this.callTreesToReturn=[]}}class Sr{buildCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildCallTrees",(()=>{this.didBuildCallTreesGetCalledBeforeRetrieve=!0,this.stacksBuilder.buildStacks(e);const r=this.stacksBuilder.retrieveStacks(),s=e.getCustomProperties();return this.stacksToCallTreesConverter.convertStacksToCallTrees(s,r),this.callTrees=this.stacksToCallTreesConverter.retrieveConvertedCallTrees(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveBuiltCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveBuiltCallTrees",(()=>this.didBuildCallTreesGetCalledBeforeRetrieve?(this.didBuildCallTreesGetCalledBeforeRetrieve=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logRetrieveBuiltCallTreesBeforeBuildCallTrees(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,s){this.stacksBuilder=e,this.stacksToCallTreesConverter=r,this.logger=s,this.didBuildCallTreesGetCalledBeforeRetrieve=!1,this.callTrees=[]}}class Ir{peek(){}pop(){}}class vr{peek(){const e=this.profilerFrames.length;if(0!==e)return this.profilerFrames[e-1]}pop(){this.profilerFrames.pop()}push(e){this.profilerFrames.push(e)}constructor(){this.profilerFrames=[]}}class kr{addChildNode(e){this.childrenNodes.push(e),e.setParentNode(this)}getFrameOnlyExecutionTimeInMs(){const e=this.getSubTreeExecutionTimeInMs();return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime-e:this.trimTimeStamp(this.totalExecutionTime-e)}getSubTreeExecutionTimeInMs(){let e=0;return this.childrenNodes.forEach((r=>{e+=r.getTotalExecutionTimeInMs()})),e<0&&this.logger.logNegativeSubTreeExecutionTime(),e}getTotalExecutionTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime:this.trimTimeStamp(this.totalExecutionTime)}getFrame(){return this.profilerFrame}getChildrenNodes(){return this.childrenNodes}removeChildNode(e){e.setParentNode(void 0),this.childrenNodes=this.childrenNodes.filter((r=>r!==e))}getStartTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.startTime:this.trimTimeStamp(this.startTime)}getLastObservedTimestamp(){return this.shouldRecordExpandedTimeStamps?this.lastObservedTimestamp:this.trimTimeStamp(this.lastObservedTimestamp)}getResourceName(){return this.resourceName}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){e<0&&this.logger.logInvalidNewFrameNodeExecutionTime(),this.totalExecutionTime=e}setLastObservedTimestamp(e){this.lastObservedTimestamp=e}trimTimeStamp(e){return Number.parseFloat(e.toFixed(2))}getCount(){return this.count}getFrameOnlyCount(){if(void 0===this.count)return;const e=this.childrenNodes.reduce(((e,r)=>e+r.getCount()),0);return this.count-e}addCount(e){this.recordFrameCount&&void 0!==e&&(this.count+=e)}constructor(e,r,s,t,o,i,a,n,l){this.profilerFrame=e,this.startTime=r,this.totalExecutionTime=s,this.lastObservedTimestamp=t,this.resourceName=o,this.shouldRecordExpandedTimeStamps=i,this.parentNode=a,this.recordFrameCount=n,this.logger=l,this.childrenNodes=[],r<0&&this.logger.logInvalidFrameNodeStartTime(),s<0&&this.logger.logInvalidFrameNodeExecutionTime(),this.recordFrameCount&&(this.count=1)}}class br{peek(){this.logger.logPeekOnNullExecutionStackInvoked()}pop(){this.logger.logPopOnNullExecutionStackInvoked()}constructor(e){this.logger=e}}class Or{buildStack(e){return this.buildStackNewImplementation(e)}retrieveStack(){const e=P.generateOperationResult({didOperationSucceed:!1,result:new br(this.logger)});return f.startNew("RetrieveStack",(()=>this.buildStackCalled?void 0===this.builtStack?(this.logger.logExecutionStackNeverBuilt(),P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:new br(this.logger)})):(this.buildStackCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.builtStack})):(this.logger.logRetrieveStackCalledBeforeBuildStack(),P.generateOperationResult({didOperationSucceed:!1,result:new br(this.logger)}))),e,this.logger,!0).getResult()}constructExecutionStackFrames(e,r,s){let t=e.stackId,o=0;const i=this.initializeStack(e,r,s);for(;o<=r.length;){const e=r[t],a=s[e.frameId];if(i.unshift(a),null==e.parentId)return i;o+=1,t=e.parentId}this.logger.logForciblyExitingLoopWhileBuildingStack()}constructExecutionStack(e,r,s){const t=this.constructExecutionStackFrames(e,r,s);if(void 0===t)return;const o=new vr,i=e.timestamp,a=i,n=this.profilerTrace.getResources();return t.forEach((e=>{const r=new kr(e,i,0,a,n[e.resourceId],this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);o.push(r)})),o}initializeStack(e,r,s){if(!this.shouldExpandMarkers||!Boolean(e.marker))return[];const t=s[r[e.stackId].frameId];return[{name:t.name,resourceId:t.resourceId,line:t.line,column:t.column,marker:e.marker}]}handleEmptyStack(e,r){if(!this.shouldExpandMarkers||!Boolean(e.marker)){this.builtStack=new Ir;const e="EmptyStackBuilt";return r.addProperty(e,!0),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}const s=new vr,t={name:"",resourceId:-1,line:-1,column:-1,marker:e.marker},o=new kr(t,e.timestamp,0,e.timestamp,"",this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);return s.push(o),this.builtStack=s,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}buildStackNewImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildStack",(r=>{if(this.buildStackCalled=!0,null==e.stackId)return this.handleEmptyStack(e,r);const s=this.profilerTrace.getStacks();if(0===s.length)return this.logger.logEmptyStacks(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=this.profilerTrace.getFrames();if(0===t.length)return this.logger.logEmptyFrames(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const o=this.constructExecutionStack(e,s,t);return void 0===o?P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:void 0}):(this.builtStack=o,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.logger,!0)}constructor(e,r,s,t,o){this.profilerTrace=e,this.logger=r,this.shouldRecordExpandedTimeStamps=s,this.shouldRecordFrameCounts=t,this.shouldExpandMarkers=o,this.buildStackCalled=!1,this.builtStack=void 0}}class Wr{buildStacks(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildStacks",(()=>{this.buildStacksCalled=!0;const r=e.getSamples();let s=this.sampleSorter.sortSamples(r);const t=e.getProfilerProperties().profilingIntervalInMs;return null==t||this.shouldKeepSamplesOutsideOfProfilingInterval||(this.sampleFilterer.filterSamples(s,t),s=this.sampleFilterer.retrieveFilteredSamples()),this.builtExecutionStacks=this.samplesToStacks(s,e),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveStacks(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveStacks",(()=>this.buildStacksCalled?void 0===this.builtExecutionStacks?P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:[]}):(this.buildStacksCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.builtExecutionStacks})):(this.logger.logRetrieveStacksCalledBeforeBuildStacks(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}samplesToStacks(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ConvertSamplesToStacks",(()=>{const s=[],t=new Or(r,this.logger,this.shouldRecordExpandedTimeStamps,this.shouldRecordFrameCounts,this.shouldExpandMarkers);return e.forEach((e=>{t.buildStack(e),s.push(t.retrieveStack())})),P.generateOperationResult({didOperationSucceed:!0,result:s})}),s,this.logger).getResult()}constructor(e,r,s,t,o,i,a){this.sampleSorter=e,this.sampleFilterer=r,this.shouldKeepSamplesOutsideOfProfilingInterval=s,this.shouldRecordExpandedTimeStamps=t,this.logger=o,this.shouldRecordFrameCounts=i,this.shouldExpandMarkers=a,this.buildStacksCalled=!1,this.builtExecutionStacks=void 0}}class Mr{sortSamples(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("SortSamples",(()=>{const r=e.sort(this.sortSampleByTimestamp);return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e,this.sortSampleByTimestamp=(e,r)=>{const s=P.generateOperationResult({didOperationSucceed:!1,result:0});return f.startNew("CustomSampleSort",(()=>e.timestamp>r.timestamp?P.generateOperationResult({didOperationSucceed:!0,result:1}):r.timestamp>e.timestamp?P.generateOperationResult({didOperationSucceed:!0,result:-1}):P.generateOperationResult({didOperationSucceed:!0,result:0})),s,this.logger,!0).getResult()}}}class yr{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getFrame(){return Ie}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return ke}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(e){this.logger=e,this.logger.logNullFrameNodeCreated()}}class Rr{getNext(){return this.logger.logNullCallTreeIteratorImplGetNextInvoked(),new yr(this.logger)}hasMore(){return this.logger.logNullCallTreeIteratorImplHasMoreInvoked(),!1}constructor(e){this.logger=e}}class Nr{filterFrames(){this.logger.logNullCallTreeFramesFiltererFilterFramesInvoked()}retrieveFrameFilteredCallTree(){return this.logger.logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(),new xr(this.logger)}constructor(e){this.logger=e}}class xr{getReconstructibleTreeIterator(){return this.logger.logNullCallTreeGetReconstructableTreeIteratorInvoked(),new Rr(this.logger)}getDepthFirstIterator(){return this.logger.logNullCallTreeDepthFirstIteratorInvoked(),new Rr(this.logger)}getNodesToMergeIterator(){return this.logger.logNullCallTreeLeftMostNodesIteratorInvoked(),new Rr(this.logger)}getRightMostNodesIterator(){return this.logger.logNullCallTreeRightMostNodesIteratorInvoked(),new Rr(this.logger)}getStartTimeInMs(){return-1}getTotalExecutionTimeInMs(){return this.logger.logNullCallTreeGetTotalExecutionTimeInvoked(),-1}getCustomProperties(){return this.logger.logNullCallTreeGetCustomPropertiesInvoked(),{}}getTreeId(){return Fe}getFramesFilterer(){return this.logger.logNullCallTreeGetFramesFiltererInvoked(),new Nr(this.logger)}constructor(e){this.logger=e}}function Fr(e,r){return e.name===r.name&&e.resourceId===r.resourceId&&e.line===r.line&&e.column===r.column&&e.marker===r.marker}class Er{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return 0}getFrame(){return Ie}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return ke}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(){}}class _r{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();for(let e=r.length-1;e>=0;e-=1)Fr(r[e].getFrame(),Ie)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=j.createStack(),e instanceof Er||this.nodesToIterate.push(e)}}class wr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>1&&this.logger.logExpectedOnlyOneNodePerLevelInCallTree(),this.nodesToIterate.queue(r[0]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e,r){this.logger=r,this.nodesToIterate=D.createQueue(),this.nodesToIterate.queue(e)}}class Ur{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>0&&this.nodesToIterate.queue(r[r.length-1]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e){this.nodesToIterate=D.createQueue(),this.nodesToIterate.queue(e)}}class Lr{filterFrames(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTreeFrames",(()=>{const r=this.callTree.getDepthFirstIterator();let s;for(;r.hasMore();)s=r.getNext(),void 0!==s&&this.filterFrame(s,e);return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}filterFrame(e,r){if(e.getTotalExecutionTimeInMs()<=r){const r=e.getParentNode();if(!r)return void this.logger.logFilterFrameWithNoParent();r.removeChildNode(e)}}constructor(e,r){this.callTree=e,this.logger=r}}class Br{addChildNode(e){}getFrame(){return ve}getChildrenNodes(){return[]}removeChildNode(e){}getResourceName(){return ke}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}}class Ar{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();r.length>0&&this.nodesToIterate.push(new Br);for(let e=r.length-1;e>=0;e-=1)Fr(r[e].getFrame(),Ie)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=j.createStack(),e instanceof Er||this.nodesToIterate.push(e)}}class zr{getReconstructibleTreeIterator(){return f.startNew("GetReconstructibleTreeIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new Ar(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getDepthFirstIterator(){return f.startNew("GetDepthFirstIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new _r(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getNodesToMergeIterator(){return f.startNew("GetCallTreeLeftMostNodesIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new wr(this.rootNode,this.logger)})),this.fallbackResult,this.logger,!0).getResult()}getRightMostNodesIterator(){return f.startNew("GetCallTreeRightMostNodesIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new Ur(this.rootNode)})),this.fallbackResult,this.logger,!0).getResult()}getStartTimeInMs(){return this.rootNode.getStartTimeInMs()}getTotalExecutionTimeInMs(){return this.rootNode.getTotalExecutionTimeInMs()}getCustomProperties(){return this.customProperties}getTreeId(){return this.callTreeId}getFramesFilterer(){return new Lr(this,this.logger)}constructor(e,r,s,t){this.rootNode=e,this.customProperties=r,this.callTreeId=s,this.logger=t,this.fallbackResult=P.generateOperationResult({didOperationSucceed:!1,result:new Rr(this.logger)})}}class $r{convertStackToCallTree(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertStackToCallTree",(()=>(this.convertedCallTree=this.buildCallTree(e,r),this.isConvertCalled=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger,!0)}retrieveCallTree(){const e=P.generateOperationResult({didOperationSucceed:!1,result:new xr(this.logger)});return f.startNew("RetrieveCallTree",(()=>this.isConvertCalled?(this.isConvertCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.convertedCallTree})):(this.logger.logConvertStackToCallTreeNeverCalled(),P.generateOperationResult({didOperationSucceed:!1,result:new xr(this.logger)}))),e,this.logger,!0).getResult()}buildCallTree(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:new xr(this.logger)});return f.startNew("BuildCallTree",(s=>{const t=[];for(;;){const r=e.peek();if(void 0===r)break;t.unshift(r),e.pop()}if(0===t.length)return s.addLog("No profiler frames were extracted. Returning null call tree"),P.generateOperationResult({didOperationSucceed:!0,result:new Pr});let o=0;t.forEach(((e,r)=>{if(o=r+1,o===t.length)return;const s=t[o];e.addChildNode(s)}));const i=t[0],a=Z.getGuidGenerator().generateGuid();return P.generateOperationResult({didOperationSucceed:!0,result:new zr(i,r,a,this.logger)})}),s,this.logger,!0).getResult()}constructor(e){this.logger=e,this.isConvertCalled=!1,this.convertedCallTree=new xr(this.logger)}}class qr{convertStacksToCallTrees(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertStacksToCallTrees",(()=>(this.convertStacksCalled=!0,this.customProperties=e,this.callTrees=this.convertToCallTrees(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger)}retrieveConvertedCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveConvertedCallTrees",(()=>this.convertStacksCalled?(this.convertStacksCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logConvertStacksToCallTreesNeverCalled(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}convertToCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ConvertToCallTrees",(()=>{const r=[],s=new $r(this.logger);return e.forEach((e=>{s.convertStackToCallTree(e,this.isEventBasedPropertyBagMergingEnabled?{...this.customProperties}:this.customProperties),r.push(s.retrieveCallTree())})),P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e,r){this.logger=e,this.isEventBasedPropertyBagMergingEnabled=r,this.convertStacksCalled=!1,this.callTrees=[],this.customProperties={}}}function Jr(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:{wasMergeSuccessful:!1,mergedCallTree:e}});return f.startNew("MergeTwoTrees",(s=>{const t=e.getRightMostNodesIterator(),o=r.getNodesToMergeIterator();if(!t.hasMore()||!o.hasMore()){const r="CurrentCallTreeIteratorEmptyProperty";s.addProperty(r,!t.hasMore());const i="CallTreeToMergeIteratorEmptyProperty";return s.addProperty(i,!o.hasMore()),P.generateOperationResult({didOperationSucceed:!0,result:{mergedCallTree:e,wasMergeSuccessful:!1}})}let i,a,n,l=0,d=!0;for(;t.hasMore()&&o.hasMore();){if(i=t.getNext(),a=o.getNext(),void 0===i||void 0===a||!Fr(i.getFrame(),a.getFrame())){d=!1;break}{const e=i.getTotalExecutionTimeInMs()+(a.getLastObservedTimestamp()-i.getLastObservedTimestamp());i.setTotalExecutionTime(e),i.setLastObservedTimestamp(a.getLastObservedTimestamp()),i.addCount(a.getCount()),n=i,l+=1}}if(s.addProperty("MergeLength",l),0===l){const r="UnableToMerge";return s.addProperty(r,!0),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!1,mergedCallTree:e}})}if(void 0===i&&void 0===a){const r="FullMerge";return s.addProperty(r,!0),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}if(t.hasMore()&&!o.hasMore()&&void 0!==n){const r="TallerLeftCallTree";return s.addProperty(r,!0),n.addChildNode(new Er),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}const c=void 0!==i&&void 0!==a&&!Fr(i.getFrame(),a.getFrame())&&void 0!==n,g=!t.hasMore()&&o.hasMore()&&void 0!==n;if(c||g){if(c){const e="PartialMergeOfHeightBalancedCallTrees";s.addProperty(e,!0)}if(g){const e="TallerRightCallTreeMerge";s.addProperty(e,!0),d&&(a=o.getNext())}void 0!==n&&void 0!==a&&n.addChildNode(a)}return P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:l>0,mergedCallTree:e}})}),t,s,!0).getResult()}class Dr{mergeCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("MergeCallTrees",(()=>{if(e.length<2)return this.mergedCallTrees=e,P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.didMergeCallTreesGetCalled=!0,this.mergedCallTrees=[];let r=0,s=1,t=!1;for(;s<e.length;){const o=e[r];t=Jr(o,e[s],this.logger).wasMergeSuccessful,t||(this.mergedCallTrees.push(o),r=s),s+=1}return t?this.mergedCallTrees.push(e[r]):this.mergedCallTrees.push(e[s-1]),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveMergedCallTrees(){return this.didMergeCallTreesGetCalled?(this.didMergeCallTreesGetCalled=!1,this.mergedCallTrees):[]}constructor(e){this.logger=e,this.mergedCallTrees=[],this.didMergeCallTreesGetCalled=!1}}class Vr{filterCallTrees(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTrees",(s=>(this.filterCallTreesCalled=!0,this.filteredCallTreesToReturn=[],s.addProperty("FilteringThresholdInMs",r),s.addProperty("NumberOfCallTreesPresent",e.length),e.forEach((e=>{e.getTotalExecutionTimeInMs()>r&&this.filteredCallTreesToReturn.push(e)})),s.addProperty("NumberOfCallTreesFiltered",this.filteredCallTreesToReturn.length),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger).getResult()}retrieveFilteredCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveFilteredCallTrees",(()=>this.filterCallTreesCalled?(this.filterCallTreesCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.filteredCallTreesToReturn})):P.generateOperationResult({didOperationSucceed:!1,result:[]})),e,this.logger).getResult()}constructor(e){this.logger=e,this.filteredCallTreesToReturn=[],this.filterCallTreesCalled=!1}}class Hr{filterSamples(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FilterSamples",(()=>{if(this.didFilterSamplesGetCalled=!0,this.filteredSamples=[],0===e.length)return this.logger.logEmptySamplesArrayPassedToFilter(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=e[0];for(const t of e){if(t.timestamp-s.timestamp>r)break;this.filteredSamples.push(t)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),s,this.logger)}retrieveFilteredSamples(){return this.didFilterSamplesGetCalled?(this.didFilterSamplesGetCalled=!1,this.filteredSamples):[]}constructor(e){this.logger=e,this.didFilterSamplesGetCalled=!1,this.filteredSamples=[]}}class Gr{serializeCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SeriallizeCallTree",(()=>{this.serializeCallTreeWithPropertyBagAsPriority?this.serializedCallTree={totalExecutionTimeForTreeInMs:0,propertyBag:{},serializedFrames:[]}:this.serializedCallTree={serializedFrames:[],totalExecutionTimeForTreeInMs:0,propertyBag:{}};const r=this.shouldMakeSerializedCallTreesFullyReconstructible?e.getReconstructibleTreeIterator():e.getDepthFirstIterator();let s;for(;r.hasMore();)s=r.getNext(),void 0!==s&&this.serializedCallTree.serializedFrames.push(this.onVisit(s));return this.serializedCallTree.totalExecutionTimeForTreeInMs=e.getTotalExecutionTimeInMs(),this.serializedCallTree.propertyBag=e.getCustomProperties(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}onVisit(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:Me});return f.startNew("VisitNodeInCallTree",(()=>{const r={obfuscatedName:e.getFrame().name??"",startTimeInMs:e.getStartTimeInMs(),frameOnlyRunTimeInMs:e.getFrameOnlyExecutionTimeInMs(),subTreeRunTimeInMs:e.getSubTreeExecutionTimeInMs(),totalExecutionTimeInMs:e.getTotalExecutionTimeInMs(),hasChildrenNodes:e.getChildrenNodes().length>0,resourceInfo:{resourceName:this.shouldCompressSerializedCallTrees?this.resourceUrlKeyRetriever(e.getResourceName()):e.getResourceName(),lineNo:e.getFrame().line,columnNo:e.getFrame().column},frameOnlyCount:e.getFrameOnlyCount(),totalCount:e.getCount(),marker:e.getFrame().marker};return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger,!1).getResult()}retrieveSerializedTree(){return this.serializedCallTree}constructor(e,r,s,t,o){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.resourceUrlKeyRetriever=s,this.logger=t,this.serializeCallTreeWithPropertyBagAsPriority=o,this.serializedCallTree=void 0}}class jr{serializeCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ue,(()=>{const r=new Gr(this.shouldMakeSerializedCallTreesFullyReconstructible,this.shouldCompressSerializedCallTrees,this.resourceUrlKeyRetriever.bind(this),this.logger,this.serializeCallTreeWithPropertyBagAsPriority),s=e.map((e=>(r.serializeCallTree(e),r.retrieveSerializedTree())));return this.serializationResult={serializedCallTrees:s,resourceUrlsCompressionDictionary:Array.from(this.resourceUrlsCompressionDictionary,(([e,r])=>({url:e,index:r})))},P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveSerializedTrees(){return this.serializationResult}resourceUrlKeyRetriever(e){if(this.resourceUrlsCompressionDictionary.has(e))return this.resourceUrlsCompressionDictionary.get(e);const r=this.resourceUrlKeyIndex.toString();return this.resourceUrlsCompressionDictionary.set(e,r),this.resourceUrlKeyIndex++,r}constructor(e,r,s,t){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.logger=s,this.serializeCallTreeWithPropertyBagAsPriority=t,this.resourceUrlKeyIndex=0,this.resourceUrlsCompressionDictionary=new Map,this.serializationResult={serializedCallTrees:[],resourceUrlsCompressionDictionary:[]}}}class Qr{processTrace(e){this.profilerTraceTransformer.transform(e);let r=this.profilerTraceTransformer.retrieveCallTrees();this.traceRequestingEventDrivenCallTreeHandler&&(this.traceRequestingEventDrivenCallTreeHandler.filterCallTreesByTraceRequestingEvents(r),this.traceRequestingEventDrivenCallTreeHandler.mergePropertyBagToEventBasedFilteredCallTrees(),r=this.traceRequestingEventDrivenCallTreeHandler.retrieveFilteredCallTrees()),this.serializer.serializeCallTrees(r),this.serializedCallTrees=this.serializer.retrieveSerializedTrees()}retrieveSerializedCallTrees(){return this.serializedCallTrees}constructor(e,r,s){this.profilerTraceTransformer=e,this.serializer=r,this.traceRequestingEventDrivenCallTreeHandler=s,this.serializedCallTrees={resourceUrlsCompressionDictionary:[],serializedCallTrees:[]}}}class Kr{isWebWorkerAPIAvailable(){return!!this.windowPropertyChecker.hasProperty("Worker")}constructor(e){this.windowPropertyChecker=e}}class Zr{filterCallTrees(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTreesFrames",(()=>(e.forEach((e=>{e.getFramesFilterer(r).filterFrames(r)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger).getResult()}constructor(e){this.logger=e}}class Xr{getCustomProperties(){return this.logger.logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(),{}}getResources(){return this.logger.logGetResourcesCalledOnNullJSCPUProfilerTrace(),[]}getFrames(){return this.logger.logGetFramesCalledOnNullJSCPUProfilerTrace(),[]}getStacks(){return this.logger.logGetStacksCalledOnNullJSCPUProfilerTrace(),[]}getSamples(){return this.logger.logGetSamplesCalledOnNullJSCPUProfilerTrace(),[]}getSamplesTrimmed(){return[]}getProfilerTraceStartTimestamp(){return this.logger.logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(),-1}getProfilerProperties(){return this.logger.logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(),Se}getElapsedProfilingTimeInMs(){return this.logger.logElapsedProfilingTimeMissingInTrace(),-1}constructor(e){this.logger=e}}class Yr{removeQueryParamsFromResourceURLs(e){this.wasRemoveQueryParamsFromResourceURLsCalled=!0;const r=e.getResources(),s=[];r.forEach((e=>{this.urlQueryParamsRemover.removeQueryParams(e),s.push(this.urlQueryParamsRemover.retrieveQueryParamsRemovedURL())})),this.outputProfilerTrace=new Ce(e.getCustomProperties(),{samples:e.getSamples(),frames:e.getFrames(),resources:s,stacks:e.getStacks()},e.getProfilerTraceStartTimestamp(),e.getProfilerProperties(),e.getElapsedProfilingTimeInMs())}retrieveQueryParamsRemovedProfile(){return this.wasRemoveQueryParamsFromResourceURLsCalled?(this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace):(this.logger.logRemoveQueryParamsFromResourceURLsNeverCalled(),new Xr(this.logger))}constructor(e,r){this.urlQueryParamsRemover=e,this.logger=r,this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace=new Xr(r)}}class es{mergeCustomProperties(e){const r={};return e.forEach((e=>{for(const[s,t]of Object.entries(e))r[s]=t})),r}}var rs,ss,ts,os,is;!function(e){e[e.ProcessTrace=0]="ProcessTrace",e[e.CompressSerializedCallTree=1]="CompressSerializedCallTree"}(rs||(rs={}));class as{onProfilerEvent(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("OnProfilerEvent",(r=>null==e?(this.params.logger.logNullOrUndefinedProfilerEvent(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(r.addProperty("ProfilerEventId",e.eventId),e.eventId===fe.ProfilerStopped?null==e.eventData?this.params.logger.logNullOrUndefinedProfilerTrace():this.onProfilerStopped(e.eventData):this.params.logger.logUnknownProfilerEventId(e.eventId),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.params.logger)}onProfilerStopped(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("OnProfilerStopped",(()=>{const r=e.profilerTrace.getProfilerProperties().profilingIntervalInMs;if(null!=r&&this.params.documentVisibilityChecker.wasDocumentHiddenDuringTimeRange(r)&&!this.params.shouldProcessProfileCapturedInAHiddenDocument)return this.params.logger.logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});if(!this.params.shouldProcessProfileCapturedWhileUserIsIdle&&e.documentEventsCountBeforeProfiling&&X()===e.documentEventsCountBeforeProfiling)return this.params.logger.logNotProcessingCapturedTraceDueToUserBeingIdle(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.params.shouldKeepQueryParamsInResourceURLs||(this.params.profileResourceURLsQueryParamsRemover.removeQueryParamsFromResourceURLs(e.profilerTrace),e.profilerTrace=this.params.profileResourceURLsQueryParamsRemover.retrieveQueryParamsRemovedProfile()),this.params.shouldLogRawProfilerTrace&&this.params.logger.logProfilerTrace(e.profilerTrace,this.params.profilerTraceLoggingChunkSize);const s=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestBodyPropertiesRetriever),t=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestQueryParamsRetriever);return this.params.shouldAllowForConditionalProfileProcessingAndSending?(e.traceRequestingEvents&&e.traceRequestingEvents.length>0&&this.traceRequestingEvents.push(...e.traceRequestingEvents),this.storedProfiles.push({onProfilerStoppedEventData:e,deObfuscationRequestBodyProperties:s,deObfuscationRequestQueryParams:t}),this.traceRequestingEvents.length>0&&this.processStoredProfilerTraces(),this.removeExpiredProfiles(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})):(this.processProfilerTraces(e,s,t),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.params.logger)}processProfilerTraces(e,r,s){this.params.shouldProcessProfileInMainEventLoop?this.useMainEventLoopForProfilerTraceProcessing(e,r,s):this.useWebWorkForProfilerTraceProcessing(e,r,s)}processStoredProfilerTraces(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProcessStoredProfilerTraces",(()=>(this.storedProfiles.forEach((e=>{if(!e)return;const r=e.onProfilerStoppedEventData.profilerTrace,s=r.getProfilerTraceStartTimestamp(),t=s+r.getElapsedProfilingTimeInMs();this.isAnyTraceRequestingEventInTraceRange(s,t)&&this.processProfilerTraces(e.onProfilerStoppedEventData,e.deObfuscationRequestBodyProperties,e.deObfuscationRequestQueryParams)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.params.logger)}isAnyTraceRequestingEventInTraceRange(e,r){return this.traceRequestingEvents.some((s=>s.eventStartTime>=e&&s.eventStartTime<=r||s.eventEndTime>=e&&s.eventEndTime<=r))}removeExpiredProfiles(){const e=performance.now();for(;this.storedProfiles.length>0&&this.isProfileExpired(this.storedProfiles[0],e);)this.storedProfiles.shift()}isProfileExpired(e,r){return r-e.onProfilerStoppedEventData.profilerTrace.getProfilerTraceStartTimestamp()>this.params.storedProfilesRetentionPeriodInMs}useMainEventLoopForProfilerTraceProcessing(e,r,s){this.params.shouldSendProfilesForDeobfuscationImmediately?this.processAndSendTrace(e,r,s):this.params.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{this.processAndSendTrace(e,r,s)}))}extractAndMergeCallTreeCustomProperties(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ExtractAndMergeCallTreeCustomProperties",(()=>{const s=new Ke(this.params.logger),t=new es;return e.forEach((e=>{const o=[];r.forEach((r=>{o.push(s.extractCustomPropertiesV2(r,e.serializedFrames[0]))})),o.push(e.propertyBag);const i=t.mergeCustomProperties(o);e.propertyBag=i})),P.generateOperationResult({didOperationSucceed:!0,result:e})}),s,this.params.logger).getResult()}applyCallTreeCustomFiltering(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ApplyCallTreeCustomFilterers",(()=>{let s=e;r.forEach((e=>{s=s.filter((r=>e.filter(r)))}));const t=e.length-s.length;return this.params.logger.logNumberOfCallTreesFiltererByCustomFilterers(t,e.length),P.generateOperationResult({didOperationSucceed:!0,result:s})}),s,this.params.logger).getResult()}useWebWorkForProfilerTraceProcessing(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(pe,(()=>{if(!this.params.webWorkerAPIAvailabilityChecker.isWebWorkerAPIAvailable())return this.params.logger.logWebWorkerAPINotAvailable(),this.useMainEventLoopForProfilerTraceProcessing(e,r,s),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(this.profilerTraceProcessingWorker||(this.profilerTraceProcessingWorker=this.params.profilerTraceProcessingWorkerFactory.getProfilerTraceProcessingWorker()),!this.profilerTraceProcessingWorker.startWorker())return this.useMainEventLoopForProfilerTraceProcessing(e,r,s),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t={traceProcessingInfo:{trace:e.profilerTrace,shouldKeepSamplesOutsideOfProfilingInterval:this.params.shouldKeepSamplesOutsideOfProfilingInterval,shouldRecordExpandedTimeStamps:this.params.shouldRecordExpandedTimeStamps,callTreeFilteringThresholdInMs:this.params.callTreeFilteringThresholdInMs,frameTotalExecutionTimeFilteringThresholdInMs:this.params.frameTotalExecutionTimeFilteringThresholdInMs,operationLogMessageFilteringCriteria:this.params.operationLogMessageFilteringCriteria,traceId:this.profilerTraceIdNumber,shouldMakeSerializedCallTreesFullyReconstructible:this.params.shouldMakeSerializedCallTreesFullyReconstructible,serializeCallTreeWithPropertyBagAsPriority:this.params.serializeCallTreeWithPropertyBagAsPriority,shouldRecordFrameCounts:this.params.shouldRecordFrameCounts,shouldCompressSerializedCallTrees:this.params.shouldCompressSerializedCallTrees,shouldAllowForConditionalProfileProcessingAndSending:this.params.shouldAllowForConditionalProfileProcessingAndSending,isEventBasedPropertyBagAdditionEnabled:this.params.isEventBasedPropertyBagAdditionEnabled,shouldExpandMarkers:this.params.shouldExpandMarkers,traceRequestingEvents:this.traceRequestingEvents},traceProcessingCompletionCallback:this.webWorkerOnCompleteCallback,traceProcessingErrorCallback:this.webWorkerOnErrorCallback,callTreeCustomPropertiesRetrievers:e.callTreeCustomPropertiesRetrievers,callTreeCustomFilterers:e.callTreeCustomFilterers};this.profilerTraceIdNumber+=1;const o={id:rs.ProcessTrace,requestParams:t};return this.profilerTraceProcessingWorker.processRequest(o)||(this.params.logger.logProcessRequestForProcessTraceFailed(),this.useMainEventLoopForProfilerTraceProcessing(e,r,s)),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),t,this.params.logger)}filterOutProcessedEvents(e){if(e){const r=e.getProfilerTraceStartTimestamp()+e.getElapsedProfilingTimeInMs();this.traceRequestingEvents=this.traceRequestingEvents.filter((e=>e.eventEndTime>=r))}}constructor(e){this.params=e,this.processAndSendTrace=(e,r,s)=>{this.params.shouldAllowForConditionalProfileProcessingAndSending&&(this.params.traceProcessor.traceRequestingEventDrivenCallTreeHandler?this.params.traceProcessor.traceRequestingEventDrivenCallTreeHandler.setFilteringEvents(this.traceRequestingEvents):this.params.logger.logTraceRequestingEventDrivenCallTreeFiltererNotSet());const t=e.profilerTrace;this.params.traceProcessor.processTrace(t),this.params.shouldAllowForConditionalProfileProcessingAndSending&&t&&this.traceRequestingEvents.length>0&&this.filterOutProcessedEvents(t);const o=this.params.traceProcessor.retrieveSerializedCallTrees();let i=o.serializedCallTrees;i=this.extractAndMergeCallTreeCustomProperties(i,e.callTreeCustomPropertiesRetrievers),e.callTreeCustomFilterers.length>0&&(i=this.applyCallTreeCustomFiltering(i,e.callTreeCustomFilterers)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(i);const a=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.logSerializedCallTrees(a,r,o.resourceUrlsCompressionDictionary),this.sendCallTrees(a,r,s,o.resourceUrlsCompressionDictionary)},this.webWorkerOnCompleteCallback=(e,r,s,t,o,i,a)=>{let n=this.extractAndMergeCallTreeCustomProperties(e,t);o.length>0&&(n=this.applyCallTreeCustomFiltering(n,o)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(n);const l=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.params.shouldAllowForConditionalProfileProcessingAndSending&&a&&this.traceRequestingEvents.length>0&&this.filterOutProcessedEvents(a),this.logSerializedCallTrees(l,r,i),this.sendCallTrees(l,r,s,i)},this.webWorkerOnErrorCallback=(e,r,s,t,o)=>{this.useMainEventLoopForProfilerTraceProcessing({profilerTrace:e.trace,callTreeCustomPropertiesRetrievers:t,callTreeCustomFilterers:o},r,s)},this.logSerializedCallTrees=(e,r,s)=>{this.params.shouldLogSerializedCallTrees?0!==e.length?e.forEach((e=>{let t="";if(this.params.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:s,serializedCallTree:e,propertyBag:r};t=JSON.stringify(o),this.params.stringCompressorFactory.generateStringCompressor().compress(t,(e=>{const r={compressionFormatVersion:1,compressedData:e},s=JSON.stringify(r);this.params.logger.logSerializedCallTrees(s)}),(()=>{const s={serializedCallTree:e,propertyBag:r};t=JSON.stringify(s),this.params.logger.logSerializedCallTrees(t)}))}else{const s={serializedCallTree:e,propertyBag:r};t=JSON.stringify(s),this.params.logger.logSerializedCallTrees(t)}})):this.params.logger.logNoSerializedCallTreesToLog():this.params.logger.logSkippingLoggingSerializedCallTrees()},this.sendCallTrees=(e,r,s,t)=>{this.params.shouldSendSerializedCallTreesToServer&&(0!==e.length?this.params.callTreesSender.sendCallTreesToService(e,this.params.deObfuscationInfo.deObfuscationEndpoint,s,r,t):this.params.logger.logNoCallTreesToSend())},this.profilerTraceIdNumber=1,this.storedProfiles=[],this.traceRequestingEvents=[]}}class ns{createObserver(){return new as(this.observerInitParams)}constructor(e){this.observerInitParams=e}}class ls{convertToJSONString(e){this.convertedJSONString=JSON.stringify(this.shouldCompressSerializedCallTrees?this.convertSerializedCallTreeToCompressedCallTree(e):e)}retrieveConvertedJSONString(){if(null==this.convertedJSONString)return this.logger.logConvertToJSONStringWasNeverCalled(),"BadSerializedCallTreeJSONString";const e=this.convertedJSONString;return this.convertedJSONString=void 0,e}convertSerializedCallTreeToCompressedCallTree(e){return{0:e.serializedFrames.map((e=>({0:e.startTimeInMs,1:e.frameOnlyRunTimeInMs,2:e.subTreeRunTimeInMs,3:e.totalExecutionTimeInMs,4:e.obfuscatedName,5:e.hasChildrenNodes,6:{0:e.resourceInfo.resourceName,1:e.resourceInfo.lineNo,2:e.resourceInfo.columnNo},7:e.frameOnlyCount,8:e.totalCount}))),1:e.totalExecutionTimeForTreeInMs,2:e.propertyBag}}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONString=void 0}}class ds{convertToJSONStrings(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertSerializedCallTreesToJSONStrings",(()=>(this.convertedJSONStrings=e.map((e=>{const r=new ls(this.shouldCompressSerializedCallTrees,this.logger);return r.convertToJSONString(e),r.retrieveConvertedJSONString()})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r)}retrieveConvertedJSONStrings(){return null==this.convertedJSONStrings?[]:this.convertedJSONStrings}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONStrings=[]}}class cs{start(e){this.initParams.logger.logWebWorkerSource(e);const r=new Blob([e],{type:"application/javascript"});return this.worker=new Worker(this.initParams.urlWrapper.createObjectURL(r)),null!=this.worker?(this.initParams.logger.logWebWorkerCreationSucceeded(),!0):(this.initParams.logger.logWebWorkerCreationFailed(),!1)}postMessage(e){null!=this.worker?this.worker.postMessage(e):this.initParams.logger.logWorkerNotRunning()}addEventListener(e,r){null!=this.worker?this.worker.addEventListener(e,r):this.initParams.logger.logWorkerNotRunning()}onError(e){null!=this.worker?this.worker.onerror=e:this.initParams.logger.logWorkerNotRunning()}terminate(){null!=this.worker?this.worker.terminate():this.initParams.logger.logWorkerNotRunning()}constructor(e){this.initParams=e,this.worker=void 0}}class gs{createWebWorkerWrapper(){return new cs(this.initParams)}constructor(e){this.initParams=e}}!function(e){e[e.ProcessTrace=0]="ProcessTrace",e[e.TraceProcessingComplete=1]="TraceProcessingComplete",e[e.ErrorEncounteredInWorker=2]="ErrorEncounteredInWorker",e[e.CompressSerializedProfile=3]="CompressSerializedProfile",e[e.SerializedProfileCompressionComplete=4]="SerializedProfileCompressionComplete",e[e.SerializedProfileCompressionFailed=5]="SerializedProfileCompressionFailed"}(ss||(ss={})),function(e){e[e.UnableToInitializeProfilerTraceProcessingWorker=0]="UnableToInitializeProfilerTraceProcessingWorker",e[e.ExceptionEncounteredInWorker=1]="ExceptionEncounteredInWorker",e[e.InvalidMessageReceivedByWorker=2]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=3]="InvalidProcessTraceMessageReceivedByWorker",e[e.InvalidTraceReceivedByWorker=4]="InvalidTraceReceivedByWorker",e[e.UnknownMessageIdReceivedByWorker=5]="UnknownMessageIdReceivedByWorker",e[e.InvalidCompressSerializedProfileMessageReceivedByWorker=6]="InvalidCompressSerializedProfileMessageReceivedByWorker"}(ts||(ts={}));class us{getWorkerId(){return this.workerLifeCycle?this.workerLifeCycle.workerId:0}startWorker(){if(this.workerStarted)return this.workerInitParams.logger.logWebWorkerAlreadyStarted(),!0;this.worker=this.workerInitParams.webWorkerWrapperFactory.createWebWorkerWrapper();const e=`try{\n      importScripts('${this.workerInitParams.uriEncoderFactory.encodeURI(this.workerInitParams.workerSourceURL)}');\n    } catch(exception) {\n     setTimeout(() => {\n      self.postMessage({\n          id: ${ss.ErrorEncounteredInWorker},\n          data: {\n            errorId: ${ts.UnableToInitializeProfilerTraceProcessingWorker},\n            errorLogs: {\n              logs: []\n            },\n            additionalErrorData: JSON.stringify(\n              exception,\n              Object.getOwnPropertyNames(exception)\n            ),\n          }\n        });\n      }, 1000 /* 1 second delay in sending a message because the connection might not have been established */ );\n    }`;return this.worker.start(e)?(this.workerStarted=!0,this.worker.addEventListener("message",this.onMessageReceived.bind(this)),this.worker.onError(this.errorHandler.bind(this)),!0):(this.workerInitParams.logger.logUnableToBootWebWorker(),!1)}processRequest(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("ProfilerTraceProcessingWorkerProcessRequest",(r=>{if(null==this.worker||!this.workerStarted)return this.logger.logWorkerInstanceNotFound(),P.generateOperationResult({didOperationSucceed:!0,result:!1});if(this.workerCurrentlyProcessingRequest)return this.pendingRequestsToProcess.queue(e),P.generateOperationResult({didOperationSucceed:!0,result:!0});switch(this.currentRequestBeingProcessed=e,r.addProperty("WebWorkerRequestID",e.id),e.id){case rs.ProcessTrace:{const r=e.requestParams;void 0===this.isFixForWorkerQueuesApplied&&(this.isFixForWorkerQueuesApplied=r.traceProcessingInfo.shouldAllowForConditionalProfileProcessingAndSending),this.processTrace(r)}break;case rs.CompressSerializedCallTree:{const r=e.requestParams;this.compressSerializedCallTree(r)}break;default:return this.logger.logUnknownWebWorkerRequestId(e.id),P.generateOperationResult({didOperationSucceed:!0,result:!1})}return P.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}isValidMessageFromWorker(e){return null==e?(this.logger.logMessageFromWorkerIsNullorUndefined(),!1):"object"!=typeof e?(this.logger.logMessageFromWorkerNotObject(),!1):"id"in e?"data"in e||(this.logger.logDataNotFoundInMessageFromWorker(),!1):(this.logger.logIdNotFoundInMessageFromWorker(),!1)}processTrace(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplProcessTrace",(()=>{if(null==this.worker||!this.workerStarted)return this.workerInitParams.logger.logWorkerInstanceNotFound(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});this.workerCurrentlyProcessingRequest=!0,this.workerLifeCycle?.onWorkerBusy(this.workerLifeCycle.workerId);const r={id:ss.ProcessTrace,data:e.traceProcessingInfo};return this.worker.postMessage(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)}compressSerializedCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplCompressSerializedCallTree",(()=>{if(null==this.worker||!this.workerStarted)return this.logger.logWorkerInstanceNotFound(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});this.workerCurrentlyProcessingRequest=!0,this.workerLifeCycle?.onWorkerBusy(this.workerLifeCycle.workerId),this.currentRequestBeingProcessed={id:rs.CompressSerializedCallTree,requestParams:e};const r={id:ss.CompressSerializedProfile,data:e.compressionInfo};return this.worker.postMessage(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}traceProcessingSuccessHandler(e){const r=e.data;"serializedCallTrees"in r||this.logger.logSerializedCallTreesMissingInProcessorResult(),"logs"in r||this.logger.logLogsMissingInProcessorResult();const s=r,t=this.currentRequestBeingProcessed?.requestParams;void 0===t.traceProcessingCompletionCallback&&this.logger.logUndefinedWebWorkerCompletionCallback(),s.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}));const[o,i]=this.getDeObfuscationRequestPropertiesAndQueryParams();t.traceProcessingCompletionCallback(s.serializedCallTrees,o,i,t.callTreeCustomPropertiesRetrievers,t.callTreeCustomFilterers,s.resourceUrlsCompressionDictionary,t.traceProcessingInfo.shouldAllowForConditionalProfileProcessingAndSending?t.traceProcessingInfo.trace:void 0)}traceProcessingErrorHandler(){const e=this.currentRequestBeingProcessed?.requestParams;if(void 0===e.traceProcessingErrorCallback)return void this.logger.logUndefinedErrorCallback();if(void 0===e.traceProcessingInfo)return void this.logger.logUndefinedTraceProcessingInfoToReturnBack();const[r,s]=this.getDeObfuscationRequestPropertiesAndQueryParams();e.traceProcessingErrorCallback(e.traceProcessingInfo,r,s,e.callTreeCustomPropertiesRetrievers,e.callTreeCustomFilterers)}compressSerializedCallTreeSuccessHandler(e){const r=e.data;if(!("outputString"in r))return void this.logger.logOutputStringMissingInMessageFromWorker();if(!("logs"in r))return void this.logger.logLogsMissingInMessageFromWorker();if(null==this.currentRequestBeingProcessed)return void this.logger.logCurrentTraceBeingProcessedNullOrUndefined();const s=r;s.logs.forEach((e=>{this.handleLogMessageFromWorker(e)})),this.currentRequestBeingProcessed.requestParams.compressionCompletionCallback(s.outputString)}compressSerializedCallTreeErrorHandler(){const e=this.currentRequestBeingProcessed?.requestParams;void 0!==e.compressionErrorCallback?void 0!==e.compressionInfo?e.compressionErrorCallback(e.compressionInfo.serializedProfile):this.logger.logUndefinedCompressionInfoToReturnBack():this.logger.logUndefinedErrorCallback()}handleKnownWebWorkerError(e){if(null==e)return void this.logger.logMessageFromWorkerIsNullorUndefined();const r=e.data;switch(this.logErrorLogsFromWorker(r),r.errorId){case ts.UnableToInitializeProfilerTraceProcessingWorker:this.handleWebWorkerInitializationError(e);break;case ts.ExceptionEncounteredInWorker:this.logger.logExceptionEncounteredInWorker(r.additionalErrorData);break;case ts.InvalidMessageReceivedByWorker:this.logger.logInvalidMessageReceivedByWorker();break;case ts.InvalidProcessTraceMessageReceivedByWorker:this.logger.logInvalidProcessTraceMessageReceivedByWorker();break;case ts.InvalidTraceReceivedByWorker:this.logger.logInvalidTraceReceivedByWorker();break;case ts.UnknownMessageIdReceivedByWorker:this.logger.logUnknownMessageIdReceivedByWorker();break;case ts.InvalidCompressSerializedProfileMessageReceivedByWorker:this.logger.logInvalidCompressSerializedProfileMessageReceivedByWorker();break;default:this.logger.logUnknownWebWorkerErrorId(r.errorId)}if(null!=this.currentRequestBeingProcessed)switch(this.currentRequestBeingProcessed.id){case rs.ProcessTrace:this.traceProcessingErrorHandler();break;case rs.CompressSerializedCallTree:this.compressSerializedCallTreeErrorHandler();break;default:this.logger.logUnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError(this.currentRequestBeingProcessed.id)}else this.logger.logCurrentTraceBeingProcessedNullOrUndefined()}logErrorLogsFromWorker(e){const r=e.errorLogs;"logs"in r&&r.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}))}handleWebWorkerInitializationError(e){this.logger.logWebWorkerInitializationError(e.data.additionalErrorData),this.terminateWorker()}terminateWorker(){this.worker?(this.worker.terminate(),this.workerLifeCycle?.onWorkerTerminated(this.workerLifeCycle.workerId),this.worker=void 0,this.workerStarted=!1,this.currentRequestBeingProcessed=void 0,this.workerCurrentlyProcessingRequest=!1,this.logger.logWebWorkerTerminated()):this.logger.logWorkerInstanceNotFound()}handleLogMessageFromWorker(e){this.workerInitParams.logMessageProcessor.processLogMessage(e)}getDeObfuscationRequestPropertiesAndQueryParams(){const e=new Ke(this.workerInitParams.logger);return[e.extractCustomProperties(this.workerInitParams.deObfuscationRequestBodyPropertiesRetriever),e.extractCustomProperties(this.workerInitParams.deObfuscationRequestQueryParamsRetriever)]}processNextStoredWebWorkerRequestIfAny(){if(this.pendingRequestsToProcess.length()>0){const e=this.pendingRequestsToProcess.peek();if(this.isFixForWorkerQueuesApplied&&(this.currentRequestBeingProcessed=e),null==e)return;e.id===rs.ProcessTrace?this.processTrace(e.requestParams):this.logger.logUnknownStoredWebWorkerRequestId(e.id),this.pendingRequestsToProcess.dequeue()}}constructor(e,r){this.workerInitParams=e,this.workerLifeCycle=r,this.onMessageReceived=e=>{const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(me,(r=>{const s=e.data;if(!this.isValidMessageFromWorker(s))return P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(r.addProperty("MessageReceived",s.id),s.id===ss.ErrorEncounteredInWorker)return this.handleKnownWebWorkerError(s),this.workerLifeCycle?.onWorkerIdle(this.workerLifeCycle.workerId),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.processNextStoredWebWorkerRequestIfAny(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});if(null==this.currentRequestBeingProcessed)return this.workerInitParams.logger.logCurrentTraceBeingProcessedNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});switch(s.id){case ss.TraceProcessingComplete:this.traceProcessingSuccessHandler(s);break;case ss.SerializedProfileCompressionComplete:this.compressSerializedCallTreeSuccessHandler(s);break;case ss.SerializedProfileCompressionFailed:this.compressSerializedCallTreeErrorHandler();break;default:this.workerInitParams.logger.logUnknownMessageFromWorker(s.id)}return this.workerLifeCycle?.onWorkerIdle(this.workerLifeCycle.workerId),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.processNextStoredWebWorkerRequestIfAny(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)},this.errorHandler=e=>{const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplErrorHandler",(r=>{if(this.logger.logWebWorkerError(JSON.stringify(e,[...Object.getOwnPropertyNames(e),"message"])),null==this.currentRequestBeingProcessed)return this.logger.logCurrentTraceBeingProcessedNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.currentRequestBeingProcessed;switch(r.addProperty("WebWorkerRequestIDWhichEncounteredUnknownError",s.id),s.id){case rs.ProcessTrace:this.traceProcessingErrorHandler();break;case rs.CompressSerializedCallTree:this.compressSerializedCallTreeErrorHandler();break;default:this.logger.logUnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError(s.id)}return this.terminateWorker(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)},this.worker=void 0,this.workerStarted=!1,this.pendingRequestsToProcess=D.createQueue(),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.logger=e.logger,this.isFixForWorkerQueuesApplied=void 0}}class ms{getProfilerTraceProcessingWorker(){if(void 0===this.singletonWebWorkerInstance){const e=new us(this.workerInitParams,{workerId:0,onWorkerTerminated:this.onWorkerTerminated.bind(this),onWorkerIdle:()=>{},onWorkerBusy:()=>{}});return this.singletonWebWorkerInstance=e,e}return this.singletonWebWorkerInstance}onWorkerTerminated(){this.singletonWebWorkerInstance=void 0}constructor(e){this.workerInitParams=e,this.singletonWebWorkerInstance=void 0}}class ps{startWorker(){return!0}processRequest(e){return this.storedRequest=e,!0}getWorkerId(){return 0}getStoredRequest(){return this.storedRequest}constructor(){this.storedRequest=void 0}}class hs{getProfilerTraceProcessingWorker(){if(this.idleWorkers.size>0)for(const[e,r]of this.idleWorkers)return this.idleWorkers.delete(e),this.busyWorkers.set(e,r),r;if(this.workerId<this.params.maxNumberOfWorkersAllowed){const e=new us(this.params,{workerId:this.workerId,onWorkerIdle:this.markBusyWorkerAsIdle.bind(this),onWorkerBusy:this.markIdleWorkerAsBusy.bind(this),onWorkerTerminated:this.markWorkerAsTerminated.bind(this)});return this.busyWorkers.set(this.workerId,e),this.workerId++,e}const e=new ps;return this.futureWorkers.queue(e),e}markIdleWorkerAsBusy(e){const r=this.idleWorkers.get(e);r?(this.idleWorkers.delete(e),this.busyWorkers.set(e,r)):this.params.logger.logWorkerIDBeingSetToBusyNotPresentInIdleWorkers(e)}markBusyWorkerAsIdle(e){const r=this.busyWorkers.get(e);if(r)if(this.busyWorkers.delete(e),this.futureWorkers.length()>0){let e=this.futureWorkers.peek();for(;null!=e;){const s=e.getStoredRequest();if(null!=s){r.processRequest(s),this.futureWorkers.dequeue();break}this.futureWorkers.dequeue(),e=this.futureWorkers.peek()}}else this.idleWorkers.set(e,r);else this.params.logger.logWorkerIDBeingSetToIdleNotPresentInBusyWorkers(e)}markWorkerAsTerminated(e){this.idleWorkers.has(e)&&this.busyWorkers.has(e)||this.params.logger.logUnknownWorkerIDBeingTerminated(e),this.idleWorkers.has(e)&&this.idleWorkers.delete(e),this.busyWorkers.has(e)&&this.busyWorkers.delete(e)}constructor(e){this.params=e,this.workerId=0,this.idleWorkers=new Map,this.busyWorkers=new Map,this.futureWorkers=D.createQueue()}}class Ts{sendCallTreeToService(e,r,s,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendIndividualCallTree",(o=>{o.addProperty("compressedCallTree",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:t,serializedCallTree:e,propertyBag:s};i=JSON.stringify(o),this.stringCompressor.compress(i,(e=>{const s={compressionFormatVersion:1,compressedData:e};this.sendRequest(r,JSON.stringify(s))}),(t=>{this.logger.logFailedToCompressIndividualCallTreeDeobfuscationRequest();const o={serializedCallTree:e,propertyBag:s};i=JSON.stringify(o),this.sendRequest(r,i)}))}else{const t={serializedCallTree:e,propertyBag:s};i=JSON.stringify(t),this.sendRequest(r,i)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}sendRequest(e,r){if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:e,data:r});else{const s=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();s.open("POST",e,!0),s.send(r)}}constructor(e,r,s,t,o,i){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=s,this.shouldCompressSerializedCallTrees=t,this.stringCompressor=o,this.logger=i}}class fs{sendCallTrees(e,r,s,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendMultipleCallTrees",(o=>{o.addProperty("compressedCallTrees",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:t,serializedCallTrees:e,propertyBag:s};i=JSON.stringify(o),this.stringCompressor.compress(i,(e=>{const s={compressionFormatVersion:1,compressedData:e};this.sendRequest(r,JSON.stringify(s))}),(t=>{this.logger.logFailedToCompressMultipleCallTreesDeobfuscationRequest();const o={serializedCallTrees:e,propertyBag:s};i=JSON.stringify(o),this.sendRequest(r,i)}))}else{const t={serializedCallTrees:e,propertyBag:s};i=JSON.stringify(t),this.sendRequest(r,i)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}sendRequest(e,r){if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:e,data:r});else{const s=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();s.open("POST",e,!0),s.send(r)}}constructor(e,r,s,t,o,i){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=s,this.shouldCompressSerializedCallTrees=t,this.stringCompressor=o,this.logger=i}}class Ps{sendCallTreesToService(e,r,s,t,o){const i=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ge,(i=>{i.addProperty("NumberOfCallTreesToSend",e.length);const a=function(e,r){let s=e;return Object.entries(r).forEach(((e,r)=>{0===r?s.includes("?")?s+="&":s+="?":s+="&";const[t,o]=e;s+=`${t}=${o}`})),s}(r,s);return this.shouldSendAllCallTreesFromProfileInASingleRequest?this.sendAllCallTreesInASingleRequest(e,a,t,o):this.sendCallTreesIndividually(e,a,t,o),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),i,this.logger)}sendCallTreesIndividually(e,r,s,t){const o=new Ts(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.stringCompressor,this.logger);e.forEach((e=>{o.sendCallTreeToService(e,r,s,t)}))}sendAllCallTreesInASingleRequest(e,r,s,t){new fs(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.stringCompressor,this.logger).sendCallTrees(e,r,s,t)}constructor(e,r,s,t,o,i,a){this.sendBeaconScheduler=e,this.shouldSendAllCallTreesFromProfileInASingleRequest=r,this.xmlHTTPRequestWrapperFactory=s,this.shouldUseSendBeaconForSendingCallTrees=t,this.shouldCompressSerializedCallTrees=o,this.stringCompressor=i,this.logger=a}}class Cs{compress(e,r,s){this.logger.logNullStringCompressorInvoked()}constructor(e){this.logger=e}}class Ss{isCompressionStreamAPIAvailable(){return null!=typeof CompressionStream}}class Is{compress(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("CompressStringWithGZIPCompressor",(()=>{let t=!0;if(!this.compressionStreamsAPIAvailabilityChecker.isCompressionStreamAPIAvailable())return this.logger.logCompressionStreamAPIIsNotAvailable(),t=!1,s(e),P.generateOperationResult({didOperationSucceed:t,result:void 0});const o=new Blob([e],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip"));return new Response(o).blob().then((o=>{o.arrayBuffer().then((e=>{const s=btoa(Array.from(new Uint8Array(e),(e=>String.fromCharCode(e))).join(""));r(s)})).catch((r=>{this.logger.logUnableToRetrieveArrayBufferFromCompressedBlob(r),t=!1,s(e)}))})).catch((r=>{this.logger.logUnableToRetrieveCompressedBlob(r),t=!1,s(e)})),P.generateOperationResult({didOperationSucceed:t,result:void 0})}),t)}constructor(e,r){this.compressionStreamsAPIAvailabilityChecker=e,this.logger=r}}class vs{compress(e,r,s){const t={compressionInfo:{serializedProfile:e},compressionCompletionCallback:r,compressionErrorCallback:s},o={id:rs.CompressSerializedCallTree,requestParams:t};this.traceProcessingWorker.processRequest(o)||(this.logger.logProcessRequestForCompressSerializedProfileFailed(),s(e))}constructor(e,r){this.traceProcessingWorker=e,this.logger=r}}class ks{generateStringCompressor(){const e=new Ss;return this.useWebWorkerForCompression?new vs(this.workerFactory.getProfilerTraceProcessingWorker(),this.logger):new Is(e,this.logger)}constructor(e,r,s){this.useWebWorkerForCompression=e,this.workerFactory=r,this.logger=s}}class bs{filterCallTreesByTraceRequestingEvents(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FilterCallTreesByTraceRequestingEvents",(()=>(this.filteredCallTrees=[],this.hasValidTraceRequestingEvents()?(this.filteredCallTrees=this.filterCallTrees(e),P.generateOperationResult({didOperationSucceed:!0,result:void 0})):(this.logger.logFilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents(),r))),r,this.logger)}mergePropertyBagToEventBasedFilteredCallTrees(){if(!this.isEventBasedPropertyBagMergingEnabled)return;const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("MergePropertyBagToEventBasedFilteredCallTrees",(()=>(this.filteredCallTrees.forEach((e=>{const r=e.getStartTimeInMs(),s=r+e.getTotalExecutionTimeInMs(),t=e.getCustomProperties(),o=this.traceRequestingEvents?.filter((e=>this.isTimeOverlapping(r,s,e))),i=o?.map((e=>({EventName:e.eventName,EventStartTime:e.eventStartTime,EventEndTime:e.eventEndTime})));t.eventBased=JSON.stringify(i)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}hasValidTraceRequestingEvents(){return Array.isArray(this.traceRequestingEvents)&&this.traceRequestingEvents.length>0}filterCallTrees(e){return e.filter((e=>{const r=e.getStartTimeInMs(),s=r+e.getTotalExecutionTimeInMs();return this.traceRequestingEvents?.some((e=>this.isTimeOverlapping(r,s,e)))}))}isTimeOverlapping(e,r,s){return e>=s.eventStartTime&&e<=s.eventEndTime||r>=s.eventStartTime&&r<=s.eventEndTime}retrieveFilteredCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveCallTreesFilteredByTraceRequestingEvents",(()=>P.generateOperationResult({didOperationSucceed:!0,result:this.filteredCallTrees})),e,this.logger).getResult()}setFilteringEvents(e){this.traceRequestingEvents=e}constructor(e,r,s){this.logger=e,this.traceRequestingEvents=r,this.isEventBasedPropertyBagMergingEnabled=s,this.filteredCallTrees=[]}}class Os{encodeURI(e){return this.trustedTypesAPIChecker.isTrustedTypesAPIAvailable()&&this.isTrustedTypesEnabled&&this.trustedTypesURLEncoder.encodeURI(e),this.encodeURIWrapper.encodeURI(e)}constructor(e,r,s,t){this.trustedTypesAPIChecker=e,this.trustedTypesURLEncoder=r,this.encodeURIWrapper=s,this.isTrustedTypesEnabled=t,this.trustedTypesAPIChecker=e,this.trustedTypesURLEncoder=r,this.isTrustedTypesEnabled=t}}class Ws{isTrustedTypesAPIAvailable(){return"undefined"!==window.trustedTypes||"undefined"!==self.trustedTypes}}class Ms{encodeURI(e){const r=this.trustedTypesPolicyFactory.createScriptURL(e);return null==r?(this.logger.logTrustedTypesPolicyFactoryCreateScriptURLReturnedNull(),ze):r}constructor(e,r){this.trustedTypesPolicyFactory=e,this.logger=r}}class ys{encodeURI(e){return encodeURI(e)}}class Rs{createObjectURL(e){if(this.isTrustedTypesEnforcementEnabled){const r=this.trustedTypesPolicyFactory.createScriptURL(e);return null==r?(this.logger.logTrustedTypesPolicyFactoryCreateScriptURLReturnedNull(),ze):r}return URL.createObjectURL(e)}constructor(e,r,s){this.trustedTypesPolicyFactory=e,this.isTrustedTypesEnforcementEnabled=r,this.logger=s}}class Ns{createScriptURL(e){return this.logger.logNullTrustedTypesPolicyFactoryCreateScriptURLInvoked(),null}constructor(e){this.logger=e}}class xs{retrieveProfilerFactory(){const e=P.generateOperationResult({didOperationSucceed:!0,result:new hr(this.logger)});return f.startNew("RetrieveProfilerFactory",(()=>{const e=this.jsCPUProfilingPackageInitOptions.shouldSkipSupportedOSCheck??!1,r=this.jsCPUProfilingPackageInitOptions.shouldAllowForConditionalProfileProcessingAndSending??!1,s=this.jsCPUProfilingPackageInitOptions.storedProfilesRetentionPeriodInMs??3e4,t=this.getSupportedEnvironmentChecker(e),o=new Ye(this.featureChecker,t,this.logger),i=new gr(this.logger),a=new pr(this.logger),n={deObfuscationEndpoint:this.jsCPUProfilingPackageInitOptions.deObfuscationEndpoint??""},l=new Mr(this.logger),d=new Hr(this.logger),c=this.jsCPUProfilingPackageInitOptions.shouldKeepSamplesOutsideOfProfilingInterval??We,g=this.jsCPUProfilingPackageInitOptions.shouldRecordExpandedTimeStamps??ye,u=this.jsCPUProfilingPackageInitOptions.shouldRecordFrameCounts??!1,m=this.jsCPUProfilingPackageInitOptions.shouldLogRawProfilerTrace??!1,p=this.jsCPUProfilingPackageInitOptions.profilerTraceLoggingChunkSize||30,h=this.jsCPUProfilingPackageInitOptions.shouldExpandMarkers??!1,T=new Wr(l,d,c,g,this.logger,u,h),f=this.jsCPUProfilingPackageInitOptions.isEventBasedPropertyBagAdditionEnabled??!1,C=new qr(this.logger,f),S=new Sr(T,C,this.logger),I=new Dr(this.logger),k=new Vr(this.logger),O=this.jsCPUProfilingPackageInitOptions.callTreeFilteringThresholdInMs??50,W=this.jsCPUProfilingPackageInitOptions.frameTotalExecutionTimeFilteringThresholdInMs??0,M=this.jsCPUProfilingPackageInitOptions.shouldMakeSerializedCallTreesFullyReconstructible??Ue,y=this.jsCPUProfilingPackageInitOptions.serializeCallTreeWithPropertyBagAsPriority??Le,R=new Zr(this.logger),N=new Cr(S,I,k,O,R,W,this.logger),F=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees??!1,E=new jr(M,F,this.logger,y),_=x.getIdleTimeJobScheduler(),U=w.getDocumentVisibilityChecker(),L=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedInAHiddenDocument??Oe,B=this.jsCPUProfilingPackageInitOptions.shouldSendProfilesForDeobfuscationImmediately??Ee;let A=new Qr(N,E);if(r){const e=new bs(this.logger,[],f);A=new Qr(N,E,e)}const $=this.jsCPUProfilingPackageInitOptions.useMainEventLoopForProfilerTraceProcessing??Re,q=Q.getWindowPropertyChecker(),J=new Kr(q),D=z.getSendBeaconScheduler(),V=this.jsCPUProfilingPackageInitOptions.shouldSendAllCallTreesFromProfileInASingleRequest??Ne,H=this.jsCPUProfilingPackageInitOptions.shouldUseSendBeaconForSendingCallTrees??!0,G=new b,j=this.jsCPUProfilingPackageInitOptions.profilerTraceProcessingWebWorkerSourceURL??"",K=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestBodyPropertiesRetriever,Z=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestQueryParamsRetriever,X=new Ke(this.logger),Y=this.jsCPUProfilingPackageInitOptions.shouldCheckAndMarkWebWorkerURLAsTrusted??!1,ee=this.jsCPUProfilingPackageInitOptions.trustedTypesPolicyFactory??new Ns(this.logger),re={urlWrapper:new Rs(ee,Y,this.logger),logger:this.logger},se=new gs(re),te=this.jsCPUProfilingPackageInitOptions.canUseMultipleWebWorkers??!1,oe=new Ws,ie=new Ms(ee,this.logger),ae=new ys,ne=new Os(oe,ie,ae,Y),le={workerSourceURL:j,deObfuscationRequestBodyPropertiesRetriever:K,deObfuscationRequestQueryParamsRetriever:Z,logMessageProcessor:this.logMessageProcessor,webWorkerWrapperFactory:se,uriEncoderFactory:ne,logger:this.logger},de={...le,maxNumberOfWorkersAllowed:null!=this.jsCPUProfilingPackageInitOptions.maxNumberOfWebWorkersToUse?this.jsCPUProfilingPackageInitOptions.maxNumberOfWebWorkersToUse:4},ce=te?new hs(de):new ms(le),ge=new ks(!this.jsCPUProfilingPackageInitOptions.useMainEventLoopForProfilerTraceProcessing,ce,this.logger),ue=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees?ge.generateStringCompressor():new Cs(this.logger),me=new Ps(D,V,G,H,F,ue,this.logger),pe={shouldAlwaysLogOperationsData:this.jsCPUProfilingPackageInitOptions.shouldAlwaysLogOperationsData??xe,durationThresholdInMsToLogOperationData:this.jsCPUProfilingPackageInitOptions.durationThresholdInMsToLogOperationData??50,listOfOperationNamesToAlwaysLog:he},Te=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedWhileUserIsIdle??_e,fe=this.jsCPUProfilingPackageInitOptions.shouldKeepQueryParamsInResourceURLs??we,Pe=this.jsCPUProfilingPackageInitOptions.shouldLogSerializedCallTrees??Be,Ce=this.jsCPUProfilingPackageInitOptions.shouldSendSerializedCallTreesToServer??Ae,Se=(new v).getURLQueryParamsRemover(),Ie=new Yr(Se,this.logger),ve=new ds(F,this.logger),ke=new ns({idleTimeJobScheduler:_,documentVisibilityChecker:U,shouldProcessProfileCapturedInAHiddenDocument:L,traceProcessor:A,shouldProcessProfileInMainEventLoop:$,webWorkerAPIAvailabilityChecker:J,deObfuscationInfo:n,callTreesSender:me,webWorkerSourceURL:j,profilerTraceProcessingWorkerFactory:ce,shouldKeepSamplesOutsideOfProfilingInterval:c,shouldRecordExpandedTimeStamps:g,callTreeFilteringThresholdInMs:O,frameTotalExecutionTimeFilteringThresholdInMs:W,deObfuscationRequestBodyPropertiesRetriever:K,deObfuscationRequestQueryParamsRetriever:Z,customPropertiesExtractor:X,operationLogMessageFilteringCriteria:pe,shouldSendProfilesForDeobfuscationImmediately:B,shouldProcessProfileCapturedWhileUserIsIdle:Te,shouldKeepQueryParamsInResourceURLs:fe,profileResourceURLsQueryParamsRemover:Ie,shouldMakeSerializedCallTreesFullyReconstructible:M,serializeCallTreeWithPropertyBagAsPriority:y,shouldRecordFrameCounts:u,shouldLogRawProfilerTrace:m,profilerTraceLoggingChunkSize:p,shouldLogSerializedCallTrees:Pe,shouldSendSerializedCallTreesToServer:Ce,shouldCompressSerializedCallTrees:F,serializedCallTreesToJSONStringsConverter:ve,shouldAllowForConditionalProfileProcessingAndSending:r,isEventBasedPropertyBagAdditionEnabled:f,storedProfilesRetentionPeriodInMs:s,stringCompressorFactory:ge,logger:this.logger,shouldExpandMarkers:h}),be=new Xe(o,i,a,ke,this.jsCPUProfilingPackageInitOptions,this.logger);return P.generateOperationResult({didOperationSucceed:!0,result:be})}),e,this.logger).getResult()}getSupportedEnvironmentChecker(e){return ir.build(e,this.logger)}constructor(e,r,s,t){this.featureChecker=e,this.jsCPUProfilingPackageInitOptions=r,this.logMessageProcessor=s,this.logger=t}}class Fs{retrieveProfilerFactory(){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new hr(this.logger)}constructor(e){this.logger=e}}!function(e){e[e.IdMissing=0]="IdMissing",e[e.DataMissing=1]="DataMissing",e[e.MissingProfilerImplementation=2]="MissingProfilerImplementation",e[e.FailingValidationsInProfilerFactory=3]="FailingValidationsInProfilerFactory",e[e.WindowMissingInJSEnvironment=4]="WindowMissingInJSEnvironment",e[e.WindowPropertyNameChecked=5]="WindowPropertyNameChecked",e[e.UserAgentToParseChromiumMajorVersionNumber=6]="UserAgentToParseChromiumMajorVersionNumber",e[e.ChromeNotPresentInUserAgent=7]="ChromeNotPresentInUserAgent",e[e.UnableToIsolateChromeInformationFromUserAgent=8]="UnableToIsolateChromeInformationFromUserAgent",e[e.UnableToExtractChromeVersionInformation=9]="UnableToExtractChromeVersionInformation",e[e.UnableToParseChromeMajorVersionString=10]="UnableToParseChromeMajorVersionString",e[e.ParsedChromiumMajorVersionNumber=11]="ParsedChromiumMajorVersionNumber",e[e.UserAgentToCheckForChromiumBrowser=12]="UserAgentToCheckForChromiumBrowser",e[e.EmptyUserAgentString=13]="EmptyUserAgentString",e[e.BrowserUserAgentNotChromiumBased=14]="BrowserUserAgentNotChromiumBased",e[e.UserAgentSpoofedToBeChromium=15]="UserAgentSpoofedToBeChromium",e[e.BrowserNotChromiumBasedBrowser=16]="BrowserNotChromiumBasedBrowser",e[e.UnsupportedChromiumMajorVersionNumber=17]="UnsupportedChromiumMajorVersionNumber",e[e.ProfilerInitOptionsNullOrUndefined=18]="ProfilerInitOptionsNullOrUndefined",e[e.SamplingIntervalIsLessThanOrEqualToZero=19]="SamplingIntervalIsLessThanOrEqualToZero",e[e.SamplingIntervalLessThanMinimumSupportedSamplingInterval=20]="SamplingIntervalLessThanMinimumSupportedSamplingInterval",e[e.UnsupportedBrowser=21]="UnsupportedBrowser",e[e.UnsupportedOperatingSystem=22]="UnsupportedOperatingSystem",e[e.JSSelfProfilingAPIUnavailable=23]="JSSelfProfilingAPIUnavailable",e[e.RetrievedUserAgent=24]="RetrievedUserAgent",e[e.NullJSCPUProfilerStartCalled=25]="NullJSCPUProfilerStartCalled",e[e.NullJSCPUProfilerStopCalled=26]="NullJSCPUProfilerStopCalled",e[e.NullOrUndefinedProfilerInitOptions=27]="NullOrUndefinedProfilerInitOptions",e[e.MaxBufferSizeFixedToDefaultSize=28]="MaxBufferSizeFixedToDefaultSize",e[e.MaxBufferSizeWasNotFixedBeforeRetrieval=29]="MaxBufferSizeWasNotFixedBeforeRetrieval",e[e.ProfilerNotPresentInJSEnvironment=30]="ProfilerNotPresentInJSEnvironment",e[e.SamplingIntervalValidationCheckFailed=31]="SamplingIntervalValidationCheckFailed",e[e.MaxBufferValidationFailed=32]="MaxBufferValidationFailed",e[e.MaxBufferSizeNotSpecified=33]="MaxBufferSizeNotSpecified",e[e.MaxBufferSizeLessThanOrEqualToZero=34]="MaxBufferSizeLessThanOrEqualToZero",e[e.ManualProfilerValidationFailed=35]="ManualProfilerValidationFailed",e[e.ProfilingIntervalValidationFailed=36]="ProfilingIntervalValidationFailed",e[e.ProfilingIntervalNullOrUndefined=37]="ProfilingIntervalNullOrUndefined",e[e.ProfilingIntervalLessThanOrEqualToZero=38]="ProfilingIntervalLessThanOrEqualToZero",e[e.ProfilingIntervalLessThanSamplingInterval=39]="ProfilingIntervalLessThanSamplingInterval",e[e.TimedProfilerValidationFailed=40]="TimedProfilerValidationFailed",e[e.IdleIntervalValidationFailed=41]="IdleIntervalValidationFailed",e[e.IdleIntervalIsNullOrUndefined=42]="IdleIntervalIsNullOrUndefined",e[e.IdleIntervalIsLessThanOrEqualToZero=43]="IdleIntervalIsLessThanOrEqualToZero",e[e.PostProfilerStartCallbackSpecified=44]="PostProfilerStartCallbackSpecified",e[e.PreProfilerStartCheckFailed=45]="PreProfilerStartCheckFailed",e[e.MaxBufferSizeNotFixed=46]="MaxBufferSizeNotFixed",e[e.ProfilerAlreadyStarted=47]="ProfilerAlreadyStarted",e[e.ProfilerStartSucceeded=48]="ProfilerStartSucceeded",e[e.InvokingPostProfilerStartCallback=49]="InvokingPostProfilerStartCallback",e[e.PostProfilerStopCallbackSpecified=50]="PostProfilerStopCallbackSpecified",e[e.ProfilerInstanceIsUndefined=51]="ProfilerInstanceIsUndefined",e[e.ProfilerStopPromiseResolved=52]="ProfilerStopPromiseResolved",e[e.ProfilerStopPromiseRejected=53]="ProfilerStopPromiseRejected",e[e.PostProfilerStopCallbackInvoked=54]="PostProfilerStopCallbackInvoked",e[e.PostTimedStartProfilerStartCallbackInvoked=55]="PostTimedStartProfilerStartCallbackInvoked",e[e.ProfilingIntervalIsUndefined=56]="ProfilingIntervalIsUndefined",e[e.TimerJobToStopProfilerSet=57]="TimerJobToStopProfilerSet",e[e.TimedProfilerStopCallbackInvoked=58]="TimedProfilerStopCallbackInvoked",e[e.TimedProfilerIsBeingStoppedManually=59]="TimedProfilerIsBeingStoppedManually",e[e.ProfilerStartPromiseCreated=60]="ProfilerStartPromiseCreated",e[e.ProfilerStopGoingToBeInvoked=61]="ProfilerStopGoingToBeInvoked",e[e.SamplingIntervalUsedForStartingProfiler=62]="SamplingIntervalUsedForStartingProfiler",e[e.MaxBufferSize=63]="MaxBufferSize",e[e.NoProfilerInstanceBuilt=64]="NoProfilerInstanceBuilt",e[e.ProfilerInitOptionsValidationFailed=65]="ProfilerInitOptionsValidationFailed",e[e.UnableToFixUpProfilerInitOptions=66]="UnableToFixUpProfilerInitOptions",e[e.ProfilingIsNotEnabled=67]="ProfilingIsNotEnabled",e[e.ProfilingIsNotSupportedEnvironment=68]="ProfilingIsNotSupportedEnvironment",e[e.FeatureCheckerIsNullOrUndefined=69]="FeatureCheckerIsNullOrUndefined",e[e.NullSupportedEnvironmentCheckerInvoked=70]="NullSupportedEnvironmentCheckerInvoked",e[e.NullJSCPUProfilerInitOptionsValidatorInvoked=71]="NullJSCPUProfilerInitOptionsValidatorInvoked",e[e.NullJSCPUProfilerFactoryInvoked=72]="NullJSCPUProfilerFactoryInvoked",e[e.NullOrUndefinedIdleInterval=73]="NullOrUndefinedIdleInterval",e[e.CreateProfilerDidNotSubscribeProfilerObserver=74]="CreateProfilerDidNotSubscribeProfilerObserver",e[e.NullOrUndefinedCustomPropertiesRetriever=75]="NullOrUndefinedCustomPropertiesRetriever",e[e.NullOrUndefinedCustomProperties=76]="NullOrUndefinedCustomProperties",e[e.CustomPropertyKeyIsNull=77]="CustomPropertyKeyIsNull",e[e.CustomPropertyValueIsNull=78]="CustomPropertyValueIsNull",e[e.RetrieveCallTreesCalledBeforeTransform=79]="RetrieveCallTreesCalledBeforeTransform",e[e.RetrieveBuiltCallTreesBeforeBuildCallTrees=80]="RetrieveBuiltCallTreesBeforeBuildCallTrees",e[e.RetrieveStacksCalledBeforeBuildStacks=81]="RetrieveStacksCalledBeforeBuildStacks",e[e.ExecutionStacksNeverBuilt=82]="ExecutionStacksNeverBuilt",e[e.PeekOnNullExecutionStackInvoked=83]="PeekOnNullExecutionStackInvoked",e[e.PopOnNullExecutionStackInvoked=84]="PopOnNullExecutionStackInvoked",e[e.EmptyStacks=85]="EmptyStacks",e[e.EmptyFrames=86]="EmptyFrames",e[e.ForciblyExitingLoopWhileBuildingStack=87]="ForciblyExitingLoopWhileBuildingStack",e[e.RetrieveStackCalledBeforeBuildStack=88]="RetrieveStackCalledBeforeBuildStack",e[e.ExecutionStackNeverBuilt=89]="ExecutionStackNeverBuilt",e[e.ConvertStacksToCallTreesNeverCalled=90]="ConvertStacksToCallTreesNeverCalled",e[e.ConvertStackToCallTreeNeverCalled=91]="ConvertStackToCallTreeNeverCalled",e[e.NullFrameNodeCreated=92]="NullFrameNodeCreated",e[e.InvalidSampleIndex=93]="InvalidSampleIndex",e[e.InvalidFrameNodeStartTime=94]="InvalidFrameNodeStartTime",e[e.InvalidFrameNodeExecutionTime=95]="InvalidFrameNodeExecutionTime",e[e.InvalidNewFrameNodeExecutionTime=96]="InvalidNewFrameNodeExecutionTime",e[e.NegativeSubTreeExecutionTime=97]="NegativeSubTreeExecutionTime",e[e.FixerForProfilerType=98]="FixerForProfilerType",e[e.MissingProfilerInitOptionsFixerImplementation=99]="MissingProfilerInitOptionsFixerImplementation",e[e.LoopBackFixerFixProfilerInitOptionsInvoked=100]="LoopBackFixerFixProfilerInitOptionsInvoked",e[e.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked=101]="LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked",e[e.MissingDeObfuscationEndpoint=102]="MissingDeObfuscationEndpoint",e[e.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling=103]="NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling",e[e.NullCallTreeDepthFirstIteratorInvoked=104]="NullCallTreeDepthFirstIteratorInvoked",e[e.EmptySamplesArrayPassedToFilter=105]="EmptySamplesArrayPassedToFilter",e[e.NullCallTreeLeftMostNodesIteratorInvoked=106]="NullCallTreeLeftMostNodesIteratorInvoked",e[e.NullCallTreeRightMostNodesIteratorInvoked=107]="NullCallTreeRightMostNodesIteratorInvoked",e[e.MissingIsProfilingEnabledOnFeatureChecker=108]="MissingIsProfilingEnabledOnFeatureChecker",e[e.FeatureCheckerIsProfilingEnabledNotAFunction=109]="FeatureCheckerIsProfilingEnabledNotAFunction",e[e.NullCallTreeGetTotalExecutionTimeInvoked=110]="NullCallTreeGetTotalExecutionTimeInvoked",e[e.NullCallTreeGetCustomPropertiesInvoked=111]="NullCallTreeGetCustomPropertiesInvoked",e[e.SerializedCallTrees=112]="SerializedCallTrees",e[e.NullCallTreeIteratorImplGetNextInvoked=113]="NullCallTreeIteratorImplGetNextInvoked",e[e.NullCallTreeIteratorImplHasMoreInvoked=114]="NullCallTreeIteratorImplHasMoreInvoked",e[e.MissingProfilerNameForProfilerType=115]="MissingProfilerNameForProfilerType",e[e.ExpectedOnlyOneNodePerLevelInCallTree=116]="ExpectedOnlyOneNodePerLevelInCallTree",e[e.MissingWebWorkerSourceURL=117]="MissingWebWorkerSourceURL",e[e.MaxNumberOfProfilersAlreadyCreated=118]="MaxNumberOfProfilersAlreadyCreated",e[e.WebWorkerAPINotAvailable=119]="WebWorkerAPINotAvailable",e[e.SamplingIntervalAboveMaxSamplingInterval=120]="SamplingIntervalAboveMaxSamplingInterval",e[e.UnableToBootWebWorker=121]="UnableToBootWebWorker",e[e.WorkerInstanceNotFound=122]="WorkerInstanceNotFound",e[e.IdNotFoundInMessageToWorker=123]="IdNotFoundInMessageToWorker",e[e.DataNotFoundInMessageToWorker=124]="DataNotFoundInMessageToWorker",e[e.IdNotFoundInMessageFromWorker=125]="IdNotFoundInMessageFromWorker",e[e.DataNotFoundInMessageFromWorker=126]="DataNotFoundInMessageFromWorker",e[e.IdNotFoundInWorkerLogMessage=127]="IdNotFoundInWorkerLogMessage",e[e.MessageNotFoundInWorkerLogMessage=128]="MessageNotFoundInWorkerLogMessage",e[e.UnknownMessageFromWorker=129]="UnknownMessageFromWorker",e[e.UnknownLogMessageFromWorker=130]="UnknownLogMessageFromWorker",e[e.Operation=131]="Operation",e[e.FallbackResultReturned=132]="FallbackResultReturned",e[e.UnknownMessageToWorker=133]="UnknownMessageToWorker",e[e.ExceptionEncounteredInWorker=134]="ExceptionEncounteredInWorker",e[e.MissingDeObfuscationInfoInTraceProcessingInfo=135]="MissingDeObfuscationInfoInTraceProcessingInfo",e[e.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo=136]="MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo",e[e.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo=137]="MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo",e[e.MissingCallTreeFilteringThresholdInMs=138]="MissingCallTreeFilteringThresholdInMs",e[e.InvalidMessageReceivedByWorker=139]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=140]="InvalidProcessTraceMessageReceivedByWorker",e[e.MissingTraceInTraceProcessingInfo=141]="MissingTraceInTraceProcessingInfo",e[e.SerializedCallTreesMissingInProcessorResult=142]="SerializedCallTreesMissingInProcessorResult",e[e.LogsMissingInProcessorResult=143]="LogsMissingInProcessorResult",e[e.UndefinedWebWorkerCompletionCallback=144]="UndefinedWebWorkerCompletionCallback",e[e.LogsMissingInErrorsFromWebWorker=145]="LogsMissingInErrorsFromWebWorker",e[e.UndefinedErrorCallback=146]="UndefinedErrorCallback",e[e.UndefinedTraceProcessingInfoToReturnBack=147]="UndefinedTraceProcessingInfoToReturnBack",e[e.WebWorkerAlreadyStarted=148]="WebWorkerAlreadyStarted",e[e.WebWorkerErrorFallingBackToMainEventLoop=149]="WebWorkerErrorFallingBackToMainEventLoop",e[e.CustomPropertiesMissingInTrace=150]="CustomPropertiesMissingInTrace",e[e.ProfilerTraceMissingInTrace=151]="ProfilerTraceMissingInTrace",e[e.ProfilerTraceStartTimestampMissingInTrace=152]="ProfilerTraceStartTimestampMissingInTrace",e[e.ProfilerPropertiesMissingInTrace=153]="ProfilerPropertiesMissingInTrace",e[e.ElapsedProfilingTimeMissingInTrace=154]="ElapsedProfilingTimeMissingInTrace",e[e.InvalidProfilerTraceToProcess=155]="InvalidProfilerTraceToProcess",e[e.WebWorkerError=156]="WebWorkerError",e[e.WebWorkerTraceProcessingInfoMissingToReturnOnError=157]="WebWorkerTraceProcessingInfoMissingToReturnOnError",e[e.WebWorkerErrorCallbackNotRegistered=158]="WebWorkerErrorCallbackNotRegistered",e[e.ProfilerTrace=159]="ProfilerTrace",e[e.MissingCallToFilterCallTrees=160]="MissingCallToFilterCallTrees",e[e.MissingCallToFilterFrames=161]="MissingCallToFilterFrames",e[e.NullCallTreeFramesFiltererFilterFramesInvoked=162]="NullCallTreeFramesFiltererFilterFramesInvoked",e[e.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked=163]="NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked",e[e.NullCallTreeGetFramesFiltererInvoked=164]="NullCallTreeGetFramesFiltererInvoked",e[e.FilterFrameWithNoParent=165]="FilterFrameWithNoParent",e[e.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo=166]="MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo",e[e.NoCallTreesToSend=167]="NoCallTreesToSend",e[e.OperationLogMessageFiltererInitOptions=168]="OperationLogMessageFiltererInitOptions",e[e.ErrorFromWorker=169]="ErrorFromWorker",e[e.WebWorkerTerminated=170]="WebWorkerTerminated",e[e.NullOrUndefinedProfilerEvent=171]="NullOrUndefinedProfilerEvent",e[e.UnknownProfilerEventId=172]="UnknownProfilerEventId",e[e.NullOrUndefinedProfilerTrace=173]="NullOrUndefinedProfilerTrace",e[e.OperationLogMessageFilteringCriteriaMissingInTrace=174]="OperationLogMessageFilteringCriteriaMissingInTrace",e[e.NullOrUndefinedProfilerObserverPassedInForSubscribe=175]="NullOrUndefinedProfilerObserverPassedInForSubscribe",e[e.NullOrUndefinedProfilerEventIds=176]="NullOrUndefinedProfilerEventIds",e[e.UnexpectedUndefinedProfilerEventIds=177]="UnexpectedUndefinedProfilerEventIds",e[e.NullOrUndefinedProfilerObserverPassedInForUnsubscribe=178]="NullOrUndefinedProfilerObserverPassedInForUnsubscribe",e[e.NullOrUndefinedProfilerEventToUnsubscribe=179]="NullOrUndefinedProfilerEventToUnsubscribe",e[e.ProfilerObserverWasNeverSubscribed=180]="ProfilerObserverWasNeverSubscribed",e[e.UnexpectedNullOrUndefinedSubscribedProfilerEventIds=181]="UnexpectedNullOrUndefinedSubscribedProfilerEventIds",e[e.ProfilerObserverNeverSubscribedForProfilerEventId=182]="ProfilerObserverNeverSubscribedForProfilerEventId",e[e.CallTreeCustomPropertiesRetrieversMissingInTrace=183]="CallTreeCustomPropertiesRetrieversMissingInTrace",e[e.NullOrUndefinedItemToSubscribe=184]="NullOrUndefinedItemToSubscribe",e[e.NullOrUndefinedItemForUnsubscribe=185]="NullOrUndefinedItemForUnsubscribe",e[e.ItemWasNeverSubscribed=186]="ItemWasNeverSubscribed",e[e.NumberOfCallTreesFiltererByCustomFilterers=187]="NumberOfCallTreesFiltererByCustomFilterers",e[e.ProcessTraceParamsIsNullOrUndefined=188]="ProcessTraceParamsIsNullOrUndefined",e[e.CurrentTraceBeingProcessedNullOrUndefined=189]="CurrentTraceBeingProcessedNullOrUndefined",e[e.TraceIdMissingInTrace=190]="TraceIdMissingInTrace",e[e.UndefinedStoredProfilerTraceProcessingWorker=191]="UndefinedStoredProfilerTraceProcessingWorker",e[e.BailingOutOnNullProfiler=192]="BailingOutOnNullProfiler",e[e.NotProcessingCapturedTraceDueToUserBeingIdle=193]="NotProcessingCapturedTraceDueToUserBeingIdle",e[e.NullCallTreeGetReconstructableTreeIteratorInvoked=194]="NullCallTreeGetReconstructableTreeIteratorInvoked",e[e.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace=195]="GetCustomPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetResourcesCalledOnNullJSCPUProfilerTrace=196]="GetResourcesCalledOnNullJSCPUProfilerTrace",e[e.GetFramesCalledOnNullJSCPUProfilerTrace=197]="GetFramesCalledOnNullJSCPUProfilerTrace",e[e.GetStacksCalledOnNullJSCPUProfilerTrace=198]="GetStacksCalledOnNullJSCPUProfilerTrace",e[e.GetSamplesCalledOnNullJSCPUProfilerTrace=199]="GetSamplesCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace=200]="GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace=201]="GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace=202]="GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace",e[e.RemoveQueryParamsFromResourceURLsNeverCalled=203]="RemoveQueryParamsFromResourceURLsNeverCalled",e[e.SerializeCallTreeNeverCalled=204]="SerializeCallTreeNeverCalled",e[e.ConvertToJSONStringWasNeverCalled=205]="ConvertToJSONStringWasNeverCalled",e[e.NullJSCPUProfilerSubscribeProfilerObserverCalled=206]="NullJSCPUProfilerSubscribeProfilerObserverCalled",e[e.NullJSCPUProfilerUnsubscribeProfilerObserverCalled=207]="NullJSCPUProfilerUnsubscribeProfilerObserverCalled",e[e.NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled=208]="NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled",e[e.NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled=209]="NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled",e[e.NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled=210]="NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled",e[e.NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled=211]="NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled",e[e.NullJSCPUProfilerRequestProfilerTraceProcessingCalled=212]="NullJSCPUProfilerRequestProfilerTraceProcessingCalled",e[e.UnableToRetrieveCompressedBlob=213]="UnableToRetrieveCompressedBlob",e[e.UnableToRetrieveArrayBufferFromCompressedBlob=214]="UnableToRetrieveArrayBufferFromCompressedBlob",e[e.CompressionStreamAPIIsNotAvailable=215]="CompressionStreamAPIIsNotAvailable",e[e.WebWorkerSource=216]="WebWorkerSource",e[e.WebWorkerCreationSucceeded=217]="WebWorkerCreationSucceeded",e[e.WebWorkerCreationFailed=218]="WebWorkerCreationFailed",e[e.WorkerNotRunning=219]="WorkerNotRunning",e[e.FailedToCompressMultipleCallTreesDeobfuscationRequest=220]="FailedToCompressMultipleCallTreesDeobfuscationRequest",e[e.FailedToCompressIndividualCallTreeDeobfuscationRequest=221]="FailedToCompressIndividualCallTreeDeobfuscationRequest",e[e.NullStringCompressorInvoked=222]="NullStringCompressorInvoked",e[e.UnknownStoredWebWorkerRequestId=223]="UnknownStoredWebWorkerRequestId",e[e.UnknownWebWorkerRequestId=224]="UnknownWebWorkerRequestId",e[e.MessageFromWorkerIsNullorUndefined=225]="MessageFromWorkerIsNullorUndefined",e[e.MessageFromWorkerNotObject=226]="MessageFromWorkerNotObject",e[e.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError=227]="UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError",e[e.WebWorkerInitializationError=228]="WebWorkerInitializationError",e[e.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError=229]="UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError",e[e.StartWorkerInvokedOnNullWorker=230]="StartWorkerInvokedOnNullWorker",e[e.ProcessRequestInvokedOnNullWorker=231]="ProcessRequestInvokedOnNullWorker",e[e.ProcessRequestForProcessTraceFailed=232]="ProcessRequestForProcessTraceFailed",e[e.GetWorkerIdInvokedOnNullWorker=233]="GetWorkerIdInvokedOnNullWorker",e[e.UnknownWebWorkerErrorId=234]="UnknownWebWorkerErrorId",e[e.InvalidTraceReceivedByWorker=235]="InvalidTraceReceivedByWorker",e[e.UnknownMessageIdReceivedByWorker=236]="UnknownMessageIdReceivedByWorker",e[e.WorkerIDBeingSetToBusyNotPresentInIdleWorkers=237]="WorkerIDBeingSetToBusyNotPresentInIdleWorkers",e[e.WorkerIDBeingSetToIdleNotPresentInBusyWorkers=238]="WorkerIDBeingSetToIdleNotPresentInBusyWorkers",e[e.UnknownWorkerIDBeingTerminated=239]="UnknownWorkerIDBeingTerminated",e[e.ProcessRequestForCompressSerializedProfileFailed=240]="ProcessRequestForCompressSerializedProfileFailed",e[e.UndefinedCompressionInfoToReturnBack=241]="UndefinedCompressionInfoToReturnBack",e[e.OutputStringMissingInMessageFromWorker=242]="OutputStringMissingInMessageFromWorker",e[e.LogsMissingInMessageFromWorker=243]="LogsMissingInMessageFromWorker",e[e.MessageToWorkerIsNullorUndefined=244]="MessageToWorkerIsNullorUndefined",e[e.MessageToWorkerNotObject=245]="MessageToWorkerNotObject",e[e.SerializedProfileMissingInCompressSerializedProfileMessage=246]="SerializedProfileMissingInCompressSerializedProfileMessage",e[e.MissingShouldRecordFrameCountsInTraceProcessingInfo=247]="MissingShouldRecordFrameCountsInTraceProcessingInfo",e[e.MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo=248]="MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo",e[e.ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace=249]="ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace",e[e.ShouldCompressSerializedCallTreesMissingInTrace=250]="ShouldCompressSerializedCallTreesMissingInTrace",e[e.WorkerReceivedMessageIsNullOrUndefined=251]="WorkerReceivedMessageIsNullOrUndefined",e[e.WorkerReceivedMessageIsNotAnObject=252]="WorkerReceivedMessageIsNotAnObject",e[e.TraceIsNull=253]="TraceIsNull",e[e.TraceIsNotObject=254]="TraceIsNotObject",e[e.InvalidCompressSerializedProfileMessageReceivedByWorker=255]="InvalidCompressSerializedProfileMessageReceivedByWorker",e[e.SkippingLoggingSerializedCallTrees=256]="SkippingLoggingSerializedCallTrees",e[e.NoSerializedCallTreesToLog=257]="NoSerializedCallTreesToLog",e[e.InvalidConditionalProfileProcessingRequest=258]="InvalidConditionalProfileProcessingRequest",e[e.TraceRequestingEventDrivenCallTreeFiltererNotSet=259]="TraceRequestingEventDrivenCallTreeFiltererNotSet",e[e.FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents=260]="FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents",e[e.NullTrustedTypesPolicyFactoryCreateScriptURLInvoked=261]="NullTrustedTypesPolicyFactoryCreateScriptURLInvoked",e[e.TrustedTypesPolicyFactoryCreateScriptURLReturnedNull=262]="TrustedTypesPolicyFactoryCreateScriptURLReturnedNull"}(os||(os={}));class Es{logMissingProfilerImplementation(){this.sendLogMessageToProcessors({id:os.MissingProfilerImplementation,message:void 0,context:this.logContext})}logFailingValidationsInProfilerFactory(){this.sendLogMessageToProcessors({id:os.FailingValidationsInProfilerFactory,message:void 0,context:this.logContext})}logWindowMissingInJSEnvironment(){this.sendLogMessageToProcessors({id:os.WindowMissingInJSEnvironment,message:void 0,context:this.logContext})}logWindowPropertyNameChecked(e){this.sendLogMessageToProcessors({id:os.WindowPropertyNameChecked,message:e,context:this.logContext})}logUserAgentToParseChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:os.UserAgentToParseChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logChromeNotPresentInUserAgent(){this.sendLogMessageToProcessors({id:os.ChromeNotPresentInUserAgent,message:void 0,context:this.logContext})}logUnableToIsolateChromeInformationFromUserAgent(){this.sendLogMessageToProcessors({id:os.UnableToIsolateChromeInformationFromUserAgent,message:void 0,context:this.logContext})}logUnableToExtractChromeVersionInformation(){this.sendLogMessageToProcessors({id:os.UnableToExtractChromeVersionInformation,message:void 0,context:this.logContext})}logUnableToParseChromeMajorVersionString(){this.sendLogMessageToProcessors({id:os.UnableToParseChromeMajorVersionString,message:void 0,context:this.logContext})}logParsedChromiumMajorVersionNumber(e){this.sendLogMessageToProcessors({id:os.ParsedChromiumMajorVersionNumber,message:e,context:this.logContext})}logUserAgentToCheckForChromiumBrowser(e){this.sendLogMessageToProcessors({id:os.UserAgentToCheckForChromiumBrowser,message:e,context:this.logContext})}logEmptyUserAgentString(){this.sendLogMessageToProcessors({id:os.EmptyUserAgentString,message:void 0,context:this.logContext})}logBrowserUserAgentNotChromiumBased(){this.sendLogMessageToProcessors({id:os.BrowserUserAgentNotChromiumBased,message:void 0,context:this.logContext})}logUserAgentSpoofedToBeChromium(){this.sendLogMessageToProcessors({id:os.UserAgentSpoofedToBeChromium,message:void 0,context:this.logContext})}logBrowserNotChromiumBasedBrowser(){this.sendLogMessageToProcessors({id:os.BrowserNotChromiumBasedBrowser,message:void 0,context:this.logContext})}logUnsupportedChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:os.UnsupportedChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logProfilerInitOptionsNullOrUndefined(){this.sendLogMessageToProcessors({id:os.ProfilerInitOptionsNullOrUndefined,message:void 0,context:this.logContext})}logSamplingIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:os.SamplingIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e,r){this.sendLogMessageToProcessors({id:os.SamplingIntervalLessThanMinimumSupportedSamplingInterval,message:{samplingInterval:e,minimumSupportedSamplingInterval:r},context:this.logContext})}logUnsupportedBrowser(){this.sendLogMessageToProcessors({id:os.UnsupportedBrowser,message:void 0,context:this.logContext})}logUnsupportedOperatingSystem(){this.sendLogMessageToProcessors({id:os.UnsupportedOperatingSystem,message:void 0,context:this.logContext})}logJSSelfProfilingAPIUnavailable(){this.sendLogMessageToProcessors({id:os.JSSelfProfilingAPIUnavailable,message:void 0,context:this.logContext})}logRetrievedUserAgent(e){this.sendLogMessageToProcessors({id:os.RetrievedUserAgent,message:e,context:this.logContext})}logNullJSCPUProfilerStartCalled(){this.sendLogMessageToProcessors({id:os.NullJSCPUProfilerStartCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerStopCalled(){this.sendLogMessageToProcessors({id:os.NullJSCPUProfilerStopCalled,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerInitOptions(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerInitOptions,message:void 0,context:this.logContext})}logMaxBufferSizeFixedToDefaultSize(){this.sendLogMessageToProcessors({id:os.MaxBufferSizeFixedToDefaultSize,message:void 0,context:this.logContext})}logMaxBufferSizeWasNotFixedBeforeRetrieval(){this.sendLogMessageToProcessors({id:os.MaxBufferSizeWasNotFixedBeforeRetrieval,message:void 0,context:this.logContext})}logProfilerNotPresentInJSEnvironment(){this.sendLogMessageToProcessors({id:os.ProfilerNotPresentInJSEnvironment,message:void 0,context:this.logContext})}logSamplingIntervalValidationCheckFailed(){this.sendLogMessageToProcessors({id:os.SamplingIntervalValidationCheckFailed,message:void 0,context:this.logContext})}logMaxBufferValidationFailed(){this.sendLogMessageToProcessors({id:os.MaxBufferValidationFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotSpecified(){this.sendLogMessageToProcessors({id:os.MaxBufferSizeNotSpecified,message:void 0,context:this.logContext})}logMaxBufferSizeLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:os.MaxBufferSizeLessThanOrEqualToZero,message:void 0,context:this.logContext})}logManualProfilerValidationFailed(){this.sendLogMessageToProcessors({id:os.ManualProfilerValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalValidationFailed(){this.sendLogMessageToProcessors({id:os.ProfilingIntervalValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalNullOrUndefined(){this.sendLogMessageToProcessors({id:os.ProfilingIntervalNullOrUndefined,message:void 0,context:this.logContext})}logProfilingIntervalLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:os.ProfilingIntervalLessThanOrEqualToZero,message:void 0,context:this.logContext})}logProfilingIntervalLessThanSamplingInterval(){this.sendLogMessageToProcessors({id:os.ProfilingIntervalLessThanSamplingInterval,message:void 0,context:this.logContext})}logTimedProfilerValidationFailed(){this.sendLogMessageToProcessors({id:os.TimedProfilerValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalValidationFailed(){this.sendLogMessageToProcessors({id:os.IdleIntervalValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalIsNullOrUndefined(){this.sendLogMessageToProcessors({id:os.IdleIntervalIsNullOrUndefined,message:void 0,context:this.logContext})}logIdleIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:os.IdleIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logPostProfilerStartCallbackSpecified(){this.sendLogMessageToProcessors({id:os.PostProfilerStartCallbackSpecified,message:void 0,context:this.logContext})}logPreProfilerStartCheckFailed(){this.sendLogMessageToProcessors({id:os.PreProfilerStartCheckFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotFixed(){this.sendLogMessageToProcessors({id:os.MaxBufferSizeNotFixed,message:void 0,context:this.logContext})}logBailingOutOnNullProfiler(){this.sendLogMessageToProcessors({id:os.BailingOutOnNullProfiler,message:void 0,context:this.logContext})}logProfilerAlreadyStarted(){this.sendLogMessageToProcessors({id:os.ProfilerAlreadyStarted,message:void 0,context:this.logContext})}logProfilerStartSucceeded(){this.sendLogMessageToProcessors({id:os.ProfilerStartSucceeded,message:void 0,context:this.logContext})}logInvokingPostProfilerStartCallback(){this.sendLogMessageToProcessors({id:os.InvokingPostProfilerStartCallback,message:void 0,context:this.logContext})}logPostProfilerStopCallbackSpecified(){this.sendLogMessageToProcessors({id:os.PostProfilerStopCallbackSpecified,message:void 0,context:this.logContext})}logProfilerInstanceIsUndefined(){this.sendLogMessageToProcessors({id:os.ProfilerInstanceIsUndefined,message:void 0,context:this.logContext})}logProfilerStopPromiseResolved(){this.sendLogMessageToProcessors({id:os.ProfilerStopPromiseResolved,message:void 0,context:this.logContext})}logProfilerStopPromiseRejected(e){this.sendLogMessageToProcessors({id:os.ProfilerStopPromiseRejected,message:e,context:this.logContext})}logPostProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:os.PostProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToUserBeingIdle(){this.sendLogMessageToProcessors({id:os.NotProcessingCapturedTraceDueToUserBeingIdle,message:void 0,context:this.logContext})}logPostTimedStartProfilerStartCallbackInvoked(){this.sendLogMessageToProcessors({id:os.PostTimedStartProfilerStartCallbackInvoked,message:void 0,context:this.logContext})}logProfilingIntervalIsUndefined(){this.sendLogMessageToProcessors({id:os.ProfilingIntervalIsUndefined,message:void 0,context:this.logContext})}logTimerJobToStopProfilerSet(){this.sendLogMessageToProcessors({id:os.TimerJobToStopProfilerSet,message:void 0,context:this.logContext})}logTimedProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:os.TimedProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logTimedProfilerIsBeingStoppedManually(){this.sendLogMessageToProcessors({id:os.TimedProfilerIsBeingStoppedManually,message:void 0,context:this.logContext})}logProfilerStartPromiseCreated(){this.sendLogMessageToProcessors({id:os.ProfilerStartPromiseCreated,message:void 0,context:this.logContext})}logProfilerStopGoingToBeInvoked(){this.sendLogMessageToProcessors({id:os.ProfilerStopGoingToBeInvoked,message:void 0,context:this.logContext})}logSamplingIntervalUsedForStartingProfiler(){this.sendLogMessageToProcessors({id:os.SamplingIntervalUsedForStartingProfiler,message:void 0,context:this.logContext})}logMaxBufferSize(e){this.sendLogMessageToProcessors({id:os.MaxBufferSize,message:e,context:this.logContext})}logNoProfilerInstanceBuilt(){this.sendLogMessageToProcessors({id:os.NoProfilerInstanceBuilt,message:void 0,context:this.logContext})}logProfilerInitOptionsValidationFailed(){this.sendLogMessageToProcessors({id:os.ProfilerInitOptionsValidationFailed,message:void 0,context:this.logContext})}logUnableToFixUpProfilerInitOptions(){this.sendLogMessageToProcessors({id:os.UnableToFixUpProfilerInitOptions,message:void 0,context:this.logContext})}logProfilingIsNotEnabled(){this.sendLogMessageToProcessors({id:os.ProfilingIsNotEnabled,message:void 0,context:this.logContext})}logProfilingIsNotSupportedEnvironment(){this.sendLogMessageToProcessors({id:os.ProfilingIsNotSupportedEnvironment,message:void 0,context:this.logContext})}logFeatureCheckerIsNullOrUndefined(){this.sendLogMessageToProcessors({id:os.FeatureCheckerIsNullOrUndefined,message:void 0,context:this.logContext})}logNullSupportedEnvironmentCheckerInvoked(){this.sendLogMessageToProcessors({id:os.NullSupportedEnvironmentCheckerInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerInitOptionsValidatorInvoked(){this.sendLogMessageToProcessors({id:os.NullJSCPUProfilerInitOptionsValidatorInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerFactoryInvoked(){this.sendLogMessageToProcessors({id:os.NullJSCPUProfilerFactoryInvoked,message:void 0,context:this.logContext})}logNullOrUndefinedIdleInterval(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedIdleInterval,message:void 0,context:this.logContext})}logCreateProfilerDidNotSubscribeProfilerObserver(){this.sendLogMessageToProcessors({id:os.CreateProfilerDidNotSubscribeProfilerObserver,message:void 0,context:this.logContext})}logNullOrUndefinedCustomPropertiesRetriever(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedCustomPropertiesRetriever,message:void 0,context:this.logContext})}logNullOrUndefinedCustomProperties(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedCustomProperties,message:void 0,context:this.logContext})}logCustomPropertyKeyIsNull(){this.sendLogMessageToProcessors({id:os.CustomPropertyKeyIsNull,message:void 0,context:this.logContext})}logCustomPropertyValueIsNull(){this.sendLogMessageToProcessors({id:os.CustomPropertyValueIsNull,message:void 0,context:this.logContext})}logRetrieveCallTreesCalledBeforeTransform(){this.sendLogMessageToProcessors({id:os.RetrieveCallTreesCalledBeforeTransform,message:void 0,context:this.logContext})}logRetrieveBuiltCallTreesBeforeBuildCallTrees(){this.sendLogMessageToProcessors({id:os.RetrieveBuiltCallTreesBeforeBuildCallTrees,message:void 0,context:this.logContext})}logRetrieveStacksCalledBeforeBuildStacks(){this.sendLogMessageToProcessors({id:os.RetrieveStacksCalledBeforeBuildStacks,message:void 0,context:this.logContext})}logExecutionStacksNeverBuilt(){this.sendLogMessageToProcessors({id:os.ExecutionStacksNeverBuilt,message:void 0,context:this.logContext})}logPeekOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:os.PeekOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logPopOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:os.PopOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logEmptyStacks(){this.sendLogMessageToProcessors({id:os.EmptyStacks,message:void 0,context:this.logContext})}logEmptyFrames(){this.sendLogMessageToProcessors({id:os.EmptyFrames,message:void 0,context:this.logContext})}logForciblyExitingLoopWhileBuildingStack(){this.sendLogMessageToProcessors({id:os.ForciblyExitingLoopWhileBuildingStack,message:void 0,context:this.logContext})}logRetrieveStackCalledBeforeBuildStack(){this.sendLogMessageToProcessors({id:os.RetrieveStackCalledBeforeBuildStack,message:void 0,context:this.logContext})}logExecutionStackNeverBuilt(){this.sendLogMessageToProcessors({id:os.ExecutionStackNeverBuilt,message:void 0,context:this.logContext})}logConvertStacksToCallTreesNeverCalled(){this.sendLogMessageToProcessors({id:os.ConvertStacksToCallTreesNeverCalled,message:void 0,context:this.logContext})}logConvertStackToCallTreeNeverCalled(){this.sendLogMessageToProcessors({id:os.ConvertStackToCallTreeNeverCalled,message:void 0,context:this.logContext})}logNullFrameNodeCreated(){this.sendLogMessageToProcessors({id:os.NullFrameNodeCreated,message:void 0,context:this.logContext})}logInvalidSampleIndex(){this.sendLogMessageToProcessors({id:os.InvalidSampleIndex,message:void 0,context:this.logContext})}logInvalidFrameNodeStartTime(){this.sendLogMessageToProcessors({id:os.InvalidFrameNodeStartTime,message:void 0,context:this.logContext})}logInvalidFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:os.InvalidFrameNodeExecutionTime,message:void 0,context:this.logContext})}logInvalidNewFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:os.InvalidNewFrameNodeExecutionTime,message:void 0,context:this.logContext})}logNegativeSubTreeExecutionTime(){this.sendLogMessageToProcessors({id:os.NegativeSubTreeExecutionTime,message:void 0,context:this.logContext})}logFixerForProfilerType(e){this.sendLogMessageToProcessors({id:os.FixerForProfilerType,message:e,context:this.logContext})}logMissingProfilerInitOptionsFixerImplementation(){this.sendLogMessageToProcessors({id:os.MissingProfilerInitOptionsFixerImplementation,message:void 0,context:this.logContext})}logLoopBackFixerFixProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:os.LoopBackFixerFixProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:os.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logMissingDeObfuscationEndpoint(){this.sendLogMessageToProcessors({id:os.MissingDeObfuscationEndpoint,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(){this.sendLogMessageToProcessors({id:os.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling,message:void 0,context:this.logContext})}logNullCallTreeDepthFirstIteratorInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeDepthFirstIteratorInvoked,message:void 0,context:this.logContext})}logEmptySamplesArrayPassedToFilter(){this.sendLogMessageToProcessors({id:os.EmptySamplesArrayPassedToFilter,message:void 0,context:this.logContext})}logNullCallTreeLeftMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeLeftMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logNullCallTreeRightMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeRightMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logMissingIsProfilingEnabledOnFeatureChecker(){this.sendLogMessageToProcessors({id:os.MissingIsProfilingEnabledOnFeatureChecker,message:void 0,context:this.logContext})}logFeatureCheckerIsProfilingEnabledNotAFunction(){this.sendLogMessageToProcessors({id:os.FeatureCheckerIsProfilingEnabledNotAFunction,message:void 0,context:this.logContext})}logNullCallTreeGetTotalExecutionTimeInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeGetTotalExecutionTimeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetCustomPropertiesInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeGetCustomPropertiesInvoked,message:void 0,context:this.logContext})}logNoCallTreesToSend(){this.sendLogMessageToProcessors({id:os.NoCallTreesToSend,message:void 0,context:this.logContext})}logSerializedCallTrees(e){this.sendLogMessageToProcessors({id:os.SerializedCallTrees,message:e,context:this.logContext})}logNullCallTreeIteratorImplGetNextInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeIteratorImplGetNextInvoked,message:void 0,context:this.logContext})}logNullCallTreeIteratorImplHasMoreInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeIteratorImplHasMoreInvoked,message:void 0,context:this.logContext})}logMissingProfilerNameForProfilerType(e){this.sendLogMessageToProcessors({id:os.MissingProfilerNameForProfilerType,message:e,context:this.logContext})}logExpectedOnlyOneNodePerLevelInCallTree(){this.sendLogMessageToProcessors({id:os.ExpectedOnlyOneNodePerLevelInCallTree,message:void 0,context:this.logContext})}logMissingWebWorkerSourceURL(){this.sendLogMessageToProcessors({id:os.MissingWebWorkerSourceURL,message:void 0,context:this.logContext})}logMaxNumberOfProfilersAlreadyCreated(){this.sendLogMessageToProcessors({id:os.MaxNumberOfProfilersAlreadyCreated,message:void 0,context:this.logContext})}logWebWorkerAPINotAvailable(){this.sendLogMessageToProcessors({id:os.WebWorkerAPINotAvailable,message:void 0,context:this.logContext})}logSamplingIntervalAboveMaxSamplingInterval(){this.sendLogMessageToProcessors({id:os.SamplingIntervalAboveMaxSamplingInterval,message:void 0,context:this.logContext})}logUnableToBootWebWorker(){this.sendLogMessageToProcessors({id:os.UnableToBootWebWorker,message:void 0,context:this.logContext})}logWorkerInstanceNotFound(){this.sendLogMessageToProcessors({id:os.WorkerInstanceNotFound,message:void 0,context:this.logContext})}logIdNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:os.IdNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:os.DataNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logIdNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:os.IdNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:os.DataNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logIdNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:os.IdNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logMessageNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:os.MessageNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logUnknownMessageFromWorker(e){this.sendLogMessageToProcessors({id:os.UnknownMessageFromWorker,message:void 0,context:this.logContext})}logUnknownLogMessageFromWorker(e){this.sendLogMessageToProcessors({id:os.UnknownLogMessageFromWorker,message:void 0,context:this.logContext})}logOperation(e,r,s,t,o,i,a,n){const l={operationName:e,parentOperationName:r,didOperationSucceed:s,measuredRunTime:t,didOperationFailUnexpectedly:o,logs:i,propertyBag:a,exception:n};this.sendLogMessageToProcessors({id:os.Operation,message:l,context:this.logContext})}logFallbackResultReturned(){this.sendLogMessageToProcessors({id:os.FallbackResultReturned,message:void 0,context:this.logContext})}logUnknownMessageToWorker(e){this.sendLogMessageToProcessors({id:os.FallbackResultReturned,message:e,context:this.logContext})}logErrorFromWorker(e){this.sendLogMessageToProcessors({id:os.ErrorFromWorker,message:e,context:this.logContext})}logExceptionEncounteredInWorker(e){this.sendLogMessageToProcessors({id:os.ExceptionEncounteredInWorker,message:e,context:this.logContext})}logMissingDeObfuscationInfoInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.MissingDeObfuscationInfoInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldRecordExpandedTimeStampsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingCallTreeFilteringThresholdInMsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.MissingCallTreeFilteringThresholdInMs,message:void 0,context:this.logContext})}logInvalidMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:os.InvalidMessageReceivedByWorker,message:void 0,context:this.logContext})}logInvalidProcessTraceMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:os.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logMissingTraceInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logSerializedCallTreesMissingInProcessorResult(){this.sendLogMessageToProcessors({id:os.SerializedCallTreesMissingInProcessorResult,message:void 0,context:this.logContext})}logLogsMissingInProcessorResult(){this.sendLogMessageToProcessors({id:os.LogsMissingInProcessorResult,message:void 0,context:this.logContext})}logUndefinedWebWorkerCompletionCallback(){this.sendLogMessageToProcessors({id:os.UndefinedWebWorkerCompletionCallback,message:void 0,context:this.logContext})}logLogsMissingInErrorsFromWebWorker(){this.sendLogMessageToProcessors({id:os.LogsMissingInErrorsFromWebWorker,message:void 0,context:this.logContext})}logUndefinedErrorCallback(){this.sendLogMessageToProcessors({id:os.UndefinedErrorCallback,message:void 0,context:this.logContext})}logUndefinedTraceProcessingInfoToReturnBack(){this.sendLogMessageToProcessors({id:os.UndefinedTraceProcessingInfoToReturnBack,message:void 0,context:this.logContext})}logWebWorkerErrorFallingBackToMainEventLoop(){this.sendLogMessageToProcessors({id:os.WebWorkerErrorFallingBackToMainEventLoop,message:void 0,context:this.logContext})}logWebWorkerAlreadyStarted(){this.sendLogMessageToProcessors({id:os.WebWorkerAlreadyStarted,message:void 0,context:this.logContext})}logWebWorkerTerminated(){this.sendLogMessageToProcessors({id:os.WebWorkerTerminated,message:void 0,context:this.logContext})}logCustomPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:os.CustomPropertiesMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceMissingInTrace(){this.sendLogMessageToProcessors({id:os.ProfilerTraceMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceStartTimestampMissingInTrace(){this.sendLogMessageToProcessors({id:os.ProfilerTraceStartTimestampMissingInTrace,message:void 0,context:this.logContext})}logProfilerPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:os.ProfilerPropertiesMissingInTrace,message:void 0,context:this.logContext})}logElapsedProfilingTimeMissingInTrace(){this.sendLogMessageToProcessors({id:os.ElapsedProfilingTimeMissingInTrace,message:void 0,context:this.logContext})}logInvalidProfilerTraceToProcess(){this.sendLogMessageToProcessors({id:os.InvalidProfilerTraceToProcess,message:void 0,context:this.logContext})}logWebWorkerError(e){this.sendLogMessageToProcessors({id:os.WebWorkerError,message:e,context:this.logContext})}logWebWorkerErrorCallbackNotRegistered(){this.sendLogMessageToProcessors({id:os.WebWorkerErrorCallbackNotRegistered,message:void 0,context:this.logContext})}logWebWorkerTraceProcessingInfoMissingToReturnOnError(){this.sendLogMessageToProcessors({id:os.WebWorkerTraceProcessingInfoMissingToReturnOnError,message:void 0,context:this.logContext})}logProfilerTrace(e,r){this.sendLogMessageToProcessors({id:os.ProfilerTrace,message:e,context:this.logContext,logOptions:{profilerTraceLoggingChunkSize:r}})}logMissingCallToFilterCallTrees(){this.sendLogMessageToProcessors({id:os.MissingCallToFilterCallTrees,message:void 0,context:this.logContext})}logMissingCallToFilterFrames(){this.sendLogMessageToProcessors({id:os.MissingCallToFilterFrames,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererFilterFramesInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeFramesFiltererFilterFramesInvoked,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetFramesFiltererInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeGetFramesFiltererInvoked,message:void 0,context:this.logContext})}logFilterFrameWithNoParent(){this.sendLogMessageToProcessors({id:os.FilterFrameWithNoParent,message:void 0,context:this.logContext})}subscribe(e){this.logMessageProcessors.push(e)}unsubscribe(e){this.logMessageProcessors=this.logMessageProcessors.filter((r=>r!==e))}sendLogMessageToProcessors(e){this.logMessageProcessors.forEach((r=>{r.processLogMessage(e)}))}logOperationLogMessageFiltererInitOptions(e,r,s){this.sendLogMessageToProcessors({id:os.OperationLogMessageFiltererInitOptions,message:{shouldAlwaysLogOperationsData:e,listOfOperationNamesToAlwaysLog:r,operationMeasuredRunTimeFilteringThresholdInMs:s},context:this.logContext})}logNullOrUndefinedProfilerEvent(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerEvent,message:void 0,context:this.logContext})}logUnknownProfilerEventId(e){this.sendLogMessageToProcessors({id:os.UnknownProfilerEventId,message:e,context:this.logContext})}logNullOrUndefinedProfilerTrace(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerTrace,message:void 0,context:this.logContext})}logOperationLogMessageFilteringCriteriaMissingInTrace(){this.sendLogMessageToProcessors({id:os.OperationLogMessageFilteringCriteriaMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForSubscribe(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerObserverPassedInForSubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logUnexpectedUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:os.UnexpectedUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerObserverPassedInForUnsubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventToUnsubscribe(){this.sendLogMessageToProcessors({id:os.NullOrUndefinedProfilerEventToUnsubscribe,message:void 0,context:this.logContext})}logProfilerObserverWasNeverSubscribed(){this.sendLogMessageToProcessors({id:os.ProfilerObserverWasNeverSubscribed,message:void 0,context:this.logContext})}logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(){this.sendLogMessageToProcessors({id:os.UnexpectedNullOrUndefinedSubscribedProfilerEventIds,message:void 0,context:this.logContext})}logProfilerObserverNeverSubscribedForProfilerEventId(e){this.sendLogMessageToProcessors({id:os.ProfilerObserverNeverSubscribedForProfilerEventId,message:e,context:this.logContext})}logCallTreeCustomPropertiesRetrieversMissingInTrace(){this.sendLogMessageToProcessors({id:os.CallTreeCustomPropertiesRetrieversMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedItemToSubscribe(e){this.sendLogMessageToProcessors({id:os.NullOrUndefinedItemToSubscribe,message:e,context:this.logContext})}logNullOrUndefinedItemForUnsubscribe(e){this.sendLogMessageToProcessors({id:os.NullOrUndefinedItemForUnsubscribe,message:e,context:this.logContext})}logItemWasNeverSubscribed(e){this.sendLogMessageToProcessors({id:os.ItemWasNeverSubscribed,message:e,context:this.logContext})}logNumberOfCallTreesFiltererByCustomFilterers(e,r){this.sendLogMessageToProcessors({id:os.NumberOfCallTreesFiltererByCustomFilterers,message:{filteredCount:e,totalCount:r},context:this.logContext})}logProcessTraceParamsIsNullOrUndefined(){this.sendLogMessageToProcessors({id:os.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logCurrentTraceBeingProcessedNullOrUndefined(){this.sendLogMessageToProcessors({id:os.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logTraceIdMissingInTrace(){this.sendLogMessageToProcessors({id:os.TraceIdMissingInTrace,message:void 0,context:this.logContext})}logUndefinedStoredProfilerTraceProcessingWorker(){this.sendLogMessageToProcessors({id:os.UndefinedStoredProfilerTraceProcessingWorker,message:void 0,context:this.logContext})}logNullCallTreeGetReconstructableTreeIteratorInvoked(){this.sendLogMessageToProcessors({id:os.NullCallTreeGetReconstructableTreeIteratorInvoked,message:void 0,context:this.logContext})}logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetResourcesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetResourcesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetFramesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetFramesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetStacksCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetStacksCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetSamplesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetSamplesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:os.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logRemoveQueryParamsFromResourceURLsNeverCalled(){this.sendLogMessageToProcessors({id:os.RemoveQueryParamsFromResourceURLsNeverCalled,message:void 0,context:this.logContext})}logSerializeCallTreeWasNeverCalled(){this.sendLogMessageToProcessors({id:os.SerializeCallTreeNeverCalled,message:void 0,context:this.logContext})}logConvertToJSONStringWasNeverCalled(){this.sendLogMessageToProcessors({id:os.ConvertToJSONStringWasNeverCalled,message:void 0,context:this.logContext})}logUnableToRetrieveCompressedBlob(e){this.sendLogMessageToProcessors({id:os.ConvertToJSONStringWasNeverCalled,message:e,context:this.logContext})}logUnableToRetrieveArrayBufferFromCompressedBlob(e){this.sendLogMessageToProcessors({id:os.ConvertToJSONStringWasNeverCalled,message:e,context:this.logContext})}logCompressionStreamAPIIsNotAvailable(){this.sendLogMessageToProcessors({id:os.CompressionStreamAPIIsNotAvailable,message:void 0,context:this.logContext})}logWebWorkerSource(e){this.sendLogMessageToProcessors({id:os.WebWorkerSource,message:e,context:this.logContext})}logWebWorkerCreationSucceeded(){this.sendLogMessageToProcessors({id:os.WebWorkerCreationSucceeded,message:void 0,context:this.logContext})}logWebWorkerCreationFailed(){this.sendLogMessageToProcessors({id:os.WebWorkerCreationFailed,message:void 0,context:this.logContext})}logWorkerNotRunning(){this.sendLogMessageToProcessors({id:os.WorkerNotRunning,message:void 0,context:this.logContext})}logFailedToCompressMultipleCallTreesDeobfuscationRequest(){this.sendLogMessageToProcessors({id:os.FailedToCompressMultipleCallTreesDeobfuscationRequest,message:void 0,context:this.logContext})}logUnknownStoredWebWorkerRequestId(e){this.sendLogMessageToProcessors({id:os.UnknownStoredWebWorkerRequestId,message:e,context:this.logContext})}logUnknownWebWorkerRequestId(e){this.sendLogMessageToProcessors({id:os.UnknownWebWorkerRequestId,message:e,context:this.logContext})}logMessageFromWorkerIsNullorUndefined(){this.sendLogMessageToProcessors({id:os.MessageFromWorkerIsNullorUndefined,message:void 0,context:this.logContext})}logFailedToCompressIndividualCallTreeDeobfuscationRequest(){this.sendLogMessageToProcessors({id:os.FailedToCompressIndividualCallTreeDeobfuscationRequest,message:void 0,context:this.logContext})}logMessageFromWorkerNotObject(){this.sendLogMessageToProcessors({id:os.MessageFromWorkerNotObject,message:void 0,context:this.logContext})}logNullStringCompressorInvoked(){this.sendLogMessageToProcessors({id:os.NullStringCompressorInvoked,message:void 0,context:this.logContext})}logUnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError(e){this.sendLogMessageToProcessors({id:os.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError,message:e,context:this.logContext})}logWebWorkerInitializationError(e){this.sendLogMessageToProcessors({id:os.WebWorkerInitializationError,message:e,context:this.logContext})}logUnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError(e){this.sendLogMessageToProcessors({id:os.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError,message:e,context:this.logContext})}logStartWorkerInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:os.StartWorkerInvokedOnNullWorker,message:void 0,context:this.logContext})}logProcessRequestInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:os.ProcessRequestInvokedOnNullWorker,message:void 0,context:this.logContext})}logProcessRequestForProcessTraceFailed(){this.sendLogMessageToProcessors({id:os.ProcessRequestForProcessTraceFailed,message:void 0,context:this.logContext})}logGetWorkerIdInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:os.GetWorkerIdInvokedOnNullWorker,message:void 0,context:this.logContext})}logUnknownWebWorkerErrorId(e){this.sendLogMessageToProcessors({id:os.UnknownWebWorkerErrorId,message:e,context:this.logContext})}logInvalidTraceReceivedByWorker(){this.sendLogMessageToProcessors({id:os.InvalidTraceReceivedByWorker,message:void 0,context:this.logContext})}logUnknownMessageIdReceivedByWorker(){this.sendLogMessageToProcessors({id:os.UnknownMessageIdReceivedByWorker,message:void 0,context:this.logContext})}logWorkerIDBeingSetToBusyNotPresentInIdleWorkers(e){this.sendLogMessageToProcessors({id:os.WorkerIDBeingSetToBusyNotPresentInIdleWorkers,message:e,context:this.logContext})}logWorkerIDBeingSetToIdleNotPresentInBusyWorkers(e){this.sendLogMessageToProcessors({id:os.WorkerIDBeingSetToIdleNotPresentInBusyWorkers,message:e,context:this.logContext})}logUnknownWorkerIDBeingTerminated(e){this.sendLogMessageToProcessors({id:os.UnknownWorkerIDBeingTerminated,message:e,context:this.logContext})}logProcessRequestForCompressSerializedProfileFailed(){this.sendLogMessageToProcessors({id:os.ProcessRequestForCompressSerializedProfileFailed,message:void 0,context:this.logContext})}logUndefinedCompressionInfoToReturnBack(){this.sendLogMessageToProcessors({id:os.UndefinedCompressionInfoToReturnBack,message:void 0,context:this.logContext})}logOutputStringMissingInMessageFromWorker(){this.sendLogMessageToProcessors({id:os.OutputStringMissingInMessageFromWorker,message:void 0,context:this.logContext})}logLogsMissingInMessageFromWorker(){this.sendLogMessageToProcessors({id:os.LogsMissingInMessageFromWorker,message:void 0,context:this.logContext})}logMessageToWorkerIsNullorUndefined(){this.sendLogMessageToProcessors({id:os.MessageToWorkerIsNullorUndefined,message:void 0,context:this.logContext})}logMessageToWorkerNotObject(){this.sendLogMessageToProcessors({id:os.MessageToWorkerNotObject,message:void 0,context:this.logContext})}logSerializedProfileMissingInCompressSerializedProfileMessage(){this.sendLogMessageToProcessors({id:os.SerializedProfileMissingInCompressSerializedProfileMessage,message:void 0,context:this.logContext})}logMissingShouldRecordFrameCountsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.MissingShouldRecordFrameCountsInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:os.MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo,message:void 0,context:this.logContext})}logShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace(){this.sendLogMessageToProcessors({id:os.ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace,message:void 0,context:this.logContext})}logShouldCompressSerializedCallTreesMissingInTrace(){this.sendLogMessageToProcessors({id:os.ShouldCompressSerializedCallTreesMissingInTrace,message:void 0,context:this.logContext})}logWorkerReceivedMessageIsNullOrUndefined(){this.sendLogMessageToProcessors({id:os.WorkerReceivedMessageIsNullOrUndefined,message:void 0,context:this.logContext})}logWorkerReceivedMessageIsNotAnObject(){this.sendLogMessageToProcessors({id:os.WorkerReceivedMessageIsNotAnObject,message:void 0,context:this.logContext})}logTraceIsNull(){this.sendLogMessageToProcessors({id:os.TraceIsNull,message:void 0,context:this.logContext})}logTraceIsNotObject(){this.sendLogMessageToProcessors({id:os.TraceIsNotObject,message:void 0,context:this.logContext})}logInvalidCompressSerializedProfileMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:os.InvalidCompressSerializedProfileMessageReceivedByWorker,message:void 0,context:this.logContext})}logSkippingLoggingSerializedCallTrees(){this.sendLogMessageToProcessors({id:os.SkippingLoggingSerializedCallTrees,message:void 0,context:this.logContext})}logNoSerializedCallTreesToLog(){this.sendLogMessageToProcessors({id:os.NoSerializedCallTreesToLog,message:void 0,context:this.logContext})}logInvalidConditionalProfileProcessingRequest(){this.sendLogMessageToProcessors({id:os.InvalidConditionalProfileProcessingRequest,message:void 0,context:this.logContext})}logTraceRequestingEventDrivenCallTreeFiltererNotSet(){this.sendLogMessageToProcessors({id:os.TraceRequestingEventDrivenCallTreeFiltererNotSet,message:void 0,context:this.logContext})}logFilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents(){this.sendLogMessageToProcessors({id:os.FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents,message:void 0,context:this.logContext})}logNullTrustedTypesPolicyFactoryCreateScriptURLInvoked(){this.sendLogMessageToProcessors({id:os.NullTrustedTypesPolicyFactoryCreateScriptURLInvoked,message:void 0,context:this.logContext})}logTrustedTypesPolicyFactoryCreateScriptURLReturnedNull(){this.sendLogMessageToProcessors({id:os.TrustedTypesPolicyFactoryCreateScriptURLReturnedNull,message:void 0,context:this.logContext})}constructor(e){this.logContext=e,this.logMessageProcessors=[]}}!function(e){e[e.MainEventLoop=0]="MainEventLoop",e[e.Worker=1]="Worker"}(is||(is={}));class _s{getFiltererName(){return"OperationLogMessageFilterer"}shouldFilterLogMessage(e){if(e.id!==os.Operation)return!1;if(this.shouldAlwaysLogOperationsData)return!1;const r=e.message;return!(r.didOperationFailUnexpectedly||-1!==this.listOfOperationNamesToAlwaysLog.indexOf(r.operationName)||r.measuredRunTime>this.operationMeasuredRunTimeFilteringThresholdInMs)}constructor(e,r,s,t){this.shouldAlwaysLogOperationsData=e,this.listOfOperationNamesToAlwaysLog=r,this.operationMeasuredRunTimeFilteringThresholdInMs=s,this.logger=t,this.logger.logOperationLogMessageFiltererInitOptions(e,r,s)}}function ws(e,r=30){const s=[];for(let t=0;t<e.length;t+=r)s.push(e.slice(t,t+r));return s}class Us{getTransporterName(){return"ULSLogMessageTransporter"}transportLogMessage(e){if(!this.shouldTransportLogs)return;let r="";switch(e.context){case is.MainEventLoop:r="ProfilingSessionLogger-MainEventLoop";break;case is.Worker:r="ProfilingSessionLogger-Worker"}switch(e.id){case os.MissingProfilerImplementation:n.sendTraceTag(543477840,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Factory doesn't know how to create profiler of type ${e.message}`);break;case os.FailingValidationsInProfilerFactory:n.sendTraceTag(543477841,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Validations failed while creating the profiler`);break;case os.WindowMissingInJSEnvironment:n.sendTraceTag(543477842,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Unable to find window in the JS environment`);break;case os.WindowPropertyNameChecked:n.sendTraceTag(543477843,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case os.UserAgentToParseChromiumMajorVersionNumber:n.sendTraceTag(543477844,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case os.ChromeNotPresentInUserAgent:n.sendTraceTag(543477845,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Chrome was not found in the user agent`);break;case os.UnableToIsolateChromeInformationFromUserAgent:n.sendTraceTag(543477846,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to isolate chrome information from the user agent`);break;case os.UnableToExtractChromeVersionInformation:n.sendTraceTag(543477847,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to extract chrome version information from the user agent`);break;case os.UnableToParseChromeMajorVersionString:n.sendTraceTag(543477848,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to parse the chromium major version number`);break;case os.ParsedChromiumMajorVersionNumber:n.sendTraceTag(543477849,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case os.UserAgentToCheckForChromiumBrowser:n.sendTraceTag(543477850,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case os.EmptyUserAgentString:n.sendTraceTag(543477851,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Empty user agent string`);break;case os.BrowserUserAgentNotChromiumBased:n.sendTraceTag(543477852,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser not chromium based`);break;case os.UserAgentSpoofedToBeChromium:n.sendTraceTag(543477853,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case os.BrowserNotChromiumBasedBrowser:n.sendTraceTag(543477854,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case os.UnsupportedChromiumMajorVersionNumber:n.sendTraceTag(543477855,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Unsupported chromium major version number`);break;case os.ProfilerInitOptionsNullOrUndefined:n.sendTraceTag(543477856,d.msoulscat_Wac_Telemetry,c.Info,"ProfilerInitOptions cannot be null or undefined");break;case os.SamplingIntervalIsLessThanOrEqualToZero:n.sendTraceTag(543477857,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Sampling interval must be greater than zero`);break;case os.SamplingIntervalLessThanMinimumSupportedSamplingInterval:n.sendTraceTag(543477858,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Sampling interval ${e.message.samplingInterval} is less than minimum supported sampling interval ${e.message.minimumSupportedSamplingInterval}. API might perform scaling`);break;case os.UnsupportedBrowser:n.sendTraceTag(543477859,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in this browser`);break;case os.UnsupportedOperatingSystem:n.sendTraceTag(543477888,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in this operating system`);break;case os.JSSelfProfilingAPIUnavailable:n.sendTraceTag(543477889,d.msoulscat_Wac_Telemetry,c.Info,`${r}: JSSelfProfiling is not available`);break;case os.RetrievedUserAgent:n.sendTraceTag(543477890,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case os.NullJSCPUProfilerStartCalled:n.sendTraceTag(543477891,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullJSCPUProfiler start called`);break;case os.NullJSCPUProfilerStopCalled:n.sendTraceTag(543477892,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullJSCPUProfiler stop called`);break;case os.NullOrUndefinedProfilerInitOptions:n.sendTraceTag(543477893,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProfilerInitOptions is null or undefined`);break;case os.MaxBufferSizeFixedToDefaultSize:n.sendTraceTag(543477894,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size was fixed to the default max size`);break;case os.MaxBufferSizeWasNotFixedBeforeRetrieval:n.sendTraceTag(543477895,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Retrieve was called before fix max buffer size was called. The returned options can be undefined`);break;case os.ProfilerNotPresentInJSEnvironment:n.sendTraceTag(543477896,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler is not present in the JS environment indicating JSSelfProfiling API is not available`);break;case os.SamplingIntervalValidationCheckFailed:n.sendTraceTag(543477897,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Sampling interval validation check failed`);break;case os.MaxBufferValidationFailed:n.sendTraceTag(543477898,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size validation failed`);break;case os.MaxBufferSizeNotSpecified:n.sendTraceTag(543477899,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size is not specified`);break;case os.MaxBufferSizeLessThanOrEqualToZero:n.sendTraceTag(543477900,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size is less than or equal to zero`);break;case os.ManualProfilerValidationFailed:n.sendTraceTag(543477901,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Timed profiler initialization options failed to pass manual profiler initialization options`);break;case os.ProfilingIntervalValidationFailed:n.sendTraceTag(543477902,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval validation failed`);break;case os.ProfilingIntervalNullOrUndefined:n.sendTraceTag(543477903,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is null or undefined`);break;case os.ProfilingIntervalLessThanOrEqualToZero:n.sendTraceTag(543477904,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is less than or equal to zero`);break;case os.ProfilingIntervalLessThanSamplingInterval:n.sendTraceTag(543477905,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is less than sampling interval`);break;case os.TimedProfilerValidationFailed:n.sendTraceTag(543477906,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Continuous profiler init options failed to pass timed profiler initialization options`);break;case os.IdleIntervalValidationFailed:n.sendTraceTag(543477907,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval validation failed for continuous profiler`);break;case os.IdleIntervalIsNullOrUndefined:n.sendTraceTag(543477908,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval is a required argument for continuous profiler`);break;case os.IdleIntervalIsLessThanOrEqualToZero:n.sendTraceTag(543477909,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval must be greater than zero`);break;case os.PostProfilerStartCallbackSpecified:n.sendTraceTag(543477910,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A post profiler start callback is specified`);break;case os.PreProfilerStartCheckFailed:n.sendTraceTag(543477911,d.msoulscat_Wac_Telemetry,c.Info,`${r}: One or more pre-profiler start checks failed`);break;case os.MaxBufferSizeNotFixed:n.sendTraceTag(543477912,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Max buffer size must be fixed before we get to this point. Is the profiler being created outside the factory?`);break;case os.BailingOutOnNullProfiler:n.sendTraceTag(539109121,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null profiler was created due to some error, bailing out from profiling loop`);break;case os.NotProcessingCapturedTraceDueToUserBeingIdle:n.sendTraceTag(537706779,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No browser events were detected between profiler start and profiler end. data will not be proccessed since user was idle`);break;case os.ProfilerAlreadyStarted:n.sendTraceTag(543477913,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Attempting to start the profiler even though the profiler is already started. Stop the profiler first and attempt a restart`);break;case os.ProfilerStartSucceeded:n.sendTraceTag(543477914,d.msoulscat_Wac_Telemetry,c.Info,`${r}: start the profiler successfully`);break;case os.InvokingPostProfilerStartCallback:n.sendTraceTag(543477915,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Invoking the post profiler start callback`);break;case os.PostProfilerStopCallbackSpecified:n.sendTraceTag(543477916,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A callback for post profiler stop is specified`);break;case os.ProfilerInstanceIsUndefined:n.sendTraceTag(543477917,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler instance is undefined. Is the profiler is being stopped without ever starting?`);break;case os.ProfilerStopPromiseResolved:n.sendTraceTag(543477918,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler stop promise has been resolved successfully`);break;case os.ProfilerStopPromiseRejected:n.sendTraceTag(543477919,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${JSON.stringify({promiseRejectionReason:e.message})}`);break;case os.PostProfilerStopCallbackInvoked:n.sendTraceTag(543477920,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Post profiler stop callback is being invoked`);break;case os.PostTimedStartProfilerStartCallbackInvoked:n.sendTraceTag(543477921,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Post timed profiler start callback invoked`);break;case os.ProfilingIntervalIsUndefined:n.sendTraceTag(543477922,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiling interval is expected to be defined for timed profiler`);break;case os.TimerJobToStopProfilerSet:n.sendTraceTag(543477923,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A timer job to stop the profiler is created`);break;case os.TimedProfilerStopCallbackInvoked:n.sendTraceTag(543477952,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Timed profiler is being stopped automatically`);break;case os.TimedProfilerIsBeingStoppedManually:n.sendTraceTag(543477953,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Timed profiler is being stopped manually`);break;case os.ProfilerStartPromiseCreated:n.sendTraceTag(543477954,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler start promise has been created`);break;case os.ProfilerStopGoingToBeInvoked:n.sendTraceTag(543477955,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A call to stop profiler is going to be invoked`);break;case os.SamplingIntervalUsedForStartingProfiler:n.sendTraceTag(543477956,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case os.MaxBufferSize:n.sendTraceTag(543477957,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case os.NoProfilerInstanceBuilt:n.sendTraceTag(543477958,d.msoulscat_Wac_Telemetry,c.Error,`${r}: No instance of a profiler was built. Missing implementation?`);break;case os.ProfilerInitOptionsValidationFailed:n.sendTraceTag(543477959,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProfilerInitOptions validation failed`);break;case os.UnableToFixUpProfilerInitOptions:n.sendTraceTag(543477960,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to fixup profilerInitOptions`);break;case os.ProfilingIsNotEnabled:n.sendTraceTag(543477961,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling feature is not enabled`);break;case os.ProfilingIsNotSupportedEnvironment:n.sendTraceTag(543477962,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in the environment`);break;case os.FeatureCheckerIsNullOrUndefined:n.sendTraceTag(543477963,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Feature checker is null or undefined`);break;case os.NullSupportedEnvironmentCheckerInvoked:n.sendTraceTag(543477964,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullSupportedEnvironmentChecker was invoked`);break;case os.NullJSCPUProfilerInitOptionsValidatorInvoked:n.sendTraceTag(543477965,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullJSCPUProfilerInitOptionsValidator was invoked`);break;case os.NullJSCPUProfilerFactoryInvoked:n.sendTraceTag(543477966,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullJSCPUProfilerFactory createProfiler was invoked`);break;case os.NullOrUndefinedIdleInterval:n.sendTraceTag(543477967,d.msoulscat_Wac_Telemetry,c.Error,`${r}: idleIntervalInMs is null or undefined. So killing the timer job`);break;case os.CreateProfilerDidNotSubscribeProfilerObserver:n.sendTraceTag(543477969,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A profiler observer was never subscribed to the created profiler`);break;case os.NullOrUndefinedCustomPropertiesRetriever:n.sendTraceTag(543477972,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Custom Properties retriever is null or undefined`);break;case os.NullOrUndefinedCustomProperties:n.sendTraceTag(543477973,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Custom Properties is null or undefined`);break;case os.CustomPropertyKeyIsNull:n.sendTraceTag(543477974,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A custom property key is null`);break;case os.CustomPropertyValueIsNull:n.sendTraceTag(543477975,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A custom property value is null`);break;case os.RetrieveCallTreesCalledBeforeTransform:n.sendTraceTag(543477976,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Transform should be called before retrieveCallTrees`);break;case os.RetrieveBuiltCallTreesBeforeBuildCallTrees:n.sendTraceTag(543477977,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildCallTrees should be called before retrieveBuiltCallTrees`);break;case os.RetrieveStacksCalledBeforeBuildStacks:n.sendTraceTag(543477978,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildStacks should be called before retrieveStacks`);break;case os.ExecutionStacksNeverBuilt:n.sendTraceTag(543477979,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Execution stacks were not built. Instead an empty array of stacks will be returned`);break;case os.PeekOnNullExecutionStackInvoked:n.sendTraceTag(543477980,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Peek was invoked on Null ExecutionStack`);break;case os.PopOnNullExecutionStackInvoked:n.sendTraceTag(543477981,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Pop was invoked on Null ExecutionStack`);break;case os.EmptyStacks:n.sendTraceTag(543477982,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Stacks array is empty. No further processing can be performed.`);break;case os.EmptyFrames:n.sendTraceTag(543477983,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Frames array is empty. No further processing can be performed.`);break;case os.ForciblyExitingLoopWhileBuildingStack:n.sendTraceTag(543477984,d.msoulscat_Wac_Telemetry,c.Error,`${r}: While loop is being forcibly exited because of a runaway while loop `);break;case os.RetrieveStackCalledBeforeBuildStack:n.sendTraceTag(543477985,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildStack should be called before RetrieveStack`);break;case os.ExecutionStackNeverBuilt:n.sendTraceTag(543477986,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Built execution stack is undefined. So null execution stack will be returned`);break;case os.ConvertStacksToCallTreesNeverCalled:n.sendTraceTag(543477987,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Convert stacks to call trees was not called before retrieve call trees. Empty call trees will be returned`);break;case os.ConvertStackToCallTreeNeverCalled:n.sendTraceTag(543478016,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Convert stack to call tree was not called before retrieve call tree. Null call tree will be returned`);break;case os.NullFrameNodeCreated:n.sendTraceTag(543478017,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullFrameNode created`);break;case os.InvalidSampleIndex:n.sendTraceTag(543478018,d.msoulscat_Wac_Telemetry,c.Error,`${r}: sampleIndex needs to be greater than zero for proper indexing`);break;case os.InvalidFrameNodeStartTime:n.sendTraceTag(543478019,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid frame node starting time`);break;case os.InvalidFrameNodeExecutionTime:n.sendTraceTag(543478020,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid frame node execution time`);break;case os.InvalidNewFrameNodeExecutionTime:n.sendTraceTag(543478021,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid new frame node execution time`);break;case os.NegativeSubTreeExecutionTime:n.sendTraceTag(543478022,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Negative sub tree execution time`);break;case os.FixerForProfilerType:n.sendTraceTag(543478023,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case os.MissingProfilerInitOptionsFixerImplementation:n.sendTraceTag(543478024,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Missing profiler init options fixer for unknown profiler type`);break;case os.LoopBackFixerFixProfilerInitOptionsInvoked:n.sendTraceTag(543478025,d.msoulscat_Wac_Telemetry,c.Error,`${r}: LoopBackFixer fixProfilerInitOptions was invoked`);break;case os.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked:n.sendTraceTag(543478026,d.msoulscat_Wac_Telemetry,c.Error,`${r}: LoopBackFixer retrieveFixedProfilerInitOptions was invoked`);break;case os.MissingDeObfuscationEndpoint:n.sendTraceTag(543478027,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined deObfuscation endpoint was provided`);break;case os.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling:n.sendTraceTag(543478028,d.msoulscat_Wac_Telemetry,c.Info,`${r}: The profile was captured in a hidden document. So, we are not processing it`);break;case os.NullCallTreeDepthFirstIteratorInvoked:n.sendTraceTag(543478029,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null getDepthFirstIterator was invoked`);break;case os.EmptySamplesArrayPassedToFilter:n.sendTraceTag(543478030,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to properly filter out samples we need at least one sample`);break;case os.NullCallTreeLeftMostNodesIteratorInvoked:n.sendTraceTag(543478031,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null iterator was returned back to iterate over left most nodes`);break;case os.NullCallTreeRightMostNodesIteratorInvoked:n.sendTraceTag(543478032,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null iterator was returned back to iterate over right most nodes`);break;case os.MissingIsProfilingEnabledOnFeatureChecker:n.sendTraceTag(543478033,d.msoulscat_Wac_Telemetry,c.Error,`${r}: isProfilingEnabled is missing in FeatureChecker`);break;case os.FeatureCheckerIsProfilingEnabledNotAFunction:n.sendTraceTag(543478034,d.msoulscat_Wac_Telemetry,c.Error,`${r}: isProfilingEnabled on FeatureChecker is not a function`);break;case os.NullCallTreeGetTotalExecutionTimeInvoked:n.sendTraceTag(543478035,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTree getTotalExecutionTimeInMs was invoked`);break;case os.NullCallTreeGetCustomPropertiesInvoked:n.sendTraceTag(543478036,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTree getCustomProperties was invoked`);break;case os.SerializedCallTrees:n.sendTraceTag(543478037,d.msoulscat_Wac_Telemetry,c.Info,`${e.message}`);break;case os.NullCallTreeIteratorImplGetNextInvoked:n.sendTraceTag(543478038,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTreeIterator getNext was invoked`);break;case os.NullCallTreeIteratorImplHasMoreInvoked:n.sendTraceTag(543478039,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTreeIterator hasMore was invoked`);break;case os.MissingProfilerNameForProfilerType:n.sendTraceTag(543478040,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing profiler name for profiler type ${e.message}`);break;case os.ExpectedOnlyOneNodePerLevelInCallTree:n.sendTraceTag(543478041,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Expected to see only one node per level in the call tree`);break;case os.MissingWebWorkerSourceURL:n.sendTraceTag(543478042,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to use the web worker to process the profile, a source URL needs to be passed into the worker. But the URL was not provided`);break;case os.MaxNumberOfProfilersAlreadyCreated:n.sendTraceTag(543478043,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Max number of profilers have already been created. Cannot create anymore`);break;case os.SamplingIntervalAboveMaxSamplingInterval:n.sendTraceTag(543478044,d.msoulscat_Wac_Telemetry,c.Error,`${r}: The sampling interval is above the maximum allowed sampling interval`);break;case os.WebWorkerAPINotAvailable:n.sendTraceTag(543478045,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web Worker API is not available. We will fallback to processing traces on the main event loop`);break;case os.UnableToBootWebWorker:n.sendTraceTag(543478046,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Attempted to start the web worker. But it failed for some reason`);break;case os.WorkerInstanceNotFound:n.sendTraceTag(543478047,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker instance was not found. Cannot perform any action`);break;case os.IdNotFoundInMessageToWorker:n.sendTraceTag(543478048,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id was not found in the message sent to the worker`);break;case os.DataNotFoundInMessageToWorker:n.sendTraceTag(543478049,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Data was not found in the message sent to the worker`);break;case os.IdNotFoundInMessageFromWorker:n.sendTraceTag(543478050,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id was not found in the message sent from the worker`);break;case os.DataNotFoundInMessageFromWorker:n.sendTraceTag(543478051,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Data was not found in the message sent from the worker`);break;case os.UnknownMessageFromWorker:n.sendTraceTag(543478080,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown message with message id - ${e.message} sent from the worker`);break;case os.ErrorFromWorker:n.sendTraceTag(540844827,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Error - ${e.message} sent from the worker`);break;case os.IdNotFoundInWorkerLogMessage:n.sendTraceTag(543478081,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id is not present in the log message from the worker`);break;case os.MessageNotFoundInWorkerLogMessage:n.sendTraceTag(543478082,d.msoulscat_Wac_Telemetry,c.Error,`${r}: message is not present in the log message from the worker`);break;case os.UnknownLogMessageFromWorker:n.sendTraceTag(543478083,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown log message id - ${e.message} sent as part of the worker log message`);break;case os.Operation:n.sendTraceTag(543478084,d.msoulscat_Wac_Telemetry,e.message.didOperationFailUnexpectedly?c.Error:c.Info,`${r}: ${JSON.stringify({operationName:e.message.operationName,parentOperationName:e.message.parentOperationName,didOperationSucceed:e.message.didOperationSucceed,measuredRunTime:e.message.measuredRunTime,logs:e.message.logs,properties:e.message.propertyBag?Array.from(e.message.propertyBag):e.message.propertyBag,exception:e.message.exception})}`);break;case os.FallbackResultReturned:n.sendTraceTag(543478085,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Exception encountered. So, fallback result is being returned back`);break;case os.UnknownMessageToWorker:n.sendTraceTag(543478086,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown worker messageId ${e.message} encountered`);break;case os.ExceptionEncounteredInWorker:n.sendTraceTag(543478087,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${JSON.stringify(e.message)}`);break;case os.MissingDeObfuscationInfoInTraceProcessingInfo:n.sendTraceTag(543478088,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing deObfuscationInfo in trace processing information`);break;case os.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo:n.sendTraceTag(543478089,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing shouldKeepSamplesOutsideOfProfilingInterval in trace processing information`);break;case os.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo:n.sendTraceTag(543478090,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing shouldRecordExpandedTimeStamps in trace processing information`);break;case os.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo:n.sendTraceTag(543478091,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing callTreeFilteringThresholdInMs in trace processing information`);break;case os.InvalidMessageReceivedByWorker:n.sendTraceTag(543478092,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid message received by the worker. Returning without any processing`);break;case os.InvalidProcessTraceMessageReceivedByWorker:n.sendTraceTag(543478093,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid process trace message received by the worker. Returning without any processing`);break;case os.MissingTraceInTraceProcessingInfo:n.sendTraceTag(543478094,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing trace in trace processing information`);break;case os.SerializedCallTreesMissingInProcessorResult:n.sendTraceTag(543478095,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializedCallTrees is missing in the processor result`);break;case os.LogsMissingInProcessorResult:n.sendTraceTag(543478096,d.msoulscat_Wac_Telemetry,c.Error,`${r}: logs is missing in the processor result`);break;case os.UndefinedWebWorkerCompletionCallback:n.sendTraceTag(543478097,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Undefined completion callback for the processor result. The results will be ignored`);break;case os.LogsMissingInErrorsFromWebWorker:n.sendTraceTag(543478098,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker raised an error. But no logs can be found in the message that the worker sent over. This should not happen`);break;case os.UndefinedErrorCallback:n.sendTraceTag(543478099,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker raised an error. But the main thread has not provided a callback function to notify on error. So, ignoring the error`);break;case os.UndefinedTraceProcessingInfoToReturnBack:n.sendTraceTag(543478100,d.msoulscat_Wac_Telemetry,c.Error,`${r}: The worker ran into an error. But no trace processing info was found to return back to the caller`);break;case os.WebWorkerAlreadyStarted:n.sendTraceTag(543478101,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Attempting to start a web worker that has already been started`);break;case os.WebWorkerTerminated:n.sendTraceTag(540844828,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Web worker got terminated`);break;case os.WebWorkerErrorFallingBackToMainEventLoop:n.sendTraceTag(543478102,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Error encountered in the web worker. So falling back to processing the trace in the main event loop`);break;case os.CustomPropertiesMissingInTrace:n.sendTraceTag(543478103,d.msoulscat_Wac_Telemetry,c.Error,`${r}: CustomProperties was not found in the trace`);break;case os.ProfilerTraceMissingInTrace:n.sendTraceTag(543478104,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerTrace was not found in the trace`);break;case os.ProfilerTraceStartTimestampMissingInTrace:n.sendTraceTag(543478105,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerTraceStartTimestamp was not found in the trace`);break;case os.ProfilerPropertiesMissingInTrace:n.sendTraceTag(543478106,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerProperties was not found in the trace`);break;case os.ElapsedProfilingTimeMissingInTrace:n.sendTraceTag(543478107,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ElapsedProfilingTime was not found in the trace`);break;case os.InvalidProfilerTraceToProcess:n.sendTraceTag(543478108,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid profiler trace to process. Returning back without processing`);break;case os.WebWorkerError:n.sendTraceTag(543478109,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${e.message}`);break;case os.WebWorkerErrorCallbackNotRegistered:n.sendTraceTag(543478110,d.msoulscat_Wac_Telemetry,c.Error,`${r}: No error callback has been registered for the web worker. So ignoring the error message`);break;case os.WebWorkerTraceProcessingInfoMissingToReturnOnError:n.sendTraceTag(543478111,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to reprocess the trace in the main event loop, trace processing info is required. But did not find any`);break;case os.ProfilerTrace:const s=e.logOptions?.profilerTraceLoggingChunkSize||30;let t=0;for(const o of ws(e.message.getResources(),s))n.sendTraceTag(543478112,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),resources:o})}`),t++;t=0;for(const o of ws(e.message.getFrames(),s))n.sendTraceTag(539784207,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),frames:o})}`),t++;t=0;for(const o of ws(e.message.getStacks(),s))n.sendTraceTag(539784208,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),stacks:o})}`),t++;t=0;for(const o of ws(e.message.getSamplesTrimmed(),s))n.sendTraceTag(539784209,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),samples:o})}`),t++;break;case os.MissingCallToFilterCallTrees:n.sendTraceTag(543478113,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing a call to filterCallTrees. Returning an empty array back`);break;case os.MissingCallToFilterFrames:n.sendTraceTag(543478114,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing a call to filterFrames. Returning NullCallTree back`);break;case os.NullCallTreeFramesFiltererFilterFramesInvoked:n.sendTraceTag(543478115,d.msoulscat_Wac_Telemetry,c.Error,`${r}: filterFrames invoked on NullCallTreeFilterFrames`);break;case os.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked:n.sendTraceTag(543478144,d.msoulscat_Wac_Telemetry,c.Error,`${r}: retrieveFilteredCallTree invoked on NullCallTreeFilterFrames`);break;case os.NullCallTreeGetFramesFiltererInvoked:n.sendTraceTag(543478145,d.msoulscat_Wac_Telemetry,c.Error,`${r}: getFramesFilterer invoked on NullCallTree`);break;case os.FilterFrameWithNoParent:n.sendTraceTag(543478146,d.msoulscat_Wac_Telemetry,c.Error,`${r}: CallTreeFramesFiltererImpl tries to filter node with no parent`);break;case os.OperationLogMessageFiltererInitOptions:n.sendTraceTag(542389340,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${JSON.stringify(e.message)}`);break;case os.NoCallTreesToSend:n.sendTraceTag(542229786,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No call trees to send to server`);break;case os.NullOrUndefinedProfilerEvent:n.sendTraceTag(540624656,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event sent to the profiler observer`);break;case os.UnknownProfilerEventId:n.sendTraceTag(540624657,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown profiler event ID ${e.message} sent to the profiler observer. Are you missing a case statement?`);break;case os.NullOrUndefinedProfilerTrace:n.sendTraceTag(540624658,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler trace sent to the observer. This message will be ignored`);break;case os.OperationLogMessageFilteringCriteriaMissingInTrace:n.sendTraceTag(540612253,d.msoulscat_Wac_Telemetry,c.Error,`${r}: OperationLogMessageFilteringCriteria is missing in trace`);break;case os.NullOrUndefinedProfilerObserverPassedInForSubscribe:n.sendTraceTag(540545986,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler observer passed in for subscribe`);break;case os.NullOrUndefinedProfilerEventIds:n.sendTraceTag(540545987,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event ids`);break;case os.UnexpectedUndefinedProfilerEventIds:n.sendTraceTag(540545988,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unexpected undefined profiler event ids`);break;case os.NullOrUndefinedProfilerObserverPassedInForUnsubscribe:n.sendTraceTag(540393807,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler observer passed in for unsubscribe`);break;case os.NullOrUndefinedProfilerEventToUnsubscribe:n.sendTraceTag(540393808,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event id passed for unsubscribe`);break;case os.ProfilerObserverWasNeverSubscribed:n.sendTraceTag(540393809,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiler observer does not have any subscriptions`);break;case os.UnexpectedNullOrUndefinedSubscribedProfilerEventIds:n.sendTraceTag(540393810,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Expected to receive a set of subscribed profiler event IDs. But unexpectedly received null/undefined`);break;case os.ProfilerObserverNeverSubscribedForProfilerEventId:n.sendTraceTag(540393811,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiler observer never subscribed for the event ${e.message} that it is requesting to unsubscribe from`);break;case os.NullOrUndefinedItemToSubscribe:n.sendTraceTag(509374879,d.msoulscat_Wac_Telemetry,c.Error,`${r}: null or undefined item tried to subscribe to an instance of profiler. type: ${e.message}`);break;case os.NullOrUndefinedItemForUnsubscribe:n.sendTraceTag(509374878,d.msoulscat_Wac_Telemetry,c.Error,`${r}: null or undefined item tried to unsubscribe from an instance of profiler. type: ${e.message}`);break;case os.ItemWasNeverSubscribed:n.sendTraceTag(509374877,d.msoulscat_Wac_Telemetry,c.Error,`${r}: trying to unsubscribe while item was never subscribed. type: ${e.message}`);break;case os.NumberOfCallTreesFiltererByCustomFilterers:n.sendTraceTag(509374876,d.msoulscat_Wac_Telemetry,c.Info,`${r}: applied custom filterer and removed: ${e.message.filteredCount} call trees out of ${e.message.totalCount}.`);break;case os.CallTreeCustomPropertiesRetrieversMissingInTrace:n.sendTraceTag(539797325,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Call Tree Custom Properties Retrievers missing in trace. Trace is invalid and web worker will return without processing`);break;case os.ProcessTraceParamsIsNullOrUndefined:n.sendTraceTag(539767647,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProcessTraceParams is null or undefined`);break;case os.CurrentTraceBeingProcessedNullOrUndefined:n.sendTraceTag(539767648,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Current trace being processed is null or undefined`);break;case os.TraceIdMissingInTrace:n.sendTraceTag(539767629,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Trace ID is missing in trace`);break;case os.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247246,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetCustomProperties called on NullJSCPUProfilerTrace`);break;case os.GetFramesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247247,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetFrames called on NullJSCPUProfilerTrace`);break;case os.GetStacksCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247248,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetStacks called on NullJSCPUProfilerTrace`);break;case os.GetSamplesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247249,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetSamples called on NullJSCPUProfilerTrace`);break;case os.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247250,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetProfilerTraceStartTimestamp called on NullJSCPUProfilerTrace`);break;case os.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247251,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetProfilerProperties called on NullJSCPUProfilerTrace`);break;case os.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247252,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetElapsedProfilingTimeInMs called on NullJSCPUProfilerTrace`);break;case os.RemoveQueryParamsFromResourceURLsNeverCalled:n.sendTraceTag(527247253,d.msoulscat_Wac_Telemetry,c.Error,`${r}: removeQueryParamsFromResourceURLs was never called`);break;case os.SerializeCallTreeNeverCalled:n.sendTraceTag(506590178,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializeCallTree should be called before attempting to retrieve the call tree. Returning undefined`);break;case os.ConvertToJSONStringWasNeverCalled:n.sendTraceTag(506587295,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case os.UnableToRetrieveCompressedBlob:n.sendTraceTag(506217675,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to retrieve compressed blob`);break;case os.UnableToRetrieveArrayBufferFromCompressedBlob:n.sendTraceTag(506217674,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to retrieve array buffer from compressed blob`);break;case os.CompressionStreamAPIIsNotAvailable:n.sendTraceTag(506217673,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Compression Stream API is not available. So, cannot compress the data`);break;case os.WebWorkerSource:n.sendTraceTag(506214145,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case os.WebWorkerCreationSucceeded:n.sendTraceTag(506214144,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Web worker creation succeeded`);break;case os.WebWorkerCreationFailed:n.sendTraceTag(506214115,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker creation failed`);break;case os.WorkerNotRunning:n.sendTraceTag(506214114,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker is not running`);break;case os.FailedToCompressMultipleCallTreesDeobfuscationRequest:n.sendTraceTag(506209152,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Failed to compress multiple call trees deobfuscation request`);break;case os.FailedToCompressIndividualCallTreeDeobfuscationRequest:n.sendTraceTag(506209123,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Failed to compress individual call tree deobfuscation request`);break;case os.NullStringCompressorInvoked:n.sendTraceTag(506206368,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null string compressor should not be invoked`);break;case os.UnknownStoredWebWorkerRequestId:n.sendTraceTag(506081793,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown stored web worker request id ${e.message}`);break;case os.UnknownWebWorkerRequestId:n.sendTraceTag(506081792,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker request id ${e.message}`);break;case os.MessageFromWorkerIsNullorUndefined:n.sendTraceTag(506081763,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Message from worker is null or undefined`);break;case os.MessageFromWorkerNotObject:n.sendTraceTag(506081762,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Message from worker is not an object`);break;case os.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError:n.sendTraceTag(506081761,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker request id when handling known web worker error ${e.message}`);break;case os.WebWorkerInitializationError:n.sendTraceTag(506081760,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Web worker initialization error ${e.message}`);break;case os.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError:n.sendTraceTag(506081759,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker request id when handling unknown web worker error ${e.message}`);break;case os.StartWorkerInvokedOnNullWorker:n.sendTraceTag(506081758,d.msoulscat_Wac_Telemetry,c.Error,`${r}: StartWorker invoked on null worker`);break;case os.ProcessRequestInvokedOnNullWorker:n.sendTraceTag(506081757,d.msoulscat_Wac_Telemetry,c.Error,`${r}: processRequest invoked on null worker`);break;case os.GetWorkerIdInvokedOnNullWorker:n.sendTraceTag(506081756,d.msoulscat_Wac_Telemetry,c.Error,`${r}: getWorkerId invoked on null worker`);break;case os.UnknownWebWorkerErrorId:n.sendTraceTag(506081755,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker error id ${e.message}`);break;case os.InvalidTraceReceivedByWorker:n.sendTraceTag(506081754,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid trace received by the worker`);break;case os.UnknownMessageIdReceivedByWorker:n.sendTraceTag(506081753,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown message id received by the worker`);break;case os.WorkerIDBeingSetToBusyNotPresentInIdleWorkers:n.sendTraceTag(506078679,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker ID being set to busy is not present in idle workers ${e.message}`);break;case os.WorkerIDBeingSetToIdleNotPresentInBusyWorkers:n.sendTraceTag(506078678,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker ID being set to idle is not present in busy workers ${e.message}`);break;case os.UnknownWorkerIDBeingTerminated:n.sendTraceTag(506078677,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown worker ID being terminated ${e.message}`);break;case os.ProcessRequestForCompressSerializedProfileFailed:n.sendTraceTag(506061912,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Compression of serialized profile using web worker failed`);break;case os.UndefinedCompressionInfoToReturnBack:n.sendTraceTag(506057750,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Compression info is undefined. Returning without processing`);break;case os.OutputStringMissingInMessageFromWorker:n.sendTraceTag(506057749,d.msoulscat_Wac_Telemetry,c.Error,`${r}: outputString is missing in the message from the worker`);break;case os.LogsMissingInMessageFromWorker:n.sendTraceTag(506057748,d.msoulscat_Wac_Telemetry,c.Error,`${r}: logs is missing in the message from the worker`);break;case os.MessageToWorkerIsNullorUndefined:n.sendTraceTag(506054541,d.msoulscat_Wac_Telemetry,c.Error,`${r}: message to the worker is null or undefined`);break;case os.MessageToWorkerNotObject:n.sendTraceTag(506054540,d.msoulscat_Wac_Telemetry,c.Error,`${r}: message to the worker is not an object`);break;case os.SerializedProfileMissingInCompressSerializedProfileMessage:n.sendTraceTag(506054539,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializedProfile is missing in the compressSerializedProfile message`);break;case os.MissingShouldRecordFrameCountsInTraceProcessingInfo:n.sendTraceTag(506054538,d.msoulscat_Wac_Telemetry,c.Error,`${r}: missing shouldRecordFrameCounts in the trace processing info`);break;case os.MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo:n.sendTraceTag(506054537,d.msoulscat_Wac_Telemetry,c.Error,`${r}: missing frameTotalExecutionTimeFilteringThresholdInMs in the trace processing info`);break;case os.ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace:n.sendTraceTag(506054536,d.msoulscat_Wac_Telemetry,c.Error,`${r}: missing shouldMakeSerializedCallTreesFullyReconstructible in the trace processing info`);break;case os.ShouldCompressSerializedCallTreesMissingInTrace:n.sendTraceTag(506054535,d.msoulscat_Wac_Telemetry,c.Error,`${r}: missing shouldCompressSerializedCallTrees in the trace processing`);break;case os.WorkerReceivedMessageIsNullOrUndefined:n.sendTraceTag(506054534,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker received message is null or undefined`);break;case os.WorkerReceivedMessageIsNotAnObject:n.sendTraceTag(506054533,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker received message is not an object`);break;case os.TraceIsNull:n.sendTraceTag(506054532,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Trace is null`);break;case os.TraceIsNotObject:n.sendTraceTag(506054531,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Trace is not an object`);break;case os.InvalidCompressSerializedProfileMessageReceivedByWorker:n.sendTraceTag(506053314,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid compress serialized profile message received by the worker`);break;case os.SkippingLoggingSerializedCallTrees:n.sendTraceTag(506050432,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Skipping logging serialized call trees because the flag is not set`);break;case os.NoSerializedCallTreesToLog:n.sendTraceTag(506050403,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No serialized call trees to log`);break;case os.InvalidConditionalProfileProcessingRequest:n.sendTraceTag(506029471,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid conditional profile processing request`);break;case os.TraceRequestingEventDrivenCallTreeFiltererNotSet:n.sendTraceTag(506015952,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Trace requesting event driven call tree filterer is not set`);break;case os.FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents:n.sendTraceTag(506015951,d.msoulscat_Wac_Telemetry,c.Error,`${r}: FilterCallTreeByTraceRequestingEvents called without valid events`);break;case os.NullTrustedTypesPolicyFactoryCreateScriptURLInvoked:n.sendTraceTag(505693575,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullTrustedTypesPolicyFactory's createScriptURL invoked`);break;case os.TrustedTypesPolicyFactoryCreateScriptURLReturnedNull:n.sendTraceTag(505693574,d.msoulscat_Wac_Telemetry,c.Error,`${r}: TrustedTypesPolicyFactory's createScriptURL returned null`);break;default:n.sendTraceTag(543478147,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown LogId. Please add a case for ${e.id}`)}}constructor(e){this.shouldTransportLogs=e}}class Ls{processLogMessage(e){this.shouldFilterLogMessage(e)||this.logMessageTransporters.forEach((r=>{r.transportLogMessage(e)}))}subscribeFilterer(e){this.logMessageFilterers.push(e)}subscribeTransporter(e){this.logMessageTransporters.push(e)}shouldFilterLogMessage(e){for(const r of this.logMessageFilterers)if(r.shouldFilterLogMessage(e))return!0;return!1}constructor(){this.logMessageFilterers=[],this.logMessageTransporters=[]}}class Bs extends Ls{processLogMessage(e){this.storedLogMessages.queue(e),this.storedLogMessages.length()>10&&this.logMessageTransporters.length>0&&!this.idleTimeJobScheduled&&(this.idleTimeJobScheduled=!0,this.transportLogsInIdleTime())}getNextLogMessageToTransport(){let e=this.storedLogMessages.peek();for(;void 0!==e&&this.shouldFilterLogMessage(e);)this.storedLogMessages.dequeue(),e=this.storedLogMessages.peek();return void 0!==e&&this.storedLogMessages.dequeue(),e}transportLogsInIdleTime(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});this.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{f.startNew("TransportLogMessagesInIdleTime",(e=>{let r=this.getNextLogMessageToTransport(),s=0;for(;void 0!==r&&s<50;)this.logMessageTransporters.forEach((e=>{void 0!==r&&e.transportLogMessage(r)})),s+=1,r=this.getNextLogMessageToTransport(),e.addProperty("NumberOfLogMessagesTransported",s);return this.idleTimeJobScheduled=!1,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),e,this.logger)}))}getAllStoredLogMessages(){return this.storedLogMessages}constructor(e,r){super(),this.idleTimeJobScheduler=e,this.logger=r,this.storedLogMessages=D.createQueue(),this.idleTimeJobScheduled=!1}}class As{retrievePackageV2(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});return f.startNew("RetrieveCPUProfilingPackageV2",(r=>{if(null==e)return P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});if(null==e.ulsInstance)return P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});if(l(e.ulsInstance),r.addProperty("appName",e.appName),r.addProperty("buildVersion",e.buildVersion),null==e.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});if(r.addProperty("deobfuscationEndpoint",e.deObfuscationEndpoint),null==e.useMainEventLoopForProfilerTraceProcessing&&(e.useMainEventLoopForProfilerTraceProcessing=Re),r.addProperty("UseMainEventLoopForProfilerTraceProcessing",e.useMainEventLoopForProfilerTraceProcessing),r.addProperty("profilerTraceProcessingWebWorkerSourceURL",e.profilerTraceProcessingWebWorkerSourceURL),!e.useMainEventLoopForProfilerTraceProcessing&&null==e.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});null==e.callTreeFilteringThresholdInMs&&(e.callTreeFilteringThresholdInMs=50),r.addProperty("CallTreeFilteringThresholdInMs",e.callTreeFilteringThresholdInMs),null==e.shouldProfilingStartInAHiddenDocument&&(e.shouldProfilingStartInAHiddenDocument=be),r.addProperty("ShouldProfilingStartInAHiddenDocument",e.shouldProfilingStartInAHiddenDocument),null==e.shouldProcessProfileCapturedInAHiddenDocument&&(e.shouldProcessProfileCapturedInAHiddenDocument=Oe),r.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",e.shouldProcessProfileCapturedInAHiddenDocument),null==e.shouldKeepSamplesOutsideOfProfilingInterval&&(e.shouldKeepSamplesOutsideOfProfilingInterval=We),r.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",e.shouldKeepSamplesOutsideOfProfilingInterval),null==e.shouldRecordExpandedTimeStamps&&(e.shouldRecordExpandedTimeStamps=ye),r.addProperty("ShouldRecordExpandedTimeStamps",e.shouldRecordExpandedTimeStamps),null==e.shouldCompressSerializedCallTrees&&(e.shouldCompressSerializedCallTrees=!1),r.addProperty("shouldCompressSerializedCallTrees",e.shouldCompressSerializedCallTrees),null==e.shouldSendAllCallTreesFromProfileInASingleRequest&&(e.shouldSendAllCallTreesFromProfileInASingleRequest=Ne),r.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",e.shouldSendAllCallTreesFromProfileInASingleRequest),null==e.shouldUseSendBeaconForSendingCallTrees&&(e.shouldUseSendBeaconForSendingCallTrees=!0),null==e.frameTotalExecutionTimeFilteringThresholdInMs&&(e.frameTotalExecutionTimeFilteringThresholdInMs=0),r.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",e.frameTotalExecutionTimeFilteringThresholdInMs),null==e.shouldAlwaysLogOperationsData&&(e.shouldAlwaysLogOperationsData=xe),r.addProperty("ShouldAlwaysLogOperationsData",e.shouldAlwaysLogOperationsData),null==e.durationThresholdInMsToLogOperationData&&(e.durationThresholdInMsToLogOperationData=50),r.addProperty("DurationThresholdInMsToLogOperationData",e.durationThresholdInMsToLogOperationData),null==e.shouldUseInMemoryLogger&&(e.shouldUseInMemoryLogger=!1),r.addProperty("ShouldUseInMemoryLogger",e.shouldUseInMemoryLogger),null==e.canUseMultipleWebWorkers&&(e.canUseMultipleWebWorkers=!1),r.addProperty("canUseMultipleWebWorkers",e.canUseMultipleWebWorkers),null==e.shouldTransportLogs&&(e.shouldTransportLogs=!0),r.addProperty("shouldTransportLogs",e.shouldTransportLogs),this.logMessageTransporter=new Us(e.shouldTransportLogs),e.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new Ls,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==e.shouldSendProfilesForDeobfuscationImmediately&&(e.shouldSendProfilesForDeobfuscationImmediately=Ee),r.addProperty("ShouldSendProfilesForDeobfuscationImmediately",e.shouldSendProfilesForDeobfuscationImmediately),null==e.shouldProcessProfileCapturedWhileUserIsIdle&&(e.shouldProcessProfileCapturedWhileUserIsIdle=_e),r.addProperty("ShouldProcessProfileCapturedWhileUserIsIdle",e.shouldProcessProfileCapturedWhileUserIsIdle),null==e.shouldKeepQueryParamsInResourceURLs&&(e.shouldKeepQueryParamsInResourceURLs=we),r.addProperty("ShouldKeepQueryParamsInResourceURLs",e.shouldKeepQueryParamsInResourceURLs),null==e.shouldMakeSerializedCallTreesFullyReconstructible&&(e.shouldMakeSerializedCallTreesFullyReconstructible=Ue),r.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",e.shouldMakeSerializedCallTreesFullyReconstructible),null==e.serializeCallTreeWithPropertyBagAsPriority&&(e.serializeCallTreeWithPropertyBagAsPriority=Le),r.addProperty("SerializeCallTreeWithPropertyBagAsPriority",e.serializeCallTreeWithPropertyBagAsPriority),null==e.shouldRecordFrameCounts&&(e.shouldRecordFrameCounts=!1),r.addProperty("shouldRecordFrameCounts",e.shouldRecordFrameCounts),null==e.shouldLogRawProfilerTrace&&(e.shouldLogRawProfilerTrace=!1),r.addProperty("shouldLogRawProfilerTrace",e.shouldLogRawProfilerTrace),null==e.profilerTraceLoggingChunkSize&&(e.profilerTraceLoggingChunkSize=30),r.addProperty("profilerTraceLoggingChunkSize",e.profilerTraceLoggingChunkSize),null==e.shouldLogSerializedCallTrees&&(e.shouldLogSerializedCallTrees=Be),r.addProperty("shouldLogSerializedCallTrees",e.shouldLogSerializedCallTrees),null==e.shouldSendSerializedCallTreesToServer&&(e.shouldSendSerializedCallTreesToServer=Ae),r.addProperty("shouldSendSerializedCallTreesToServer",e.shouldSendSerializedCallTreesToServer),null==e.shouldSkipSupportedOSCheck&&(e.shouldSkipSupportedOSCheck=!1),r.addProperty("ShouldSkipSupportedOSCheck",e.shouldSkipSupportedOSCheck),null==e.maxNumberOfWebWorkersToUse&&(e.maxNumberOfWebWorkersToUse=4),r.addProperty("MaxNumberOfWebWorkersToUse",e.maxNumberOfWebWorkersToUse),null==e.shouldAllowForConditionalProfileProcessingAndSending&&(e.shouldAllowForConditionalProfileProcessingAndSending=!1),r.addProperty("ShouldAllowForConditionalProfileProcessingAndSending",e.shouldAllowForConditionalProfileProcessingAndSending),null==e.isEventBasedPropertyBagAdditionEnabled&&(e.isEventBasedPropertyBagAdditionEnabled=!1),r.addProperty("isEventBasedPropertyBagAdditionEnabled",e.isEventBasedPropertyBagAdditionEnabled),null==e.storedProfilesRetentionPeriodInMs&&(e.storedProfilesRetentionPeriodInMs=3e4),r.addProperty("StoredProfilesRetentionPeriodInMs",e.storedProfilesRetentionPeriodInMs);const s=new _s(e.shouldAlwaysLogOperationsData,he,e.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(s),P.generateOperationResult({didOperationSucceed:!0,result:new xs(e.featureChecker,e,this.logMessageProcessor,this.logger)})}),r,this.logger).getResult()}retrievePackage(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});return f.startNew("RetrieveCPUProfilingPackage",(s=>{if(null==r)return P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});if(null==r.ulsInstance)return P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});if(l(r.ulsInstance),null==r.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});if(null==r.useMainEventLoopForProfilerTraceProcessing&&(r.useMainEventLoopForProfilerTraceProcessing=Re),s.addProperty("UseMainEventLoopForProfilerTraceProcessing",r.useMainEventLoopForProfilerTraceProcessing),!r.useMainEventLoopForProfilerTraceProcessing&&null==r.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),P.generateOperationResult({didOperationSucceed:!1,result:new Fs(this.logger)});null==r.callTreeFilteringThresholdInMs&&(r.callTreeFilteringThresholdInMs=50),null==r.shouldProfilingStartInAHiddenDocument&&(r.shouldProfilingStartInAHiddenDocument=be),null==r.shouldProcessProfileCapturedInAHiddenDocument&&(r.shouldProcessProfileCapturedInAHiddenDocument=Oe),null==r.shouldKeepSamplesOutsideOfProfilingInterval&&(r.shouldKeepSamplesOutsideOfProfilingInterval=We),null==r.shouldRecordExpandedTimeStamps&&(r.shouldRecordExpandedTimeStamps=ye),null==r.shouldSendAllCallTreesFromProfileInASingleRequest&&(r.shouldSendAllCallTreesFromProfileInASingleRequest=Ne),null==r.frameTotalExecutionTimeFilteringThresholdInMs&&(r.frameTotalExecutionTimeFilteringThresholdInMs=0),null==r.shouldAlwaysLogOperationsData&&(r.shouldAlwaysLogOperationsData=xe),null==r.durationThresholdInMsToLogOperationData&&(r.durationThresholdInMsToLogOperationData=50),null==r.shouldUseInMemoryLogger&&(r.shouldUseInMemoryLogger=!1),r.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new Ls,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==r.shouldSendProfilesForDeobfuscationImmediately&&(r.shouldSendProfilesForDeobfuscationImmediately=Ee),null==r.shouldProcessProfileCapturedWhileUserIsIdle&&(r.shouldProcessProfileCapturedWhileUserIsIdle=_e),null==r.shouldKeepQueryParamsInResourceURLs&&(r.shouldKeepQueryParamsInResourceURLs=we),null==r.shouldMakeSerializedCallTreesFullyReconstructible&&(r.shouldMakeSerializedCallTreesFullyReconstructible=Ue),null==r.serializeCallTreeWithPropertyBagAsPriority&&(r.serializeCallTreeWithPropertyBagAsPriority=Le),null==r.shouldSendSerializedCallTreesToServer&&(r.shouldSendSerializedCallTreesToServer=Ae),null==r.shouldLogSerializedCallTrees&&(r.shouldLogSerializedCallTrees=Be);const t=new _s(r.shouldAlwaysLogOperationsData,he,r.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(t),s.addProperty("DeObfuscationEndpoint",r.deObfuscationEndpoint),s.addProperty("CallTreeFilteringThresholdInMs",r.callTreeFilteringThresholdInMs),s.addProperty("ShouldProfilingStartInAHiddenDocument",r.shouldProfilingStartInAHiddenDocument),s.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",r.shouldProcessProfileCapturedInAHiddenDocument),s.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",r.shouldKeepSamplesOutsideOfProfilingInterval),s.addProperty("ShouldRecordExpandedTimeStamps",r.shouldRecordExpandedTimeStamps),s.addProperty("WebWorkerSourceURL",r.profilerTraceProcessingWebWorkerSourceURL),s.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",r.shouldSendAllCallTreesFromProfileInASingleRequest),s.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",r.frameTotalExecutionTimeFilteringThresholdInMs),s.addProperty("ShouldAlwaysLogOperationsData",r.shouldAlwaysLogOperationsData),s.addProperty("DurationThresholdToLogOperationData",r.durationThresholdInMsToLogOperationData),s.addProperty("ShouldUseInMemoryLogger",r.shouldUseInMemoryLogger),s.addProperty("ShouldKeepQueryParamsInResourceURLs",r.shouldKeepQueryParamsInResourceURLs),s.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",r.shouldMakeSerializedCallTreesFullyReconstructible),P.generateOperationResult({didOperationSucceed:!0,result:new xs(e,r,this.logMessageProcessor,this.logger)})}),s,this.logger).getResult()}constructor(){this.logger=new Es(is.MainEventLoop);const e=x.getIdleTimeJobScheduler();this.logMessageProcessor=new Bs(e,this.logger),this.logMessageTransporter=new Us(!0),this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)}}function zs(){return new As}officeOnlinePerf=r}();
//# sourceMappingURL=https://artifacts.dev.azure.com/office/_apis/symbol/symsrv/officeOnlinePerf.min.js.map/c463385d0d4f9f8d41f0020a2d0c8c97/officeOnlinePerf.min.js.map